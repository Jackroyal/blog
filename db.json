{"meta":{"version":1,"warehouse":"1.0.3"},"models":{"Asset":[{"_id":"themes/light/source/js/jquery.imagesloaded.min.js","path":"js/jquery.imagesloaded.min.js","modified":0},{"_id":"themes/light/source/js/gallery.js","path":"js/gallery.js","modified":0},{"_id":"themes/light/source/fancybox/jquery.fancybox.pack.js","path":"fancybox/jquery.fancybox.pack.js","modified":0},{"_id":"themes/light/source/fancybox/jquery.fancybox.css","path":"fancybox/jquery.fancybox.css","modified":0},{"_id":"themes/light/source/fancybox/fancybox_sprite@2x.png","path":"fancybox/fancybox_sprite@2x.png","modified":0},{"_id":"themes/light/source/fancybox/fancybox_sprite.png","path":"fancybox/fancybox_sprite.png","modified":0},{"_id":"themes/light/source/fancybox/fancybox_overlay.png","path":"fancybox/fancybox_overlay.png","modified":0},{"_id":"themes/light/source/fancybox/fancybox_loading@2x.gif","path":"fancybox/fancybox_loading@2x.gif","modified":0},{"_id":"themes/light/source/fancybox/fancybox_loading.gif","path":"fancybox/fancybox_loading.gif","modified":0},{"_id":"themes/light/source/fancybox/blank.gif","path":"fancybox/blank.gif","modified":0},{"_id":"themes/light/source/css/style.styl","path":"css/style.styl","modified":0},{"_id":"themes/light/source/css/font/fontawesome-webfont.woff","path":"css/font/fontawesome-webfont.woff","modified":0},{"_id":"themes/light/source/css/font/fontawesome-webfont.ttf","path":"css/font/fontawesome-webfont.ttf","modified":0},{"_id":"themes/light/source/css/font/fontawesome-webfont.svg","path":"css/font/fontawesome-webfont.svg","modified":0},{"_id":"themes/light/source/css/font/fontawesome-webfont.eot","path":"css/font/fontawesome-webfont.eot","modified":0},{"_id":"themes/light/source/css/font/FontAwesome.otf","path":"css/font/FontAwesome.otf","modified":0}],"Cache":[{"_id":"source/_posts/[js]replace替换.md","shasum":"dfd1dce37632e3611c51391a32573609b326d5f9","modified":1446098902495},{"_id":"source/_posts/[js]前端试题.md","shasum":"23a43ea66d1d4fd4cfa194517d0a12ee986faaf5","modified":1443526883725},{"_id":"source/_posts/after-kali.md","shasum":"002bed0c1b3b6b6b771a68edcb2d090f0378fac5","modified":1446098900487},{"_id":"source/_posts/blog2markdown-csdn-windows.md","shasum":"9d5aed158e3320497384bec07f7138c646616ed8","modified":1446098935503},{"_id":"source/_posts/chrome扩展开发手记-chrome扩展开始第一步manfest.json.md","shasum":"a6c4260ebdcf35a05cbeb2febc75f1d83c195762","modified":1443526883726},{"_id":"source/_posts/chrome扩展开发手记1-需求分析.md","shasum":"6c8062392a285be0209d8572b603a06170ba98d9","modified":1443526883726},{"_id":"source/_posts/chrome扩展开发手记2-登录原理分析.md","shasum":"a8ccfd0fee0737c556ac875164720575bcc998be","modified":1443526883726},{"_id":"source/_posts/cmcc520扩展使用说明.md","shasum":"435780374a028424cd5e91a64250960dca6c1f08","modified":1443526883727},{"_id":"source/_posts/custom-hexo.md","shasum":"57f93f0cdf6b74792f57fd0cccb3dc0d510b235c","modified":1446098933291},{"_id":"source/_posts/digitalocean-support-google-scholar-by-ipv6.md","shasum":"10708207eba05605aaacceefa146c9950c501189","modified":1446098932009},{"_id":"source/_posts/face-detection.md","shasum":"82c539b13e3b9a0ce94a3366a46eb36ab8743701","modified":1446098931597},{"_id":"source/_posts/face-recognizer.md","shasum":"0ca56e71b818f79436f8ab3a087c35a8b44edd50","modified":1446098931233},{"_id":"source/_posts/hexo-3-0-update.md","shasum":"1097068e0049c7738927fcda96bdd0d4d9814aef","modified":1446098930371},{"_id":"source/_posts/hexo-deploy-error.md","shasum":"fa2cd23855350bdc2a5ea60e9222b63c7cddc1e3","modified":1446098929964},{"_id":"source/_posts/hexo-setting-with-comments-and-visitors.md","shasum":"26a0a0cdf14f7047661d9083c7b9e9295082a3ea","modified":1446098929539},{"_id":"source/_posts/holes-in-ie6-about-html5.md","shasum":"9a2350e3f17835f4ba59947dc1faed3cb1d48e7f","modified":1446098929149},{"_id":"source/_posts/how-to-build-a-blog-with-hexo.md","shasum":"66715a6459d94baa813602ee25b25202b3c65c65","modified":1446098928740},{"_id":"source/_posts/kali-and-ubuntu.md","shasum":"9ced85fb841dc3390de2fedee640e8f3d078600d","modified":1446098928348},{"_id":"source/_posts/linux下使用github.md","shasum":"d23ca91261df9159be7c00198892020e1a6514fd","modified":1446098927988},{"_id":"source/_posts/new-start.md","shasum":"40ed95747e311d7763c94b846d602f48e358366a","modified":1443526883730},{"_id":"source/_posts/opencv-and-vs2010-in-win8.md","shasum":"06131ef4734cb297900a560486f068025654edda","modified":1446098927548},{"_id":"source/_posts/opencv-lbph-source-code-analysis.md","shasum":"32acc719d0ac677c73ce00aae70a491ea35a67cb","modified":1443526883730},{"_id":"source/_posts/php-boolean-value.md","shasum":"b2f9b7942e59e16af6c79af81443061590cb172d","modified":1446098926797},{"_id":"source/_posts/python-blog-spider.md","shasum":"62e9f9cb76aab835a341fb5c75ba728c3effcfc3","modified":1446098926478},{"_id":"source/_posts/python-im.md","shasum":"192b2bb4b23423b8a7f4a9783011f01ac0c45d32","modified":1446098926091},{"_id":"source/_posts/python-requests-login-csdn-blog.md","shasum":"47060e74ba5d41888f3f6d1061f20dab1473d44e","modified":1446098925707},{"_id":"source/_posts/python-socket-port-reuse.md","shasum":"a9f9f04a97a8a3e2ac79eb2bf9fcdaae89826334","modified":1446098925367},{"_id":"source/_posts/recent-task.md","shasum":"4ae0899df647db128b4d48649fb5d2a55cc90f8f","modified":1443526883732},{"_id":"source/_posts/sql中left_join和right_join混用.md","shasum":"3bc83929ddfed08b937c0aec846a93b1e4ec166a","modified":1443526883732},{"_id":"source/_posts/ubuntu-14-04-setting-about-thinkphp-url-rewrite.md","shasum":"0f52c6b11762b57d59adc32536771211a459b424","modified":1446098924831},{"_id":"source/_posts/ubuntu-denyhosts.md","shasum":"3614f0cf4eabcfa117c2a12aeb5dcb770687f6a1","modified":1446098924363},{"_id":"source/_posts/ubuntu-lamp-alias-setting.md","shasum":"5695ef83402a5ab486255f036628781219010f9a","modified":1446098923994},{"_id":"source/_posts/ubuntu-scrapy-stackoverflow.md","shasum":"d050299c7c1daf7b1c493d7581cf46f888644edf","modified":1446098923478},{"_id":"source/_posts/use-ss.md","shasum":"d542a54c9ff427de2daa86a3f565259ef0fe3e04","modified":1446098922816},{"_id":"source/_posts/wamp与sql_server_因为端口80冲突,无法开启wamp.md","shasum":"3fece93a3087ba638414cce4e3ac0ef95ca7056a","modified":1443526883733},{"_id":"source/_posts/weixin-app-pay-v3-0.md","shasum":"e99b9d1d42ad4f7469865f93c9f2ffda0bbd9f23","modified":1446099178325},{"_id":"source/_posts/阿里云windows_server_2003_搭建邮件服务器.md","shasum":"fe01a017a9dd4cf1f36ab5801cfd9b7a74165a2f","modified":1443526883734},{"_id":"themes/light/source/css/_base/utils.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1443526883775},{"_id":"themes/light/LICENSE","shasum":"17d3ed51d6d6962155f7dacd4f101f4969ad0bbe","modified":1443526883765},{"_id":"themes/light/README.md","shasum":"f9adc61563e8824ec507911dc7df70655a534378","modified":1443526883765},{"_id":"themes/light/_config.yml","shasum":"b5c008e23bacc6c165e98439c4cc948dcb1fcc4a","modified":1443526883765},{"_id":"themes/light/languages/de.yml","shasum":"1ebe2d4f1b48c84e004c933bec65731fb54c9998","modified":1443526883765},{"_id":"themes/light/languages/default.yml","shasum":"feb1dd022dc8897d65baa5b927de2a3d4178d798","modified":1443526883765},{"_id":"themes/light/languages/es.yml","shasum":"727707b95580bbe9773edef4c84a9735fd537742","modified":1443526883766},{"_id":"themes/light/languages/ru.yml","shasum":"37161bb9b6cc2dae1f53837185be32e7a0b8abfa","modified":1443526883766},{"_id":"themes/light/languages/zh-CN.yml","shasum":"751f1a2bbfb6736c71e846493ae0fb7ef7dc778d","modified":1443526883766},{"_id":"themes/light/languages/zh-TW.yml","shasum":"b2474b775a8fa0fa3e9e3c58ddb11b20cf65dbc5","modified":1443526883767},{"_id":"themes/light/layout/_partial/after_footer.ejs","shasum":"34f8b127ddebdbe573135455a6114371a4d0cc91","modified":1443526883767},{"_id":"themes/light/layout/_partial/archive.ejs","shasum":"be5bc2e5c7e9af285aa69384ff1b6752b494cd1c","modified":1443526883767},{"_id":"themes/light/layout/_partial/article.ejs","shasum":"bdab4a8933a5a7e31b2f5d29e1c7bc770463c49c","modified":1443526883768},{"_id":"themes/light/layout/_partial/comment.ejs","shasum":"18a406f6b4bc6a9dab1460bbd03f52f7ba367247","modified":1443526883768},{"_id":"themes/light/layout/_partial/donate.ejs","shasum":"f3e14c412f643c14293bccd9b72b335efce7e93a","modified":1446096036594},{"_id":"themes/light/layout/_partial/facebook_comment.ejs","shasum":"49ee54e84fe2b70bd9540e2eeba5a85f744941b0","modified":1443526883768},{"_id":"themes/light/layout/_partial/footer.ejs","shasum":"1e7d75ffee2a0b21365c9c44ef7369b5a693a79f","modified":1443526883769},{"_id":"themes/light/layout/_partial/google_analytics.ejs","shasum":"06816997ff115a07fce5402fe53826a3a85f6147","modified":1443526883769},{"_id":"themes/light/layout/_partial/head.ejs","shasum":"2e76dc3c550fcbce0d5dcf5a4b7a11ef1203c3e7","modified":1443526883769},{"_id":"themes/light/layout/_partial/header.ejs","shasum":"829b5c0a0e2eed16fdd835fb0e1105ae778be9ee","modified":1443526883769},{"_id":"themes/light/layout/_partial/pagination.ejs","shasum":"5a3c65842354b04c7839c915c045d39be9342cdf","modified":1443526883769},{"_id":"themes/light/layout/_partial/post/category.ejs","shasum":"8bb3f6ee6296df5a0d527b30d5a46a2387b97cb7","modified":1443526883770},{"_id":"themes/light/layout/_partial/post/gallery.ejs","shasum":"fc23ef9b5a412e05436f68ff47146b860d2d4225","modified":1443526883770},{"_id":"themes/light/layout/_partial/post/share.ejs","shasum":"991cf130c37f08c7e948772fb45587592b165b55","modified":1443526883770},{"_id":"themes/light/layout/_partial/post/tag.ejs","shasum":"b21bbfb5479bd5968a610ba8bdb2bdf10d7a40e9","modified":1443526883770},{"_id":"themes/light/layout/_partial/post/title.ejs","shasum":"7f93b310927d6238effdde15234d8cb242940893","modified":1443526883770},{"_id":"themes/light/layout/_partial/sidebar.ejs","shasum":"016441ca9534769d8e151cffe4027686e9c86f18","modified":1443526883771},{"_id":"themes/light/layout/_widget/blogroll.ejs","shasum":"0324d9983f5ebab675831dd8bb8d4ab2b98a7373","modified":1446042375557},{"_id":"themes/light/layout/_widget/category.ejs","shasum":"c163a146b0f963f257ddcc244f413bef281fe0a0","modified":1443526883771},{"_id":"themes/light/layout/_widget/recent_posts.ejs","shasum":"59f6f8362fa23a6215e3381151a59c2e2a5fd0d3","modified":1443526883771},{"_id":"themes/light/layout/_widget/search.ejs","shasum":"93d4a690494dfa405024f23511846ea00d647be7","modified":1443526883771},{"_id":"themes/light/layout/_widget/tag.ejs","shasum":"6bf8214fedb8d6306e017e07ad67aab956496500","modified":1443526883772},{"_id":"themes/light/layout/_widget/tagcloud.ejs","shasum":"139e91b1e6abcc1e3883bcc03a9a1a7f1d891d7a","modified":1443526883772},{"_id":"themes/light/layout/archive.ejs","shasum":"a18842e3d719fe3ca9b977a6995f8facc75c8673","modified":1443526883772},{"_id":"themes/light/layout/category.ejs","shasum":"9b740fc33f6f028df60f0bc4312bf3ebd03aa8ea","modified":1443526883772},{"_id":"themes/light/layout/index.ejs","shasum":"c7cf84c84c26f1adfc249bc9a7605206fa245f73","modified":1443526883773},{"_id":"themes/light/layout/layout.ejs","shasum":"6999916072898aedfe13f4a07211dd1578ad4799","modified":1443526883773},{"_id":"themes/light/layout/page.ejs","shasum":"70cbc9854655773cc6ba84eecaaf330fed430465","modified":1443526883773},{"_id":"themes/light/layout/post.ejs","shasum":"70cbc9854655773cc6ba84eecaaf330fed430465","modified":1443526883773},{"_id":"themes/light/layout/tag.ejs","shasum":"45150a2365768b6b67880193c9264ad2bb4814db","modified":1443526883774},{"_id":"themes/light/package.json","shasum":"0199dfb3d44cf520b67464817d13c44a7766b8d6","modified":1443526883774},{"_id":"themes/light/source/css/_base/font-awesome.min.css","shasum":"2ef7f5881a8af7a2772f3829f5778a09ac53a1b1","modified":1443526883775},{"_id":"themes/light/source/css/_base/layout.styl","shasum":"b26cd4768466f637b620029b314dd50a06c98b8c","modified":1443526883775},{"_id":"themes/light/source/css/_base/variable.styl","shasum":"7bc2ca37ffad6220e432162d1946373f16f3f3ce","modified":1443526883776},{"_id":"themes/light/source/css/_partial/archive.styl","shasum":"b6fa84ea80bfbdb3a93f64c06a8c652e4242128e","modified":1443526883776},{"_id":"themes/light/source/css/_partial/article.styl","shasum":"b2ddf5a246c25d18ff014035b59bee67d8fe7bed","modified":1443526883776},{"_id":"themes/light/source/css/_partial/comment.styl","shasum":"b6e8886c45df2858e2f3faf82ffe4b7c2deee5bf","modified":1443526883776},{"_id":"themes/light/source/css/_partial/donate.styl","shasum":"b32cd87ec50243e755db5e036a1fcbd1c9b747e9","modified":1443526883777},{"_id":"themes/light/source/css/_partial/header.styl","shasum":"ad67bf40a0cafb1e5514b058c853c517e602fe44","modified":1443526883778},{"_id":"themes/light/source/css/_partial/index.styl","shasum":"eb0f1536a57cca57d9a280191fbb63185c266ee8","modified":1443526883778},{"_id":"themes/light/source/css/_partial/sidebar.styl","shasum":"213a16c3206d045ca01b0abf8891e96421d61fb9","modified":1443526883778},{"_id":"themes/light/source/css/_partial/syntax.styl","shasum":"bb6d6441aad58af730140bac83c880ac3050bd77","modified":1443526883778},{"_id":"themes/light/source/css/font/fontawesome-webfont.eot","shasum":"0183979056f0b87616cd99d5c54a48f3b771eee6","modified":1443526883780},{"_id":"themes/light/source/css/font/fontawesome-webfont.woff","shasum":"7d65e0227d0d7cdc1718119cd2a7dce0638f151c","modified":1443526883784},{"_id":"themes/light/source/css/style.styl","shasum":"8e8458e78717c49c4ff278b741258d77301f6be4","modified":1443526883784},{"_id":"themes/light/source/fancybox/blank.gif","shasum":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1443526883784},{"_id":"themes/light/source/fancybox/fancybox_loading.gif","shasum":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1443526883784},{"_id":"themes/light/source/fancybox/fancybox_loading@2x.gif","shasum":"273b123496a42ba45c3416adb027cd99745058b0","modified":1443526883785},{"_id":"themes/light/source/fancybox/fancybox_overlay.png","shasum":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1443526883785},{"_id":"themes/light/source/fancybox/fancybox_sprite.png","shasum":"17df19f97628e77be09c352bf27425faea248251","modified":1443526883785},{"_id":"themes/light/source/fancybox/fancybox_sprite@2x.png","shasum":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1443526883786},{"_id":"themes/light/source/css/_partial/footer.styl","shasum":"c0c656b1c02effb2e27f13076da4ffcad83850e7","modified":1443526883777},{"_id":"themes/light/source/fancybox/jquery.fancybox.css","shasum":"82f33ad0842aa9c154d029e0dada2497d4eb1d57","modified":1443526883786},{"_id":"themes/light/source/fancybox/jquery.fancybox.pack.js","shasum":"ae6318aeb62ad4ce7a7e9a4cdacd93ffb004f0fb","modified":1443526883786},{"_id":"themes/light/source/js/gallery.js","shasum":"735a714e54f0ac229f292a90df3a1f882904f6c7","modified":1443526883787},{"_id":"themes/light/source/js/jquery.imagesloaded.min.js","shasum":"28ef4346743a60c896a9ae492a544c0854904350","modified":1443526883787},{"_id":"themes/light/source/css/font/FontAwesome.otf","shasum":"6270a4a561a69fef5f5cc18cdf9efc256ec2ccbe","modified":1443526883780},{"_id":"themes/light/source/css/font/fontawesome-webfont.svg","shasum":"ff51bbb11dfe58345f41cead2c425d6e8be28176","modified":1443526883782},{"_id":"themes/light/source/css/font/fontawesome-webfont.ttf","shasum":"6225ccc4ec94d060f19efab97ca42d842845b949","modified":1443526883783},{"_id":"public/js/jquery.imagesloaded.min.js","modified":1446099248015,"shasum":"4109837b1f6477bacc6b095a863b1b95b1b3693f"},{"_id":"public/js/gallery.js","modified":1446099248020,"shasum":"f8a4ba7fb8349cca374a3c69fff9b2bf21f742ed"},{"_id":"public/fancybox/jquery.fancybox.pack.js","modified":1446099248024,"shasum":"53360764b429c212f424399384417ccc233bb3be"},{"_id":"public/fancybox/jquery.fancybox.css","modified":1446099248027,"shasum":"5f163444617b6cf267342f06ac166a237bb62df9"},{"_id":"public/fancybox/fancybox_sprite@2x.png","modified":1446099248054,"shasum":"30c58913f327e28f466a00f4c1ac8001b560aed8"},{"_id":"public/fancybox/fancybox_sprite.png","modified":1446099248063,"shasum":"17df19f97628e77be09c352bf27425faea248251"},{"_id":"public/fancybox/fancybox_overlay.png","modified":1446099248067,"shasum":"b3a4ee645ba494f52840ef8412015ba0f465dbe0"},{"_id":"public/fancybox/fancybox_loading@2x.gif","modified":1446099248070,"shasum":"273b123496a42ba45c3416adb027cd99745058b0"},{"_id":"public/fancybox/fancybox_loading.gif","modified":1446099248080,"shasum":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c"},{"_id":"public/fancybox/blank.gif","modified":1446099248083,"shasum":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a"},{"_id":"public/css/style.css","modified":1446099249018,"shasum":"efd64071c4ef7de72506f49b9d1724799a264010"},{"_id":"public/css/font/fontawesome-webfont.woff","modified":1446099249205,"shasum":"7d65e0227d0d7cdc1718119cd2a7dce0638f151c"},{"_id":"public/css/font/fontawesome-webfont.ttf","modified":1446099249210,"shasum":"6225ccc4ec94d060f19efab97ca42d842845b949"},{"_id":"public/css/font/fontawesome-webfont.svg","modified":1446099249220,"shasum":"ff51bbb11dfe58345f41cead2c425d6e8be28176"},{"_id":"public/css/font/fontawesome-webfont.eot","modified":1446099249224,"shasum":"0183979056f0b87616cd99d5c54a48f3b771eee6"},{"_id":"public/css/font/FontAwesome.otf","modified":1446099249228,"shasum":"6270a4a561a69fef5f5cc18cdf9efc256ec2ccbe"},{"_id":"public/2015/10/25/weixin-app-pay-v3-0/index.html","modified":1446099249319,"shasum":"e11063ca5357309374cefa196199d806098bae3c"},{"_id":"public/2015/10/15/ubuntu-lamp-alias-setting/index.html","modified":1446099249387,"shasum":"70df94f1d9a797f0f8dbe6eaac18921317d14c17"},{"_id":"public/2015/07/20/php-boolean-value/index.html","modified":1446099249435,"shasum":"4cd02093d2ab48d8417c41222effd54d54237df0"},{"_id":"public/2015/06/29/ubuntu-14-04-setting-about-thinkphp-url-rewrite/index.html","modified":1446099249487,"shasum":"f9c72300172c93faaa16bc95c41ae30073f5aadd"},{"_id":"public/2015/06/16/digitalocean-support-google-scholar-by-ipv6/index.html","modified":1446099249528,"shasum":"f321be16c7a2899ff9173bb51676dbec6aabb06b"},{"_id":"public/2015/06/16/hexo-3-0-update/index.html","modified":1446099249564,"shasum":"de4db1e369c2c022f9394ac8836d9e3dc2ba2db6"},{"_id":"public/2015/05/30/hexo-setting-with-comments-and-visitors/index.html","modified":1446099249600,"shasum":"1e8fd8cea4b42dc32986d48017c64d7847329bf7"},{"_id":"public/2015/05/23/python-requests-login-csdn-blog/index.html","modified":1446099249635,"shasum":"49ba31321a8da1fa16c2e177980d43708c98f110"},{"_id":"public/2015/05/15/holes-in-ie6-about-html5/index.html","modified":1446099249674,"shasum":"4c232a6b3224a6f81ea934a49ffd91740dfab4c7"},{"_id":"public/2015/05/15/opencv-and-vs2010-in-win8/index.html","modified":1446099249705,"shasum":"cd27d577eca2b1f7a8db55102639067f5ccfcab1"},{"_id":"public/2015/05/06/opencv-lbph-source-code-analysis/index.html","modified":1446099249738,"shasum":"35b9d868c5c473a741bdcdc672a4d175be2c1c52"},{"_id":"public/2015/04/28/ubuntu-denyhosts/index.html","modified":1446099249773,"shasum":"eb0d25e45ec2014ee3d04a3678187ad08ab87bbd"},{"_id":"public/2015/04/26/ubuntu-scrapy-stackoverflow/index.html","modified":1446099249807,"shasum":"b56debf1e19fd8d9ebadd53898669f11fca45e33"},{"_id":"public/2015/04/26/face-detection/index.html","modified":1446099249838,"shasum":"8bccf9b628cdaa4d51fc8d38cd77b554c95242f2"},{"_id":"public/2015/04/26/face-recognizer/index.html","modified":1446099249882,"shasum":"af9378a1da8917a5bdde6aaa6185bf33c915c0ea"},{"_id":"public/2015/03/29/blog2markdown-csdn-windows/index.html","modified":1446099249911,"shasum":"fab0ee4dc5cd1b3920fb27ecae6445de4f947ba1"},{"_id":"public/2015/03/29/hexo-deploy-error/index.html","modified":1446099249942,"shasum":"f80e5419c2e664cbfcb126ee0fb6195976ea636f"},{"_id":"public/2015/03/29/python-blog-spider/index.html","modified":1446099249972,"shasum":"416498fb98bc97b0643396cb2c09648244092bf3"},{"_id":"public/2015/03/26/python-im/index.html","modified":1446099250006,"shasum":"395dfe4b551977cc3b81f40ef0128ac1514d5174"},{"_id":"public/2015/03/18/python-socket-port-reuse/index.html","modified":1446099250034,"shasum":"bb6dd7e68eb2e998661509446a77c9976e9d2d4f"},{"_id":"public/2015/03/09/use-ss/index.html","modified":1446099250066,"shasum":"a9ef55575b2c11d294172d9e386bcbec6a094a41"},{"_id":"public/2015/03/04/after-kali/index.html","modified":1446099250098,"shasum":"a3dcc8f2f67f544a46d6e34c2a12e2fb552e2ce8"},{"_id":"public/2015/03/03/kali-and-ubuntu/index.html","modified":1446099250128,"shasum":"c3d19f638925d1e348f0d4bb84a1ff690f6ba5dd"},{"_id":"public/2015/01/19/linux下使用github/index.html","modified":1446099250156,"shasum":"c02d046745c263ca189f2c6dac632db634403400"},{"_id":"public/2014/12/02/recent-task/index.html","modified":1446099250185,"shasum":"8dd2aa8a8fd3de66e4d2593f0473c12e6ecee94a"},{"_id":"public/2014/11/28/custom-hexo/index.html","modified":1446099250220,"shasum":"8208abca43987a77ea752fe72fec1d8648054afe"},{"_id":"public/2014/11/27/how-to-build-a-blog-with-hexo/index.html","modified":1446099250251,"shasum":"648856cd3778439c8ad6cac46c09d941c0335738"},{"_id":"public/2014/11/26/new-start/index.html","modified":1446099250281,"shasum":"2ee097d2087afed96bd4de1a20f9a9196f8071c0"},{"_id":"public/2014/11/25/[js]replace替换/index.html","modified":1446099250313,"shasum":"4b455bd30da920d9048f2c9c7310ae861dc8d0e2"},{"_id":"public/2014/11/25/[js]前端试题/index.html","modified":1446099250341,"shasum":"d2c95347882d3ea677a7d17537da3d72a4f2e174"},{"_id":"public/2014/11/24/cmcc520扩展使用说明/index.html","modified":1446099250371,"shasum":"720aa80c618509aa2feeccabbac89afbb7754c67"},{"_id":"public/2014/11/24/chrome扩展开发手记-chrome扩展开始第一步manfest.json/index.html","modified":1446099250401,"shasum":"c94004402f2d192b5eb7537460a8990c866f59c7"},{"_id":"public/2014/11/24/chrome扩展开发手记2-登录原理分析/index.html","modified":1446099250433,"shasum":"2277f7f3d6903eac3b811a0a4b3358ffc56d80b8"},{"_id":"public/2014/11/21/chrome扩展开发手记1-需求分析/index.html","modified":1446099250462,"shasum":"5f2af41548cb087fa4cf1a9bb64899be0ab7f89e"},{"_id":"public/2014/11/14/wamp与sql_server_因为端口80冲突,无法开启wamp/index.html","modified":1446099250489,"shasum":"c9d34532bbbdbfb6e849fbf8d0e0f204ee9096b0"},{"_id":"public/2014/08/08/sql中left_join和right_join混用/index.html","modified":1446099250523,"shasum":"54189acc2a89a964f93b21011b4d6e5646921b55"},{"_id":"public/2014/06/28/阿里云windows_server_2003_搭建邮件服务器/index.html","modified":1446099250554,"shasum":"c043347053a66124933632c20a113f8960ed414c"},{"_id":"public/categories/javascript/index.html","modified":1446099250584,"shasum":"d982b11057fa53be0b49e3d279935d2585f1e538"},{"_id":"public/categories/服务器/index.html","modified":1446099250612,"shasum":"3fcc19933d5afb69bc5753ed9d551722590e310d"},{"_id":"public/categories/php/index.html","modified":1446099250642,"shasum":"7ebd84ee14c39527dac2f4d2603cb2ed8784fdb5"},{"_id":"public/categories/软件安装与技巧/index.html","modified":1446099250669,"shasum":"08fc01f21a4dc595d366e190705194ca80333cc0"},{"_id":"public/categories/Linux/index.html","modified":1446099250696,"shasum":"351938274b13fab7004e5eea84053dd1030b4e3a"},{"_id":"public/categories/python学习笔记/index.html","modified":1446099250721,"shasum":"2196990dba84fc04fcc2bb2e1e6790477c19e5bc"},{"_id":"public/categories/数据库/index.html","modified":1446099250752,"shasum":"b123bfec4fd24dce68da7e5a1ee74bce94afdc96"},{"_id":"public/categories/杂文/index.html","modified":1446099250779,"shasum":"95724a60b17b45315888d530f4247ea6141554af"},{"_id":"public/categories/图像处理/index.html","modified":1446099250804,"shasum":"cc35992900ad912e94de8dabae41fe3ae1571c8e"},{"_id":"public/categories/hexo/index.html","modified":1446099250831,"shasum":"e074635ab1dc511eb6ccd1ab4e61e138186a7b35"},{"_id":"public/categories/前端/index.html","modified":1446099250863,"shasum":"e1e2240cd17abda359a78380714f8d1750cd05b2"},{"_id":"public/categories/chrome扩展/index.html","modified":1446099250889,"shasum":"6cb18fe5f071490065cfb42c556e9fec74604877"},{"_id":"public/archives/index.html","modified":1446099250917,"shasum":"dac926dcbd581d3d4cb68a151336bb3667f188a5"},{"_id":"public/archives/page/2/index.html","modified":1446099250966,"shasum":"148b47753d02e925c87a4941b3003fc2765b5f6e"},{"_id":"public/archives/page/3/index.html","modified":1446099250999,"shasum":"3c7b86f4b25d61d250168fee1bb14872157e93c2"},{"_id":"public/archives/page/4/index.html","modified":1446099251026,"shasum":"a16fbd267d3d3b8b319933027b32c66035db21b4"},{"_id":"public/archives/2014/index.html","modified":1446099251052,"shasum":"c0f6475df1f566c30bde48edb1a107547d089a25"},{"_id":"public/archives/2014/page/2/index.html","modified":1446099251078,"shasum":"ec392eb0914c3669b614cb8aac3c2aa00f2879d8"},{"_id":"public/archives/2014/06/index.html","modified":1446099251108,"shasum":"410734bc1eaec144991c19454ab3373cc1a5572b"},{"_id":"public/archives/2014/08/index.html","modified":1446099251134,"shasum":"9b695a78ae5900df0258aeca2e03a21a853037b3"},{"_id":"public/archives/2014/11/index.html","modified":1446099251162,"shasum":"810c4a14c3c92877987decf8499a0ae9e97591dd"},{"_id":"public/archives/2014/12/index.html","modified":1446099251193,"shasum":"172bd16f071edfb926625652e58a15207ede71ee"},{"_id":"public/archives/2015/index.html","modified":1446099251224,"shasum":"fc8613ce3781611d777b478f64a0fb40980adee6"},{"_id":"public/archives/2015/page/2/index.html","modified":1446099251252,"shasum":"28ba4cd9633fa64da20e664b16825332286e492d"},{"_id":"public/archives/2015/page/3/index.html","modified":1446099251278,"shasum":"f66b24eac6b77fe09de56a4143b074ba504c8132"},{"_id":"public/archives/2015/01/index.html","modified":1446099251307,"shasum":"0e45b95d9812d95ef464ba12c21f8d964d60c9f8"},{"_id":"public/archives/2015/03/index.html","modified":1446099251336,"shasum":"50beb05fcbea155e7ab57a5e4929aa486c0cd16c"},{"_id":"public/archives/2015/04/index.html","modified":1446099251361,"shasum":"8d51712b52aa7493ac201ab06b9469049d752a97"},{"_id":"public/archives/2015/05/index.html","modified":1446099251387,"shasum":"e953cb88d80a12e30c0223b87427766d2af2c2b7"},{"_id":"public/archives/2015/06/index.html","modified":1446099251422,"shasum":"a5408844e9c305587efe2531dc172298c1c8ae10"},{"_id":"public/archives/2015/07/index.html","modified":1446099251450,"shasum":"04828df917ac22a0e62f511c49a646693b98e855"},{"_id":"public/archives/2015/10/index.html","modified":1446099251480,"shasum":"209e840129252432c0cd556619ff8de6ebd45b39"},{"_id":"public/index.html","modified":1446099251522,"shasum":"0691613e186826772c621838546883afecb4b2ec"},{"_id":"public/page/2/index.html","modified":1446099251566,"shasum":"48cd10f6d98477311a24dcdf39718265f5c56236"},{"_id":"public/page/3/index.html","modified":1446099251604,"shasum":"92b3ea5dc6f447fcfad50e1666b7560e20e14a59"},{"_id":"public/page/4/index.html","modified":1446099251647,"shasum":"985d9c57775a5dddc089b043882eba2c00de1815"},{"_id":"public/tags/javascript/index.html","modified":1446099251678,"shasum":"8358134066a255a69c61634f398698e7e9d80873"},{"_id":"public/tags/正则表达式/index.html","modified":1446099251706,"shasum":"2cd86cb02d9a6f2ed06896bdcd13143cd21ccc18"},{"_id":"public/tags/前端/index.html","modified":1446099251733,"shasum":"9e66a039277901d0e0bc43face4d73e9457272da"},{"_id":"public/tags/js/index.html","modified":1446099251768,"shasum":"f2f26c3b76d30cda40c436957d0fba4816b6fd5f"},{"_id":"public/tags/微信支付/index.html","modified":1446099251796,"shasum":"85d9c930522f83f7b4e56cf9e9ea392bd08dc98a"},{"_id":"public/tags/api/index.html","modified":1446099251822,"shasum":"e34431368ed465cebdd87bc4a2617e6b75d00c78"},{"_id":"public/tags/sql-server/index.html","modified":1446099251852,"shasum":"48bc9c318abc0671eb781354dad5162d5d0775aa"},{"_id":"public/tags/wamp/index.html","modified":1446099251884,"shasum":"b12466587b910bd1a2ada39c83fe56707f72081d"},{"_id":"public/tags/Linux/index.html","modified":1446099251912,"shasum":"e50b80d80a20cce6c25d80e08168820aa7fd67e7"},{"_id":"public/tags/ubuntu/index.html","modified":1446099251939,"shasum":"ef50cb9827325d9677f72eefae94ad6fe12496d0"},{"_id":"public/tags/shadowsocks/index.html","modified":1446099251966,"shasum":"45bad16007d8ac393982f85a665e55bcb4076f1d"},{"_id":"public/tags/python/index.html","modified":1446099252000,"shasum":"fc9babdc9e0aa9adab27a3bf26a3e769a3853797"},{"_id":"public/tags/scrapy/index.html","modified":1446099252028,"shasum":"72723ed8e29538d97853d2aaa54518cae3611950"},{"_id":"public/tags/爬虫/index.html","modified":1446099252055,"shasum":"e2a085dea78af4a440cd737eac54b0fc2b6642cd"},{"_id":"public/tags/apache/index.html","modified":1446099252084,"shasum":"d0704a1da8369638c755993f0afb8e1646b8b5fc"},{"_id":"public/tags/thinkphp/index.html","modified":1446099252114,"shasum":"cbd9e29aecfd1fb5fad91c98bfb8408e0be59aa5"},{"_id":"public/tags/sql/index.html","modified":1446099252142,"shasum":"d69b71dd622463f4817a1c7eed904b0c7fd3c94c"},{"_id":"public/tags/select/index.html","modified":1446099252170,"shasum":"0f96e348c3dbbc5f7665e293b7e3f54649e901f8"},{"_id":"public/tags/socket/index.html","modified":1446099252198,"shasum":"0d05caba584973e44af8445ff6f6fd229a28a6cd"},{"_id":"public/tags/csdn/index.html","modified":1446099252230,"shasum":"8976d7a49b320481eae25bee75002f32592c86db"},{"_id":"public/tags/模拟登录/index.html","modified":1446099252256,"shasum":"3e633229a802439b988cebb3da7ed995d20edf34"},{"_id":"public/tags/requests/index.html","modified":1446099252283,"shasum":"d314836d5a0f294bc729437ae6e4724d858cc6ed"},{"_id":"public/tags/php/index.html","modified":1446099252308,"shasum":"f48fe164b8b89c69d1d5c23d8c5b8ea936329fe4"},{"_id":"public/tags/bool/index.html","modified":1446099252339,"shasum":"2fc63ebf32562a95430c63f2267282a914ca1049"},{"_id":"public/tags/图像处理/index.html","modified":1446099252367,"shasum":"111ff2b72ef4c112fc04bec990ffef4ac3e31b6f"},{"_id":"public/tags/opencv/index.html","modified":1446099252393,"shasum":"15411350be59c2a2c0348369337d08ad7bae3270"},{"_id":"public/tags/lbph/index.html","modified":1446099252426,"shasum":"39044163d7b04f3e02b352200cfeb9686715d234"},{"_id":"public/tags/软件安装与技巧/index.html","modified":1446099252457,"shasum":"040139063775ed5bd9cefcb02816971ab31b8cae"},{"_id":"public/tags/vs2010/index.html","modified":1446099252484,"shasum":"75c25e499aace7f583afa88f0afd5c7714ddd67a"},{"_id":"public/tags/win8/index.html","modified":1446099252510,"shasum":"93de54617eb19b7fa6fb44d4782a16276d2f274a"},{"_id":"public/tags/hexo/index.html","modified":1446099252541,"shasum":"83294549e4f0d6d96eaff2fd5a0438e6a973ea34"},{"_id":"public/tags/github/index.html","modified":1446099252566,"shasum":"9f4210039ecde7c7e0f6eb0b80481b3f8bc41c02"},{"_id":"public/tags/kali/index.html","modified":1446099252592,"shasum":"d4c91b20d36df509016f053707606697d9b85da9"},{"_id":"public/tags/css/index.html","modified":1446099252617,"shasum":"6bb631ca760ac3cee423b086b85b54df210129a9"},{"_id":"public/tags/html5/index.html","modified":1446099252649,"shasum":"11c68b6e56195fd3218d674fc7f175f0154421ca"},{"_id":"public/tags/ie/index.html","modified":1446099252675,"shasum":"fb5fc9f94d19c8e152b6559e615e59f3b5a86134"},{"_id":"public/tags/兼容性/index.html","modified":1446099252701,"shasum":"3770859c7c5e05c8b3430f7d947107554f908653"},{"_id":"public/tags/ipv6/index.html","modified":1446099252728,"shasum":"dcfe61b18d1f3f451139e88de4de2185817ecee8"},{"_id":"public/tags/digitalocean/index.html","modified":1446099252759,"shasum":"9879d175be1af6379b1da7d7c3277a6b6ef89dd0"},{"_id":"public/tags/chrome/index.html","modified":1446099252784,"shasum":"f189286048cab991df7f1a188db853ad6acfdb8b"},{"_id":"public/tags/cmcc-edu/index.html","modified":1446099252809,"shasum":"38e2dddff2b271b9c53299066cc6b44b07a1e19c"},{"_id":"public/tags/中国移动/index.html","modified":1446099252835,"shasum":"f9e5b35a67202101967b8bf7d6bc6a008737991f"},{"_id":"public/tags/扩展/index.html","modified":1446099252869,"shasum":"7625f996e0e774f2a009fbe5469f47919d8853f8"},{"_id":"public/tags/脚本/index.html","modified":1446099252898,"shasum":"759df7031fd0d53b1630c1798d0aa9eb5e1ef6c7"},{"_id":"public/tags/表单/index.html","modified":1446099252923,"shasum":"36272945ec883a89615a42f734c50ce21e6003ea"},{"_id":"public/tags/windows/index.html","modified":1446099252948,"shasum":"c411f376e3333aa8c005db843979a217c3167f3c"},{"_id":"public/tags/正则/index.html","modified":1446099252979,"shasum":"02acc1ecd4492978aceba9888e42afaf12bdcc13"},{"_id":"public/atom.xml","modified":1446099480511,"shasum":"b6daff4ad8521deb94cef2172a6411a9e9cf50c1"},{"_id":"public/sitemap.xml","modified":1446099480762,"shasum":"a2fb9764647619ec44c7087b24923e5fde75f7ae"}],"Category":[{"name":"javascript","_id":"cigbu5hkt00014si1kk8t4oze"},{"name":"服务器","_id":"cigbu5hlw000c4si1yg1fykd8"},{"name":"php","_id":"cigbu5hm1000f4si1b2gr6xi7"},{"name":"软件安装与技巧","_id":"cigbu5hm5000m4si1330zh237"},{"name":"Linux","_id":"cigbu5hma000t4si1kqc6xvyc"},{"name":"python学习笔记","_id":"cigbu5hmg00124si1ymcbo2rg"},{"name":"数据库","_id":"cigbu5hmy001p4si10oo3yleq"},{"name":"杂文","_id":"cigbu5hn4001w4si1rgsplndu"},{"name":"图像处理","_id":"cigbu5hny002s4si1kygaibjr"},{"name":"hexo","_id":"cigbu5hoj003n4si1muw6ipa8"},{"name":"前端","_id":"cigbu5hoo003s4si1f4qagzo1"},{"name":"chrome扩展","_id":"cigbu5hq2004y4si1cnazhbzc"}],"Data":[],"Page":[],"Post":[{"title":"[js]replace替换","date":"2014-11-25T14:32:00.000Z","_content":"\n今天做前端试题,用到了replace函数,来记录一下.\n(以下部分知识点来自[http://www.w3cschool.cn/jsref_replace.html](http://www.w3cschool.cn/jsref_replace.html))\n\n\n## 定义和用法\n\n\n\n\nreplace() 方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。\n\n### 语法\n\n\n\n<table class=\"dataintable \" style=\"margin-top:10px; border-collapse:collapse; border:1px solid rgb(136,136,136); width:606px; color:rgb(0,0,0); font-size:12px; background-color:rgb(249,249,249)\">\n<tbody>\n<tr>\n<th style=\"vertical-align:baseline; padding:5px 15px 5px 5px; border:1px solid rgb(136,136,136); background-color:rgb(204,204,204)\">\n参数</th>\n<th style=\"vertical-align:baseline; padding:5px 15px 5px 5px; border:1px solid rgb(136,136,136); background-color:rgb(204,204,204)\">\n描述</th>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\nregexp/substr</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n<p style=\"margin-top:0px; margin-bottom:0px; line-height:18px\">必需。规定子字符串或要替换的模式的 RegExp 对象。</p>\n<p style=\"margin-top:0px; margin-bottom:2px; line-height:18px\">请注意，如果该值是一个字符串，则将它作为要检索的直接量文本模式，而不是首先被转换为 RegExp 对象。</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\nreplacement</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n必需。一个字符串值。规定了替换文本或生成替换文本的函数。</td>\n</tr>\n</tbody>\n</table>\n\n### 返回值\n\n\n一个新的字符串，是用 _replacement_ 替换了 regexp 的第一次匹配或所有匹配之后得到的。\n\n### 说明\n\n\n字符串 stringObject 的 replace() 方法执行的是查找并替换的操作。它将在 stringObject 中查找与 regexp 相匹配的子字符串，然后用 _replacement_ 来替换这些子串。如果 regexp 具有全局标志 g，那么 replace() 方法将替换所有匹配的子串。否则，它只替换第一个匹配子串。\n\n_replacement_ 可以是字符串，也可以是函数。如果它是字符串，那么每个匹配都将由字符串替换。但是 replacement 中的 $ 字符具有特定的含义。如下表所示，它说明从模式匹配得到的字符串将用于替换。\n<table class=\"dataintable \" style=\"margin-top:10px; border-collapse:collapse; border:1px solid rgb(136,136,136); width:606px; color:rgb(0,0,0); font-size:12px; background-color:rgb(249,249,249)\">\n<tbody>\n<tr>\n<th style=\"vertical-align:baseline; padding:5px 15px 5px 5px; border:1px solid rgb(136,136,136); background-color:rgb(204,204,204)\">\n字符</th>\n<th style=\"vertical-align:baseline; padding:5px 15px 5px 5px; border:1px solid rgb(136,136,136); background-color:rgb(204,204,204)\">\n替换文本</th>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n$1、$2、...、$99</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n与 regexp 中的第 1 到第 99 个子表达式相匹配的文本。</td>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n$&</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n与 regexp 相匹配的子串。</td>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n$`</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n位于匹配子串左侧的文本。</td>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n$'</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n位于匹配子串右侧的文本。</td>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n$$</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n直接量符号。</td>\n</tr>\n</tbody>\n</table>\n\n__注意：__ECMAScript v3 规定，replace() 方法的参数 replacement 可以是函数而不是字符串。在这种情况下，每个匹配都调用该函数，它返回的字符串将作为替换文本使用。该函数的第一个参数是匹配模式的字符串。接下来的参数是与模式中的子表达式匹配的字符串，可以有 0 个或多个这样的参数。接下来的参数是一个整数，声明了匹配在 stringObject 中出现的位置。最后一个参数是\n stringObject 本身。\n\n\n\n下面给几个简单的例子来说明一下\n\nps:介绍一下正则的小知识,\\w表示匹配一个英文字符,+表示匹配数量必须大于一个,\\b就是分节符,单词中间分隔用的,连在一起就是取出前面字符串中所有的单词\n\n\n```javascript\n'my name is'.replace(/(\\w+)\\b/g,'haha  ');//输出结果为   \"haha   haha   haha  \"\n```\n\n```javascript\n'my name is'.replace(/(\\w+)\\b/g,'$1aa');//输出结果为\"myaa nameaa isaa\"\n```\n\n```javascript\n'my name is'.replace(/((\\w)(\\w+?))\\b/g,function(m,a,b,c,d,e){return b.toUpperCase()+c;});//输出结果为\"My Name Is\"\n```\n\n重点讲解一下第三个,replace返回值为函数的例子(function必须要return)\n\n当replace返回值为函数的时候\n\n如果只有一个分组的话,他的参数是funciton(match,pos,originalText),分别表示模式的匹配项,模式匹配项在字符串中的位置和原始字符串\n\n如果有多个分组的话,他的参数是funciton(match,arr1,arr2,arr3,....arrn,pos,originalText),分别表示模式的匹配项,模式匹配项,还有n个匹配的分组,最后的两个参数是在字符串中的位置和原始字符串\n\n比如下面的例子,执行的结果就是\n\n'my name is imweba '.replace(/((\\w)(\\w+?))\\b/g,function(m,a,b,c,d,e){\n\nconsole.log(m);\n\nconsole.log(a);\n\nconsole.log(b);\n\nconsole.log(c);\n\nconsole.log(d);\n\nconsole.log(e);\n\n});\n执行结果\n\n\n\nmy//模式匹配的值,因为上面匹配了整个单词,虽然分了多个组\n\nmy//第一个分组的值\n\nm//第二个分组的值\n\ny//第三个分组的值\n\n0//模式匹配在字符串中的起始位置\n\nmy name is imweba  //原始字符串\n\nname\n\nname\n\nn\n\name\n\n3\n\nmy name is imweba \n\nis\n\nis\n\ni\n\ns\n\n8\n\nmy name is imweba \n\nimweba\n\nimweba\n\ni\n\nmweba\n\n11\n\nmy name is imweba \n\n\"undefined undefined undefined undefined \"//这一行是因为function必须要有return,我没写return,所以就都是undefined\n\n\n\n\n\n\n\n\n\nok  打完收工\n\n\n\n\n\n\n","source":"_posts/[js]replace替换.md","raw":"title: '[js]replace替换'\ndate: 2014-11-25 22:32\ntags:\n- javascript\n- 正则表达式\n- 前端\n- js\ncategories:\n- javascript\n---\n\n今天做前端试题,用到了replace函数,来记录一下.\n(以下部分知识点来自[http://www.w3cschool.cn/jsref_replace.html](http://www.w3cschool.cn/jsref_replace.html))\n\n\n## 定义和用法\n\n\n\n\nreplace() 方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。\n\n### 语法\n\n\n\n<table class=\"dataintable \" style=\"margin-top:10px; border-collapse:collapse; border:1px solid rgb(136,136,136); width:606px; color:rgb(0,0,0); font-size:12px; background-color:rgb(249,249,249)\">\n<tbody>\n<tr>\n<th style=\"vertical-align:baseline; padding:5px 15px 5px 5px; border:1px solid rgb(136,136,136); background-color:rgb(204,204,204)\">\n参数</th>\n<th style=\"vertical-align:baseline; padding:5px 15px 5px 5px; border:1px solid rgb(136,136,136); background-color:rgb(204,204,204)\">\n描述</th>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\nregexp/substr</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n<p style=\"margin-top:0px; margin-bottom:0px; line-height:18px\">必需。规定子字符串或要替换的模式的 RegExp 对象。</p>\n<p style=\"margin-top:0px; margin-bottom:2px; line-height:18px\">请注意，如果该值是一个字符串，则将它作为要检索的直接量文本模式，而不是首先被转换为 RegExp 对象。</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\nreplacement</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n必需。一个字符串值。规定了替换文本或生成替换文本的函数。</td>\n</tr>\n</tbody>\n</table>\n\n### 返回值\n\n\n一个新的字符串，是用 _replacement_ 替换了 regexp 的第一次匹配或所有匹配之后得到的。\n\n### 说明\n\n\n字符串 stringObject 的 replace() 方法执行的是查找并替换的操作。它将在 stringObject 中查找与 regexp 相匹配的子字符串，然后用 _replacement_ 来替换这些子串。如果 regexp 具有全局标志 g，那么 replace() 方法将替换所有匹配的子串。否则，它只替换第一个匹配子串。\n\n_replacement_ 可以是字符串，也可以是函数。如果它是字符串，那么每个匹配都将由字符串替换。但是 replacement 中的 $ 字符具有特定的含义。如下表所示，它说明从模式匹配得到的字符串将用于替换。\n<table class=\"dataintable \" style=\"margin-top:10px; border-collapse:collapse; border:1px solid rgb(136,136,136); width:606px; color:rgb(0,0,0); font-size:12px; background-color:rgb(249,249,249)\">\n<tbody>\n<tr>\n<th style=\"vertical-align:baseline; padding:5px 15px 5px 5px; border:1px solid rgb(136,136,136); background-color:rgb(204,204,204)\">\n字符</th>\n<th style=\"vertical-align:baseline; padding:5px 15px 5px 5px; border:1px solid rgb(136,136,136); background-color:rgb(204,204,204)\">\n替换文本</th>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n$1、$2、...、$99</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n与 regexp 中的第 1 到第 99 个子表达式相匹配的文本。</td>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n$&</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n与 regexp 相匹配的子串。</td>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n$`</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n位于匹配子串左侧的文本。</td>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n$'</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n位于匹配子串右侧的文本。</td>\n</tr>\n<tr>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n$$</td>\n<td style=\"vertical-align:text-top; padding:5px 15px 5px 5px; border:1px solid rgb(170,170,170); background-color:rgb(239,239,239)\">\n直接量符号。</td>\n</tr>\n</tbody>\n</table>\n\n__注意：__ECMAScript v3 规定，replace() 方法的参数 replacement 可以是函数而不是字符串。在这种情况下，每个匹配都调用该函数，它返回的字符串将作为替换文本使用。该函数的第一个参数是匹配模式的字符串。接下来的参数是与模式中的子表达式匹配的字符串，可以有 0 个或多个这样的参数。接下来的参数是一个整数，声明了匹配在 stringObject 中出现的位置。最后一个参数是\n stringObject 本身。\n\n\n\n下面给几个简单的例子来说明一下\n\nps:介绍一下正则的小知识,\\w表示匹配一个英文字符,+表示匹配数量必须大于一个,\\b就是分节符,单词中间分隔用的,连在一起就是取出前面字符串中所有的单词\n\n\n```javascript\n'my name is'.replace(/(\\w+)\\b/g,'haha  ');//输出结果为   \"haha   haha   haha  \"\n```\n\n```javascript\n'my name is'.replace(/(\\w+)\\b/g,'$1aa');//输出结果为\"myaa nameaa isaa\"\n```\n\n```javascript\n'my name is'.replace(/((\\w)(\\w+?))\\b/g,function(m,a,b,c,d,e){return b.toUpperCase()+c;});//输出结果为\"My Name Is\"\n```\n\n重点讲解一下第三个,replace返回值为函数的例子(function必须要return)\n\n当replace返回值为函数的时候\n\n如果只有一个分组的话,他的参数是funciton(match,pos,originalText),分别表示模式的匹配项,模式匹配项在字符串中的位置和原始字符串\n\n如果有多个分组的话,他的参数是funciton(match,arr1,arr2,arr3,....arrn,pos,originalText),分别表示模式的匹配项,模式匹配项,还有n个匹配的分组,最后的两个参数是在字符串中的位置和原始字符串\n\n比如下面的例子,执行的结果就是\n\n'my name is imweba '.replace(/((\\w)(\\w+?))\\b/g,function(m,a,b,c,d,e){\n\nconsole.log(m);\n\nconsole.log(a);\n\nconsole.log(b);\n\nconsole.log(c);\n\nconsole.log(d);\n\nconsole.log(e);\n\n});\n执行结果\n\n\n\nmy//模式匹配的值,因为上面匹配了整个单词,虽然分了多个组\n\nmy//第一个分组的值\n\nm//第二个分组的值\n\ny//第三个分组的值\n\n0//模式匹配在字符串中的起始位置\n\nmy name is imweba  //原始字符串\n\nname\n\nname\n\nn\n\name\n\n3\n\nmy name is imweba \n\nis\n\nis\n\ni\n\ns\n\n8\n\nmy name is imweba \n\nimweba\n\nimweba\n\ni\n\nmweba\n\n11\n\nmy name is imweba \n\n\"undefined undefined undefined undefined \"//这一行是因为function必须要有return,我没写return,所以就都是undefined\n\n\n\n\n\n\n\n\n\nok  打完收工\n\n\n\n\n\n\n","slug":"[js]replace替换","published":1,"updated":"2015-10-29T06:08:22.495Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hkn00004si17q2tpas3"},{"title":"阿里云windows_server_2003_搭建邮件服务器","date":"2014-06-28T14:30:00.000Z","_content":"\n    笔者最近遇到一个在阿里云上搭建邮件服务器的问题，总算搞定，记录一下。\n\n     整个搭建过程，包括pop3服务的安装和开启，smtp服务的安装和开启，dns服务的安装和设置。\n    参考文章[http://hi.baidu.com/senya/item/63bd6588b6817056e63d1996](http://hi.baidu.com/senya/item/63bd6588b6817056e63d1996)\n   [http://firefish.blog.51cto.com/298258/57983](http://firefish.blog.51cto.com/298258/57983)\n\n不在赘述，直接粘贴原文\n\n\n__　　一、安装Windows Server 2003邮件服务器组件__\n\n\n\n(因为盗图的缘故,图片都挂了,这里大家都去看上面的参考文章连接吧,设置dns的时候再回来)\n\n图一　“管理您的服务器”控制台\n\n\n　　依次单击“开始”——“管理工具”——“管理您的服务器”，打开“管理您的服务器”控制台。在这个管理控制台中我们可以看到服务器已经成为的角色。单击“添加或删除角色”命令，开始管理服务器的角色。\n\n\n\n\n\n图二　配置服务器向导\n\n\n　　当我们单击“添加或删除角色”命令，就会运行配置服务器向导。\n\n\n\n\n\n图三　服务器管理程序检测网络连接\n\n\n\n\n\n图四　管理服务器角色\n\n\n　　在图四中，可以查看已经安装的服务和支持而没有安装的服务。此时的服务器还不是邮件服务器，选择“邮件服务器(POP3,SMTP)”，单击“下一步”：\n\n\n\n\n\n图五　配置“身份验证方法”及“电子邮件域名”\n\n\n\n\n\n\n\n图六　单击“下一步”\n\n\n\n\n\n图七　安装邮件服务:POP3和SMTP\n\n\n\n\n\n图八　安装成功\n\n__　　二、管理邮件服务器__\n\n\n　　Windows Server 2003的电子邮件服务器的功能很简单，管理界面也很简洁。单击“管理工具”下的“POP3服务”：\n\n\n\n\n\n图九 POP3服务\n\n\n\n图十　为用户添加邮箱\n\n\n　　在“POP3服务”中单击“添加邮箱”命令，在弹出的对话框内输入邮箱名（用户名）及密码。\n\n\n\n\n\n图十一\n\n__　　三、配置smtp__\n\n\n　　方法和上面类似，在图二的画面中我们选择应用程序服务器\n\n![]()\n\n\n\n\n如图，我的已经开启了。\n\n\n下一步，依次打开“开始-程序-管理工具-internet信息服务”，在窗口左面，鼠标右键点击“smtp虚拟服务器”属性。切换到常规选项卡”IP地址“选择服务器的ip地址，点击确定就行了。\n\n__四、配置DNS__\n\n\n\n服务器已经配置好了，我们接下来设置下dns，这样才能解析到，不然还是无法使用的\n\n\n\n依次打开，“开始-程序-管理工具-配置您的服务器向导”\n\n\n\n![]()\n\n\n\n\n选择自定义配置\n\n![]()\n\n\n\n\n选择dns服务器，下一步\n\n![]()\n\n\n\n\n\n\n\n![]()\n\n\n\n![]()\n\n\n\n![]()\n\n\n\n![]()\n\n\n\n![]()\n\n\n\n![]()\n\n\n\n\n点击正向查找域里面的区域名称，在右边的空白处点击右键，新建主机，分别新建POP3，smtp等主机\n\n![]()\n\n\n\n\n还是空白处，右键，新建邮件交换器，分别新建smtp和pop3的邮件交换器\n\n![]()\n\n\n\n![]()\n\n\n\n注意：完全合格的域名后面没有点号，邮件服务器的完全合格的域名后面有点号，例如是smtp.ip-tcp.com.\n\n到此，邮件服务器搭建完成，可以去测试了\n\n此处参考原文[http://www.docin.com/p-156566941.html](http://www.docin.com/p-156566941.html)\n\n\n\n\n\n经过我的测试，可以收邮件，但是不能发邮件（可以自己给自己发，但是不能给qq，网易等邮箱发），一直报错550 5.7.1 Unable to relay for [](mailto:xxx@xxx.com)[xxx@xxx.com](mailto:xxx@xxx.com)\n\n最后找到答案\n\n\n\n\n\n\n\n\n\n\n\n在IIS管理器里打开“默认SMTP虚拟服务器”的属性设置对话框，在“访问”选项卡中，点击“中继”按钮，弹出“中继限制”对话框，默认为选中了“仅以下列表”，修改为选中“仅以下列表除外”即可。\n\n另外下面的“允许所有通过身份验证的计算机进行中继，而忽略上表”一项要保持选中状态（默认是选中的）。\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/阿里云windows_server_2003_搭建邮件服务器.md","raw":"title: '阿里云windows_server_2003_搭建邮件服务器'\ndate: 2014-06-28 22:30\ncategories:\n- 服务器\n---\n\n    笔者最近遇到一个在阿里云上搭建邮件服务器的问题，总算搞定，记录一下。\n\n     整个搭建过程，包括pop3服务的安装和开启，smtp服务的安装和开启，dns服务的安装和设置。\n    参考文章[http://hi.baidu.com/senya/item/63bd6588b6817056e63d1996](http://hi.baidu.com/senya/item/63bd6588b6817056e63d1996)\n   [http://firefish.blog.51cto.com/298258/57983](http://firefish.blog.51cto.com/298258/57983)\n\n不在赘述，直接粘贴原文\n\n\n__　　一、安装Windows Server 2003邮件服务器组件__\n\n\n\n(因为盗图的缘故,图片都挂了,这里大家都去看上面的参考文章连接吧,设置dns的时候再回来)\n\n图一　“管理您的服务器”控制台\n\n\n　　依次单击“开始”——“管理工具”——“管理您的服务器”，打开“管理您的服务器”控制台。在这个管理控制台中我们可以看到服务器已经成为的角色。单击“添加或删除角色”命令，开始管理服务器的角色。\n\n\n\n\n\n图二　配置服务器向导\n\n\n　　当我们单击“添加或删除角色”命令，就会运行配置服务器向导。\n\n\n\n\n\n图三　服务器管理程序检测网络连接\n\n\n\n\n\n图四　管理服务器角色\n\n\n　　在图四中，可以查看已经安装的服务和支持而没有安装的服务。此时的服务器还不是邮件服务器，选择“邮件服务器(POP3,SMTP)”，单击“下一步”：\n\n\n\n\n\n图五　配置“身份验证方法”及“电子邮件域名”\n\n\n\n\n\n\n\n图六　单击“下一步”\n\n\n\n\n\n图七　安装邮件服务:POP3和SMTP\n\n\n\n\n\n图八　安装成功\n\n__　　二、管理邮件服务器__\n\n\n　　Windows Server 2003的电子邮件服务器的功能很简单，管理界面也很简洁。单击“管理工具”下的“POP3服务”：\n\n\n\n\n\n图九 POP3服务\n\n\n\n图十　为用户添加邮箱\n\n\n　　在“POP3服务”中单击“添加邮箱”命令，在弹出的对话框内输入邮箱名（用户名）及密码。\n\n\n\n\n\n图十一\n\n__　　三、配置smtp__\n\n\n　　方法和上面类似，在图二的画面中我们选择应用程序服务器\n\n![]()\n\n\n\n\n如图，我的已经开启了。\n\n\n下一步，依次打开“开始-程序-管理工具-internet信息服务”，在窗口左面，鼠标右键点击“smtp虚拟服务器”属性。切换到常规选项卡”IP地址“选择服务器的ip地址，点击确定就行了。\n\n__四、配置DNS__\n\n\n\n服务器已经配置好了，我们接下来设置下dns，这样才能解析到，不然还是无法使用的\n\n\n\n依次打开，“开始-程序-管理工具-配置您的服务器向导”\n\n\n\n![]()\n\n\n\n\n选择自定义配置\n\n![]()\n\n\n\n\n选择dns服务器，下一步\n\n![]()\n\n\n\n\n\n\n\n![]()\n\n\n\n![]()\n\n\n\n![]()\n\n\n\n![]()\n\n\n\n![]()\n\n\n\n![]()\n\n\n\n\n点击正向查找域里面的区域名称，在右边的空白处点击右键，新建主机，分别新建POP3，smtp等主机\n\n![]()\n\n\n\n\n还是空白处，右键，新建邮件交换器，分别新建smtp和pop3的邮件交换器\n\n![]()\n\n\n\n![]()\n\n\n\n注意：完全合格的域名后面没有点号，邮件服务器的完全合格的域名后面有点号，例如是smtp.ip-tcp.com.\n\n到此，邮件服务器搭建完成，可以去测试了\n\n此处参考原文[http://www.docin.com/p-156566941.html](http://www.docin.com/p-156566941.html)\n\n\n\n\n\n经过我的测试，可以收邮件，但是不能发邮件（可以自己给自己发，但是不能给qq，网易等邮箱发），一直报错550 5.7.1 Unable to relay for [](mailto:xxx@xxx.com)[xxx@xxx.com](mailto:xxx@xxx.com)\n\n最后找到答案\n\n\n\n\n\n\n\n\n\n\n\n在IIS管理器里打开“默认SMTP虚拟服务器”的属性设置对话框，在“访问”选项卡中，点击“中继”按钮，弹出“中继限制”对话框，默认为选中了“仅以下列表”，修改为选中“仅以下列表除外”即可。\n\n另外下面的“允许所有通过身份验证的计算机进行中继，而忽略上表”一项要保持选中状态（默认是选中的）。\n\n\n\n\n\n\n\n\n\n\n\n","slug":"阿里云windows_server_2003_搭建邮件服务器","published":1,"updated":"2015-09-29T11:41:23.734Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hlu000b4si1emc6438v"},{"title":"微信支付app支付3.0接口开发","date":"2015-10-25T13:30:03.000Z","_content":"最近在做微信支付,因为前段时间做了微信的公众账号支付,我以为是一个东西,结果发现不是,我真是醉了,竟然是独立的两套东西.\n<!-- more -->\n![微信支付架构图](http://ww4.sinaimg.cn/large/692869a3gw1exdqakso33j20ny0dptbi.jpg)\n整个微信支付,分为三大平台,公众平台(就是公众账号那个),开发平台(主要针对app这块),商户平台(所有微信支付的结算,最终在这里).三个平台的账号都不同,而且必须不同,不然不让你注册.\n其中,需要用户注册的是公众平台和开放平台,当你审核通过以后,就会给你分配一个对应的商户号.也就是说,你一个公司,申请一个公众号和一个开放平台账号,分别给你一个商户号,你就一共有两个商户号.这两个商户号不同,我之前就是拿着公众账号对应的商户号(客户给错了),去做app支付,一直说不对应.\n下面进入正文,看看怎么开发\n# 准备工作\n首先你需要注册[开放平台](https://open.weixin.qq.com/)账号,然后添加一个app应用(里面包含你的appid和appkey),并且进行认证,然后就会收到一封邮件,里面包含了你分到的商户号.\n\n# 1 流程图\n接下来,我们需要搞清楚微信app支付开发的流程,如下图所示.\n![微信app支付流程图](http://ww1.sinaimg.cn/large/692869a3gw1exgxrb07bfj20ou0sy453.jpg)\n其中,红色的部分是需要我们做的,具体分下来,客户端要做的事就比较少,生成预支付订单,返回签名的package这些都是服务端做的(开发客户端真爽),当然从另外一个角度来说,这些事情也确实应该放在服务器端来做,因为涉及到一些key和密钥之类的东西,放在客户端app中不安全,如果app被反编译就暴露了这些信息.\n```\n商户系统和微信支付系统主要交互说明：\n步骤1：用户在商户APP中选择商品，提交订单，选择微信支付。\n步骤2：商户后台收到用户支付单，调用微信支付统一下单接口。参见【统一下单API】。\n步骤3：统一下单接口返回正常的prepay_id，再按签名规范重新生成签名后，将数据传输给APP。参与签名的字段名为appId，partnerId，prepayId，nonceStr，timeStamp，package。注意：package的值格式为Sign=WXPay\n步骤4：商户APP调起微信支付。api参见本章节【app端开发步骤说明】\n步骤5：商户后台接收支付通知。api参见【支付结果通知API】\n步骤6：商户后台查询支付结果。，api参见【查询订单API】\n```\n服务端要做的,就是步骤1235,客户端做步骤4就行了,步骤6看自己的需求,我们没有做.\n首先,生成商户服务器订单,这个自不必说,只有生成订单,才有订单号,才能做后面的工作.\n我们重点看下步骤2和步骤3\n\n# 2  调用统一下单接口\n首先,我们需要看一下[统一下单接口](https://pay.weixin.qq.com/wiki/doc/api/app.php?chapter=9_1)文档,里面包含了请求的地址和要传的参数,顾名思义,那些必填字段是必须要填写的,这是我的请求参数列表`out_trade_no`,`body`,`total_fee`,`time_start`,`time_expire`,`spbill_create_ip`,`notify_url`,`trade_type`还有一个签名`sign`,这就是所有的请求字段.\n## 签名\n签名的思路是,把所有得除`sign`字段以外的字段,按照参数名ASCII码从小到大排序,使用URL键值对的格式（即key1=value1&key2=value2…）拼接成字符串stringA。在stringA最后拼接上key得到stringSignTemp字符串，并对stringSignTemp进行MD5运算，再将得到的字符串所有字符转换为大写，得到sign值signValue。[官方文档](https://pay.weixin.qq.com/wiki/doc/api/app.php?chapter=4_3).\n\n签名可能有点蛋疼,你可以看[这个](https://pay.weixin.qq.com/wiki/doc/api/app.php?chapter=4_3)文档.微信也提供了签名的[在线调试工具](https://pay.weixin.qq.com/wiki/tools/signverify/),你把参数填进去,看看签名拿到的值是否和你签名的结果一样.\n\n## 调用unifiedOrder\n由于统一下单接口,所有的支付方式都会调用,包括公众账号的几种支付方式,而且官方没有app支付的sdk代码,所以我们直接用公众号支付的js sdk代码.\nsdk里面已经封装好了对统一下单接口的调用,包括签名,所以我们只需要调用这个就好了.\n\n## 整理参数\n调用统一下单接口后,会返回很多数据,我们还是调用js sdk里面的处理函数,因为返回的是xml的内容,有些数据我们不要,(下面的结果是js api的,结果跟app除了trade_type不同,其他都是一样的)\n```\n<xml>\n   <return_code><![CDATA[SUCCESS]]></return_code>\n   <return_msg><![CDATA[OK]]></return_msg>\n   <appid><![CDATA[wx2421b1c4370ec43b]]></appid>\n   <mch_id><![CDATA[10000100]]></mch_id>\n   <nonce_str><![CDATA[IITRi8Iabbblz1Jc]]></nonce_str>\n   <sign><![CDATA[7921E432F65EB8ED0CE9755F0E86D72F]]></sign>\n   <result_code><![CDATA[SUCCESS]]></result_code>\n   <prepay_id><![CDATA[wx201411101639507cbf6ffd8b0779950874]]></prepay_id>\n   <trade_type><![CDATA[JSAPI]]></trade_type>\n</xml>\n```\n上面的参数中,我们需要appid(就是你配置中的那个appid),prepay_id(预支付id,之前都是为了它),partnerid(就是你配置的商户号mch_id),其他的就没啥用了,我们接下来要给客户端返回一个数据包,全部的数据如下\n```\n{\"appid\":\"wx8c965dd8b4794241\",\"noncestr\":\"oxh4g98rfgbmugwbmxfg72ay6qpvieos\",\"package\":\"Sign=WXpay\",\"partnerid\":\"1277670101\",\"prepayid\":\"wx2015102014523449175fc2fd0939076028\",\"timestamp\":\"1445323951\",\"sign\":\"7F84997FDW40F6F15DD1C28A9E313122\"}\n```\n`noncestr`是重新生成的,`package`是固定写法,里面的内容必须写`\"Sign=WXpay\"`,`timestamp`也是重新生成的,`sign`是重新签名后的结果.\n然后把数据返回给客户端就行了,客户端调起支付.\n\n# 3  支付回调\n和支付宝原理一样,不过微信返回的数据不是标准的`post`,所以你没法通过`$_POST['out_trade_no']`这样来获取数据.\n所以,我的做法还是调用js sdk里面的回调方法,把那个回调类继承了一下,我们只需要重写`NotifyProcess`函数就行了,在这里面加入自己的逻辑,比如判断订单是否存在,订单是否已经处理过之类的.\n至此,大流程已经走通了.\n# 4  优化\n在调试过程中,我发现同一个订单号不能重复的去获取预支付的prepay_id,所以,我们在整理参数那一步后,需要将返回参数存到数据库,下次申请支付的时候,先去数据库查一下,有的话,就不用给微信服务器请求了\n\n\n打完收工.\n\n# 参考文献\n1 [微信官方sdk下载](https://pay.weixin.qq.com/wiki/doc/api/app.php?chapter=11_1)\n","source":"_posts/weixin-app-pay-v3-0.md","raw":"title: 微信支付app支付3.0接口开发\ndate: 2015-10-25 21:30:03\ntags:\n- 微信支付\n- api\ncategories:\n- php\n---\n最近在做微信支付,因为前段时间做了微信的公众账号支付,我以为是一个东西,结果发现不是,我真是醉了,竟然是独立的两套东西.\n<!-- more -->\n![微信支付架构图](http://ww4.sinaimg.cn/large/692869a3gw1exdqakso33j20ny0dptbi.jpg)\n整个微信支付,分为三大平台,公众平台(就是公众账号那个),开发平台(主要针对app这块),商户平台(所有微信支付的结算,最终在这里).三个平台的账号都不同,而且必须不同,不然不让你注册.\n其中,需要用户注册的是公众平台和开放平台,当你审核通过以后,就会给你分配一个对应的商户号.也就是说,你一个公司,申请一个公众号和一个开放平台账号,分别给你一个商户号,你就一共有两个商户号.这两个商户号不同,我之前就是拿着公众账号对应的商户号(客户给错了),去做app支付,一直说不对应.\n下面进入正文,看看怎么开发\n# 准备工作\n首先你需要注册[开放平台](https://open.weixin.qq.com/)账号,然后添加一个app应用(里面包含你的appid和appkey),并且进行认证,然后就会收到一封邮件,里面包含了你分到的商户号.\n\n# 1 流程图\n接下来,我们需要搞清楚微信app支付开发的流程,如下图所示.\n![微信app支付流程图](http://ww1.sinaimg.cn/large/692869a3gw1exgxrb07bfj20ou0sy453.jpg)\n其中,红色的部分是需要我们做的,具体分下来,客户端要做的事就比较少,生成预支付订单,返回签名的package这些都是服务端做的(开发客户端真爽),当然从另外一个角度来说,这些事情也确实应该放在服务器端来做,因为涉及到一些key和密钥之类的东西,放在客户端app中不安全,如果app被反编译就暴露了这些信息.\n```\n商户系统和微信支付系统主要交互说明：\n步骤1：用户在商户APP中选择商品，提交订单，选择微信支付。\n步骤2：商户后台收到用户支付单，调用微信支付统一下单接口。参见【统一下单API】。\n步骤3：统一下单接口返回正常的prepay_id，再按签名规范重新生成签名后，将数据传输给APP。参与签名的字段名为appId，partnerId，prepayId，nonceStr，timeStamp，package。注意：package的值格式为Sign=WXPay\n步骤4：商户APP调起微信支付。api参见本章节【app端开发步骤说明】\n步骤5：商户后台接收支付通知。api参见【支付结果通知API】\n步骤6：商户后台查询支付结果。，api参见【查询订单API】\n```\n服务端要做的,就是步骤1235,客户端做步骤4就行了,步骤6看自己的需求,我们没有做.\n首先,生成商户服务器订单,这个自不必说,只有生成订单,才有订单号,才能做后面的工作.\n我们重点看下步骤2和步骤3\n\n# 2  调用统一下单接口\n首先,我们需要看一下[统一下单接口](https://pay.weixin.qq.com/wiki/doc/api/app.php?chapter=9_1)文档,里面包含了请求的地址和要传的参数,顾名思义,那些必填字段是必须要填写的,这是我的请求参数列表`out_trade_no`,`body`,`total_fee`,`time_start`,`time_expire`,`spbill_create_ip`,`notify_url`,`trade_type`还有一个签名`sign`,这就是所有的请求字段.\n## 签名\n签名的思路是,把所有得除`sign`字段以外的字段,按照参数名ASCII码从小到大排序,使用URL键值对的格式（即key1=value1&key2=value2…）拼接成字符串stringA。在stringA最后拼接上key得到stringSignTemp字符串，并对stringSignTemp进行MD5运算，再将得到的字符串所有字符转换为大写，得到sign值signValue。[官方文档](https://pay.weixin.qq.com/wiki/doc/api/app.php?chapter=4_3).\n\n签名可能有点蛋疼,你可以看[这个](https://pay.weixin.qq.com/wiki/doc/api/app.php?chapter=4_3)文档.微信也提供了签名的[在线调试工具](https://pay.weixin.qq.com/wiki/tools/signverify/),你把参数填进去,看看签名拿到的值是否和你签名的结果一样.\n\n## 调用unifiedOrder\n由于统一下单接口,所有的支付方式都会调用,包括公众账号的几种支付方式,而且官方没有app支付的sdk代码,所以我们直接用公众号支付的js sdk代码.\nsdk里面已经封装好了对统一下单接口的调用,包括签名,所以我们只需要调用这个就好了.\n\n## 整理参数\n调用统一下单接口后,会返回很多数据,我们还是调用js sdk里面的处理函数,因为返回的是xml的内容,有些数据我们不要,(下面的结果是js api的,结果跟app除了trade_type不同,其他都是一样的)\n```\n<xml>\n   <return_code><![CDATA[SUCCESS]]></return_code>\n   <return_msg><![CDATA[OK]]></return_msg>\n   <appid><![CDATA[wx2421b1c4370ec43b]]></appid>\n   <mch_id><![CDATA[10000100]]></mch_id>\n   <nonce_str><![CDATA[IITRi8Iabbblz1Jc]]></nonce_str>\n   <sign><![CDATA[7921E432F65EB8ED0CE9755F0E86D72F]]></sign>\n   <result_code><![CDATA[SUCCESS]]></result_code>\n   <prepay_id><![CDATA[wx201411101639507cbf6ffd8b0779950874]]></prepay_id>\n   <trade_type><![CDATA[JSAPI]]></trade_type>\n</xml>\n```\n上面的参数中,我们需要appid(就是你配置中的那个appid),prepay_id(预支付id,之前都是为了它),partnerid(就是你配置的商户号mch_id),其他的就没啥用了,我们接下来要给客户端返回一个数据包,全部的数据如下\n```\n{\"appid\":\"wx8c965dd8b4794241\",\"noncestr\":\"oxh4g98rfgbmugwbmxfg72ay6qpvieos\",\"package\":\"Sign=WXpay\",\"partnerid\":\"1277670101\",\"prepayid\":\"wx2015102014523449175fc2fd0939076028\",\"timestamp\":\"1445323951\",\"sign\":\"7F84997FDW40F6F15DD1C28A9E313122\"}\n```\n`noncestr`是重新生成的,`package`是固定写法,里面的内容必须写`\"Sign=WXpay\"`,`timestamp`也是重新生成的,`sign`是重新签名后的结果.\n然后把数据返回给客户端就行了,客户端调起支付.\n\n# 3  支付回调\n和支付宝原理一样,不过微信返回的数据不是标准的`post`,所以你没法通过`$_POST['out_trade_no']`这样来获取数据.\n所以,我的做法还是调用js sdk里面的回调方法,把那个回调类继承了一下,我们只需要重写`NotifyProcess`函数就行了,在这里面加入自己的逻辑,比如判断订单是否存在,订单是否已经处理过之类的.\n至此,大流程已经走通了.\n# 4  优化\n在调试过程中,我发现同一个订单号不能重复的去获取预支付的prepay_id,所以,我们在整理参数那一步后,需要将返回参数存到数据库,下次申请支付的时候,先去数据库查一下,有的话,就不用给微信服务器请求了\n\n\n打完收工.\n\n# 参考文献\n1 [微信官方sdk下载](https://pay.weixin.qq.com/wiki/doc/api/app.php?chapter=11_1)\n","slug":"weixin-app-pay-v3-0","published":1,"updated":"2015-10-29T06:12:58.325Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hlz000e4si17hpqm1gd"},{"title":"wamp与sql_server_因为端口80冲突,无法开启wamp","date":"2014-11-14T10:09:00.000Z","_content":"\n因为80端口占用,导致无法启动,其实不必关闭sql server太多的东西,只需要关闭SQL Server Reporting Services 就行了,这样也不会影响sql server的使用\n\n如图\n![](http://img.blog.csdn.net/20141114175909339?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n\n\n打开sqlserver 配置管理器,关闭以上服务\n\n或者打开控制面板->管理->服务工具->SQL Server Reporting Services\n\n然后就可以打开wamp了\n","source":"_posts/wamp与sql_server_因为端口80冲突,无法开启wamp.md","raw":"title: 'wamp与sql_server_因为端口80冲突,无法开启wamp'\ndate: 2014-11-14 18:09\ntags:\n- sql server\n- wamp\ncategories:\n- 软件安装与技巧\n---\n\n因为80端口占用,导致无法启动,其实不必关闭sql server太多的东西,只需要关闭SQL Server Reporting Services 就行了,这样也不会影响sql server的使用\n\n如图\n![](http://img.blog.csdn.net/20141114175909339?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n\n\n打开sqlserver 配置管理器,关闭以上服务\n\n或者打开控制面板->管理->服务工具->SQL Server Reporting Services\n\n然后就可以打开wamp了\n","slug":"wamp与sql_server_因为端口80冲突,无法开启wamp","published":1,"updated":"2015-09-29T11:41:23.733Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hm4000l4si16myuk8gy"},{"title":"shadowsocks的安装和配置--在ubuntu和ubuntu中","date":"2015-03-09T14:26:21.000Z","_content":"最近我的vpn一直在抽风，几乎没法正常使用，而且我的chrome也是各种花屏，我快疯了，没办法，只能改用shadowsocks了。\n搭建过程分为两部分:服务端和客户端(这里是主要是ubuntu的客户端)。\n<!-- more -->\n# 1 系统环境\n**服务器**:DigitalOcean上的Ubuntu 14.04 LTS\n**客户端**:Ubuntu 14.04 LTS\n\n# 2 服务器端安装和配置\n这里主要是参考github的[官方说明](https://github.com/shadowsocks/shadowsocks/wiki/Shadowsocks-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E)\n通过ssh登陆的服务器上去,这里不在赘述如何登陆.\n以下主要针对linux服务器,windows服务器查看[这里](https://github.com/shadowsocks/shadowsocks/wiki/Install-Shadowsocks-Server-on-Windows)\n## 安装\nLinux不同的发行版本执行的命令如下\n```\nDebian / Ubuntu:\n\napt-get install python-pip\npip install shadowsocks\n\nCentOS:\n\nyum install python-setuptools && easy_install pip\npip install shadowsocks\n```\n\n## 配置\n```\nsudo vi /etc/shadowsocks.json\n```\n配置文件的内容大致如下:\n```\n{\n    \"server\":\"你的服务器的ip\",\n    \"server_port\":8388,\n    \"local_address\": \"127.0.0.1\",\n    \"local_port\":1080,\n    \"password\":\"你设置的密码\",\n    \"timeout\":300,\n    \"method\":\"aes-256-cfb\",\n    \"fast_open\": false\n}\n```\n**参数名称       解释**\nserver         安装shadowsocks服务器ip\nserver_port    服务器端口号\nlocal_address  本地服务器默认是127.0.0.1\nlocal_port     本地监听的端口号\npassword       密码\ntimeout        超时时间,单位是秒\nmethod         加密方法默认是: \"aes-256-cfb\"可以用其他加密方法\nfast_open      是否使用TCP_FASTOPEN,默认为不使用\nworkers        number of workers, available on Unix/Linux\n\n## 运行\n前台运行的命令\n`ssserver -c /etc/shadowsocks.json`\n后台运行\n`ssserver -c /etc/shadowsocks.json -d start`\n`ssserver -c /etc/shadowsocks.json -d stop`\nps:我上述两条命令都会出错,这两条命令来自官方的github,我用的是下面的\n`nohup ssserver -c /etc/shadowsocks.json > aa.log`\n\n## 开机自启\n我们把它写入/etc/rc.local中就可以完成开机自启动了.\n```\nsudo vi /etc/rc.local  # 打开rc.local文件\n# 然后在exit前面加入下面这一行\n# nohup /usr/local/bin/ssserver -c /etc/shadowsocks.json > aa.log\n```\nps:这里我之前犯了一个错误,没有写`ssserver`的绝对路径,导致开机无法自启动,但是手动执行的话,又是可以执行的\n# 3 客户端的安装和配置\n客户端按理说和服务器端类似,安装shadowsocks,但是我的就是这个出了问题.\n## 1) 安装相关软件\nshadowsocks有各种客户端版本,各个系统都有.在ubuntu下带图形化界面的有shadowsocks-qt5,还可以直接用命令行.\n\n**图形化:**\n```\nsudo add-apt-repository ppa:hzwhuang/ss-qt5\nsudo apt-get update\nsudo apt-get install shadowsocks-qt5\n```\n*PS:*我的电脑安装这个以后,会自动卸载我的chrome\n*PPS:*我刚才又试了一次,我在安装了命令行模式的shadowsocks以后,现在不会卸载我的chrome,总算正常了\n```\nThe following extra packages will be installed:\n  libbotan-1.10-0 libqrencode3 libqtshadowsocks libzbar0\nThe following packages will be REMOVED:\n  libbotan-1.10-0:i386 libqtshadowsocks:i386 libzbar0:i386\nThe following NEW packages will be installed:\n  libbotan-1.10-0 libqrencode3 libqtshadowsocks libzbar0 shadowsocks-qt5\n0 upgraded, 5 newly installed, 3 to remove and 19 not upgraded.\nNeed to get 1,280 kB of archives.\nAfter this operation, 662 kB of additional disk space will be used.\nDo you want to continue? [Y/n] \n```\n\n**命令行模式:**\n```\nsudo apt-get install python-pip python-dev build-essential \nsudo pip install  pip\nsudo apt-get install python-m2crypto\nsudo pip install shadowsocks\n```\n我因为之前在环境中就安装过pip,所以我只需要执行倒数第三个和第四个命令.\n但是我的倒数第四个命令`pip install shadowsocks`一直报错:\n```\nException: Traceback (most recent call last):\nFile \"/usr/lib/python2.7/dist-packages/pip/basecommand.py\", line 122, in main\n  status = self.run(options, args)\nFile \"/usr/lib/python2.7/dist-packages/pip/commands/install.py\", line 278, in run\n  requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle) \nFile \"/usr/lib/python2.7/dist-packages/pip/req.py\", line 1177, in prepare_files \n  url = finder.find_requirement(req_to_install, upgrade=self.upgrade) \nFile \"/usr/lib/python2.7/dist-packages/pip/index.py\", line 256, in find_requirement\n  page_versions.extend(self._package_versions(page.links, req.name.lower())) \nFile \"/usr/lib/python2.7/dist-packages/pip/index.py\", line 432, in _package_versions \n  for link in self._sort_links(links): \nFile \"/usr/lib/python2.7/dist-packages/pip/index.py\", line 422, in _sort_links \n  for link in links: \nFile \"/usr/lib/python2.7/dist-packages/pip/index.py\", line 769, in links \n  for anchor in self.parsed.findall(\".//a\"):\nAttributeError: 'Document' object has no attribute 'findall'\n\nStoring debug log for failure in /root/.pip/pip.log\n```\n网上搜索一番,在[这里](https://github.com/pypa/pip/issues/1742)找到答案.\n解决方法很简单,执行`easy_install pip`,就ok(貌似是把pip重新安装了一次).\n\n## 2) 客户端运行\nshadowsocks图形化的比较简单,这里不表.\n命令行模式,启动如下:\n```\nsslocal -s 服务器ip -p 8388 -k 密码\n```\n启动成功后会有如下输出:\n```\n2015-03-10 11:12:59 INFO     loading libcrypto from libcrypto.so.1.0.0\n2015-03-10 11:12:59 INFO     starting local at 127.0.0.1:1080\n```\n\n## 3) 浏览器代理设置\n一般来说我们不希望shadowsocks做全局的翻墙,那样,访问国内的速度也会变慢,我们在chome浏览器中安装switchysharp,来管理代理.具体设置如下所示:\n![swichysharp设置](http://ww3.sinaimg.cn/large/692869a3gw1eq0k16t5ejj20ne0ihmzh.jpg)\n\n\nenjoy it!\n\n# 后记\n\n安卓客户端安装,[点我点我](https://apps.evozi.com/apk-downloader/?id=com.github.shadowsocks)\n\n# 参考文献\n1 这是一篇好博客 <http://mushapi.com/shadowsocks-install-config-using.html>\n2 [shadowsocks使用说明](https://github.com/shadowsocks/shadowsocks/wiki/Shadowsocks-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E)\n3 [修复我pip问题的一个issue](https://github.com/pypa/pip/issues/1742)\n\n# 致谢\n这个网站可以下载google play的apk,对于我等天朝良民来说,可真是个好东西\n<https://apps.evozi.com/apk-downloader/?id=com.github.shadowsocks>\n\n我们家[笨笨的博客](http://huirong.github.io)弄好了,欢迎访问\n","source":"_posts/use-ss.md","raw":"title: shadowsocks的安装和配置--在ubuntu和ubuntu中\ndate: 2015-03-09 22:26:21\ntags:\n- Linux\n- ubuntu\n- shadowsocks\n\ncategories:\n- Linux\n---\n最近我的vpn一直在抽风，几乎没法正常使用，而且我的chrome也是各种花屏，我快疯了，没办法，只能改用shadowsocks了。\n搭建过程分为两部分:服务端和客户端(这里是主要是ubuntu的客户端)。\n<!-- more -->\n# 1 系统环境\n**服务器**:DigitalOcean上的Ubuntu 14.04 LTS\n**客户端**:Ubuntu 14.04 LTS\n\n# 2 服务器端安装和配置\n这里主要是参考github的[官方说明](https://github.com/shadowsocks/shadowsocks/wiki/Shadowsocks-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E)\n通过ssh登陆的服务器上去,这里不在赘述如何登陆.\n以下主要针对linux服务器,windows服务器查看[这里](https://github.com/shadowsocks/shadowsocks/wiki/Install-Shadowsocks-Server-on-Windows)\n## 安装\nLinux不同的发行版本执行的命令如下\n```\nDebian / Ubuntu:\n\napt-get install python-pip\npip install shadowsocks\n\nCentOS:\n\nyum install python-setuptools && easy_install pip\npip install shadowsocks\n```\n\n## 配置\n```\nsudo vi /etc/shadowsocks.json\n```\n配置文件的内容大致如下:\n```\n{\n    \"server\":\"你的服务器的ip\",\n    \"server_port\":8388,\n    \"local_address\": \"127.0.0.1\",\n    \"local_port\":1080,\n    \"password\":\"你设置的密码\",\n    \"timeout\":300,\n    \"method\":\"aes-256-cfb\",\n    \"fast_open\": false\n}\n```\n**参数名称       解释**\nserver         安装shadowsocks服务器ip\nserver_port    服务器端口号\nlocal_address  本地服务器默认是127.0.0.1\nlocal_port     本地监听的端口号\npassword       密码\ntimeout        超时时间,单位是秒\nmethod         加密方法默认是: \"aes-256-cfb\"可以用其他加密方法\nfast_open      是否使用TCP_FASTOPEN,默认为不使用\nworkers        number of workers, available on Unix/Linux\n\n## 运行\n前台运行的命令\n`ssserver -c /etc/shadowsocks.json`\n后台运行\n`ssserver -c /etc/shadowsocks.json -d start`\n`ssserver -c /etc/shadowsocks.json -d stop`\nps:我上述两条命令都会出错,这两条命令来自官方的github,我用的是下面的\n`nohup ssserver -c /etc/shadowsocks.json > aa.log`\n\n## 开机自启\n我们把它写入/etc/rc.local中就可以完成开机自启动了.\n```\nsudo vi /etc/rc.local  # 打开rc.local文件\n# 然后在exit前面加入下面这一行\n# nohup /usr/local/bin/ssserver -c /etc/shadowsocks.json > aa.log\n```\nps:这里我之前犯了一个错误,没有写`ssserver`的绝对路径,导致开机无法自启动,但是手动执行的话,又是可以执行的\n# 3 客户端的安装和配置\n客户端按理说和服务器端类似,安装shadowsocks,但是我的就是这个出了问题.\n## 1) 安装相关软件\nshadowsocks有各种客户端版本,各个系统都有.在ubuntu下带图形化界面的有shadowsocks-qt5,还可以直接用命令行.\n\n**图形化:**\n```\nsudo add-apt-repository ppa:hzwhuang/ss-qt5\nsudo apt-get update\nsudo apt-get install shadowsocks-qt5\n```\n*PS:*我的电脑安装这个以后,会自动卸载我的chrome\n*PPS:*我刚才又试了一次,我在安装了命令行模式的shadowsocks以后,现在不会卸载我的chrome,总算正常了\n```\nThe following extra packages will be installed:\n  libbotan-1.10-0 libqrencode3 libqtshadowsocks libzbar0\nThe following packages will be REMOVED:\n  libbotan-1.10-0:i386 libqtshadowsocks:i386 libzbar0:i386\nThe following NEW packages will be installed:\n  libbotan-1.10-0 libqrencode3 libqtshadowsocks libzbar0 shadowsocks-qt5\n0 upgraded, 5 newly installed, 3 to remove and 19 not upgraded.\nNeed to get 1,280 kB of archives.\nAfter this operation, 662 kB of additional disk space will be used.\nDo you want to continue? [Y/n] \n```\n\n**命令行模式:**\n```\nsudo apt-get install python-pip python-dev build-essential \nsudo pip install  pip\nsudo apt-get install python-m2crypto\nsudo pip install shadowsocks\n```\n我因为之前在环境中就安装过pip,所以我只需要执行倒数第三个和第四个命令.\n但是我的倒数第四个命令`pip install shadowsocks`一直报错:\n```\nException: Traceback (most recent call last):\nFile \"/usr/lib/python2.7/dist-packages/pip/basecommand.py\", line 122, in main\n  status = self.run(options, args)\nFile \"/usr/lib/python2.7/dist-packages/pip/commands/install.py\", line 278, in run\n  requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle) \nFile \"/usr/lib/python2.7/dist-packages/pip/req.py\", line 1177, in prepare_files \n  url = finder.find_requirement(req_to_install, upgrade=self.upgrade) \nFile \"/usr/lib/python2.7/dist-packages/pip/index.py\", line 256, in find_requirement\n  page_versions.extend(self._package_versions(page.links, req.name.lower())) \nFile \"/usr/lib/python2.7/dist-packages/pip/index.py\", line 432, in _package_versions \n  for link in self._sort_links(links): \nFile \"/usr/lib/python2.7/dist-packages/pip/index.py\", line 422, in _sort_links \n  for link in links: \nFile \"/usr/lib/python2.7/dist-packages/pip/index.py\", line 769, in links \n  for anchor in self.parsed.findall(\".//a\"):\nAttributeError: 'Document' object has no attribute 'findall'\n\nStoring debug log for failure in /root/.pip/pip.log\n```\n网上搜索一番,在[这里](https://github.com/pypa/pip/issues/1742)找到答案.\n解决方法很简单,执行`easy_install pip`,就ok(貌似是把pip重新安装了一次).\n\n## 2) 客户端运行\nshadowsocks图形化的比较简单,这里不表.\n命令行模式,启动如下:\n```\nsslocal -s 服务器ip -p 8388 -k 密码\n```\n启动成功后会有如下输出:\n```\n2015-03-10 11:12:59 INFO     loading libcrypto from libcrypto.so.1.0.0\n2015-03-10 11:12:59 INFO     starting local at 127.0.0.1:1080\n```\n\n## 3) 浏览器代理设置\n一般来说我们不希望shadowsocks做全局的翻墙,那样,访问国内的速度也会变慢,我们在chome浏览器中安装switchysharp,来管理代理.具体设置如下所示:\n![swichysharp设置](http://ww3.sinaimg.cn/large/692869a3gw1eq0k16t5ejj20ne0ihmzh.jpg)\n\n\nenjoy it!\n\n# 后记\n\n安卓客户端安装,[点我点我](https://apps.evozi.com/apk-downloader/?id=com.github.shadowsocks)\n\n# 参考文献\n1 这是一篇好博客 <http://mushapi.com/shadowsocks-install-config-using.html>\n2 [shadowsocks使用说明](https://github.com/shadowsocks/shadowsocks/wiki/Shadowsocks-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E)\n3 [修复我pip问题的一个issue](https://github.com/pypa/pip/issues/1742)\n\n# 致谢\n这个网站可以下载google play的apk,对于我等天朝良民来说,可真是个好东西\n<https://apps.evozi.com/apk-downloader/?id=com.github.shadowsocks>\n\n我们家[笨笨的博客](http://huirong.github.io)弄好了,欢迎访问\n","slug":"use-ss","published":1,"updated":"2015-10-29T06:08:42.816Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hm9000s4si1z421go6p"},{"title":"ubuntu下使用scrapy抓取cnblogs","date":"2015-04-26T08:52:28.000Z","_content":"今天在伯乐在线上看到一篇翻译的博客，讲的是使用scrapy来抓取stackoverflow上的问题，刚好好久没用这个，于是一并捡起来玩一下。\n<!-- more -->\n# 软件安装\n我的环境是：ubuntu 14.04 lts\n需要安装相关软件\n## scrapy\n```\npip install Scrapy\n```\n## PyMongo\n```\npip install pymongo\n\n```\n## Mongodb\n上面安装的是python使用Mongodb的接口，很显然，我们要安装Mongodb才能使用\n```\nsudo apt-get install mongodb-server\n```\n至此，要使用的软件都已经安装完毕\n# 使用scrapy新建工程\n使用scrapy新建工程很简单，如下所示，我们新建一个stack的项目，他会在你的当前目录新建一个stack文件夹\n```\nscrapy startproject stack\n```\n并且会建成如下所示的目录树结构\n```\nchen@chen-P31:~$ tree stack\nstack\n├── stack\n│   ├── __init__.py\n│   ├── items.py\n│   ├── pipelines.py\n│   ├── settings.py\n│   └── spiders\n│       └── __init__.py\n└── scrapy.cfg\n```\n接下来，我们修改items.py的内容，这个文件用于定义存储“容器”，用来存储将要抓取的数据。\n```python\nfrom scrapy.item import Item,Field\n\nclass StackItem(Item):\n    # define the fields for your item here like:\n    # name = scrapy.Field()\n    title = Field()# 我们添加两个字段，我们等会儿会抓取一个标题和url两个字段\n    url = Field()\n```\n接着，还有一个很重要的东西，对，就是我们的蜘蛛，我们在spider目录下，新建一个stack_spider.py文件。顾名思义，这就是我们的蜘蛛。我们需要定义我们爬虫的起点，爬虫的规则等等\n```python\nfrom scrapy import Spider\nfrom stack.items import StackItem  # 导入我们上面定义的容器类\nclass StackSpider(Spider):\n    name = 'stack'   # 定义我们爬虫的名字\n    allowed_domains = [\"cnblogs.com\"]   # 规定爬虫爬取的域名\n    start_urls = ['http://www.cnblogs.com/geqianst/p/',]   # 爬虫工作的起点\n\n    def parse(self, response):# 爬虫用来做数据解析的\n        questions = response.xpath('//div[@id=\"myposts\"]//a[@id]')\n        # xpath选择器，这里的含义是取所有id为myposts的div，在它下面找所有带id的超链接a\n        # 实际结果是这样的\n        # [<Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_0\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_1\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_2\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_3\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_4\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_5\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_6\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_7\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_8\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_9\" hr'>]\n        #\n\n        for question in questions:\n            item = StackItem()\n            item['title'] = question.xpath(\n                'text()').extract()[0]\n            item['url'] = question.xpath(\n                '@href').extract()[0]\n            print item\n            yield item\n```\n# 测试\nok，上述工作基本完成，我们来测试一下\n```bash\nscrapy crawl stack\n```\n还可以这样测试一下，使用shell命令\n![用shell测试xpath](http://ww4.sinaimg.cn/large/692869a3gw1erjvd7qeqdj213z0j9h2h.jpg)\n妈蛋，我的竟然出错了，输出如下\n```\nchen@chen-P31:~/stack$ scrapy crawl stack\n2015-04-26 16:49:11+0800 [scrapy] INFO: Scrapy 0.24.6 started (bot: stack)\n2015-04-26 16:49:11+0800 [scrapy] INFO: Optional features available: ssl, http11\n2015-04-26 16:49:11+0800 [scrapy] INFO: Overridden settings: {'NEWSPIDER_MODULE': 'stack.spiders', 'SPIDER_MODULES': ['stack.spiders'], 'BOT_NAME': 'stack'}\nTraceback (most recent call last):\n  File \"/usr/local/bin/scrapy\", line 11, in <module>\n    sys.exit(execute())\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 143, in execute\n    _run_print_help(parser, _run_command, cmd, args, opts)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 89, in _run_print_help\n    func(*a, **kw)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 150, in _run_command\n    cmd.run(args, opts)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/commands/crawl.py\", line 60, in run\n    self.crawler_process.start()\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 92, in start\n    if self.start_crawling():\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 124, in start_crawling\n    return self._start_crawler() is not None\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 139, in _start_crawler\n    crawler.configure()\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 46, in configure\n    self.extensions = ExtensionManager.from_crawler(self)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/middleware.py\", line 50, in from_crawler\n    return cls.from_settings(crawler.settings, crawler)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/middleware.py\", line 29, in from_settings\n    mwcls = load_object(clspath)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/utils/misc.py\", line 42, in load_object\n    raise ImportError(\"Error loading object '%s': %s\" % (path, e))\nImportError: Error loading object 'scrapy.telnet.TelnetConsole': No module named conch\n```\n这是什么gui？\n还好我有stackoverflow，google一番，找到解决办法（其实这不是最后的解决办法，请往后看）\n网上说是twisted的问题，重新安装一下就好了，ok，走起\n```\nchen@chen-P31:~/stack$ sudo apt-get install twisted\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nE: Unable to locate package twisted\nchen@chen-P31:~/stack$ sudo apt-get install twisted.conch\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nNote, selecting 'python-twisted-conch' for regex 'twisted.conch'\nNote, selecting 'python2.7-twisted-conch' for regex 'twisted.conch'\nNote, selecting 'python-twisted-conch' instead of 'python2.7-twisted-conch'\nThe following packages were automatically installed and are no longer required:\n  cli-common dockmanager freepats gstreamer1.0-plugins-bad-faad\n  gstreamer1.0-plugins-bad-videoparsers libbotan-1.10-0:i386 libcdaudio1\n  libdbus-glib2.0-cil libdbus2.0-cil libdbusmenu-glib4:i386\n  libdbusmenu-gtk4:i386 libegl1-mesa:i386 libegl1-mesa-drivers:i386 libflite1\n  libfluidsynth1 libgbm1:i386 libgconf2.0-cil libgdiplus libgif4\n  libgles2-mesa:i386 libglib2.0-cil libgme0 libgmp10:i386\n  libgnome-desktop-2-17 libgnome-keyring1.0-cil libgnomedesktop2.20-cil\n  libgstreamer-plugins-bad0.10-0 libgstreamer-plugins-bad1.0-0 libgtk2.0-cil\n  libicu52:i386 libmimic0 libmms0 libmono-addins0.2-cil libmono-cairo4.0-cil\n  libmono-corlib4.0-cil libmono-corlib4.5-cil libmono-data-tds4.0-cil\n  libmono-i18n-west4.0-cil libmono-i18n4.0-cil libmono-posix4.0-cil\n  libmono-security4.0-cil libmono-sharpzip4.84-cil libmono-sqlite4.0-cil\n  libmono-system-configuration4.0-cil libmono-system-core4.0-cil\n  libmono-system-data4.0-cil libmono-system-drawing4.0-cil\n  libmono-system-enterpriseservices4.0-cil\n  libmono-system-runtime-serialization-formatters-soap4.0-cil\n  libmono-system-security4.0-cil libmono-system-transactions4.0-cil\n  libmono-system-web-applicationservices4.0-cil\n  libmono-system-web-services4.0-cil libmono-system-web4.0-cil\n  libmono-system-xml-linq4.0-cil libmono-system-xml4.0-cil\n  libmono-system4.0-cil libmono-web4.0-cil libmpg123-0 libnotify0.4-cil\n  libofa0 libopenal-data libopenal1 libopenvg1-mesa:i386 libqrencode3:i386\n  libqt5core5a:i386 libqt5dbus5:i386 libqt5gui5:i386 libqt5network5:i386\n  libqt5widgets5:i386 libqtshadowsocks:i386 librsvg2-2.18-cil libslv2-9\n  libsoundtouch0 libspandsp2 libsrtp0 libssl1.0.0:i386 libv4l-0:i386\n  libv4lconvert0:i386 libvo-aacenc0 libvo-amrwbenc0 libwayland-client0:i386\n  libwayland-egl1-mesa:i386 libwayland-server0:i386 libwildmidi-config\n  libwildmidi1 libwnck2.20-cil libxcb-icccm4:i386 libxcb-image0:i386\n  libxcb-keysyms1:i386 libxcb-randr0:i386 libxcb-render-util0:i386\n  libxcb-shape0:i386 libxcb-util0:i386 libxcb-xfixes0:i386 libxcb-xkb1:i386\n  libxkbcommon-x11-0:i386 libxkbcommon0:i386 libzbar0:i386 mono-4.0-gac\n  mono-gac mono-runtime mono-runtime-common mono-runtime-sgen python-mpd\n  python-mutagen python-twisted-names\nUse 'apt-get autoremove' to remove them.\nThe following extra packages will be installed:\n  python-pyasn1\nThe following NEW packages will be installed:\n  python-pyasn1 python-twisted-conch\n0 upgraded, 2 newly installed, 0 to remove and 6 not upgraded.\nNeed to get 286 kB of archives.\nAfter this operation, 1,793 kB of additional disk space will be used.\nDo you want to continue? [Y/n] \nGet:1 http://mirrors.ustc.edu.cn/ubuntu/ trusty/main python-pyasn1 all 0.1.7-1ubuntu2 [44.2 kB]\nGet:2 http://mirrors.ustc.edu.cn/ubuntu/ trusty/main python-twisted-conch all 1:13.2.0-1ubuntu1 [242 kB]\nFetched 286 kB in 0s (1,595 kB/s)         \nSelecting previously unselected package python-pyasn1.\n(Reading database ... 359746 files and directories currently installed.)\nPreparing to unpack .../python-pyasn1_0.1.7-1ubuntu2_all.deb ...\nUnpacking python-pyasn1 (0.1.7-1ubuntu2) ...\nSelecting previously unselected package python-twisted-conch.\nPreparing to unpack .../python-twisted-conch_1%3a13.2.0-1ubuntu1_all.deb ...\nUnpacking python-twisted-conch (1:13.2.0-1ubuntu1) ...\nProcessing triggers for doc-base (0.10.5) ...\nProcessing 1 added doc-base file...\nProcessing triggers for man-db (2.6.7.1-1ubuntu1) ...\nSetting up python-pyasn1 (0.1.7-1ubuntu2) ...\nSetting up python-twisted-conch (1:13.2.0-1ubuntu1) ...\n```\n安装总算完成，再试一次，妈蛋，又来一个新错误，这是什么gui？？？\n```bash\nchen@chen-P31:~/stack$ scrapy crawl stack\n2015-04-26 16:50:44+0800 [scrapy] INFO: Scrapy 0.24.6 started (bot: stack)\n2015-04-26 16:50:44+0800 [scrapy] INFO: Optional features available: ssl, http11\n2015-04-26 16:50:44+0800 [scrapy] INFO: Overridden settings: {'NEWSPIDER_MODULE': 'stack.spiders', 'SPIDER_MODULES': ['stack.spiders'], 'BOT_NAME': 'stack'}\nTraceback (most recent call last):\n  File \"/usr/local/bin/scrapy\", line 11, in <module>\n    sys.exit(execute())\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 143, in execute\n    _run_print_help(parser, _run_command, cmd, args, opts)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 89, in _run_print_help\n    func(*a, **kw)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 150, in _run_command\n    cmd.run(args, opts)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/commands/crawl.py\", line 60, in run\n    self.crawler_process.start()\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 92, in start\n    if self.start_crawling():\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 124, in start_crawling\n    return self._start_crawler() is not None\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 139, in _start_crawler\n    crawler.configure()\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 46, in configure\n    self.extensions = ExtensionManager.from_crawler(self)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/middleware.py\", line 50, in from_crawler\n    return cls.from_settings(crawler.settings, crawler)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/middleware.py\", line 29, in from_settings\n    mwcls = load_object(clspath)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/utils/misc.py\", line 42, in load_object\n    raise ImportError(\"Error loading object '%s': %s\" % (path, e))\nImportError: Error loading object 'scrapy.contrib.memusage.MemoryUsage': No module named mail.smtp\n```\n最后的最后，我在我们万能的github上找到[答案](https://github.com/scrapy/scrapy/issues/958)，原来是我们没有安装python-twisted，安装一下，世界都美好了\n```\nsudo apt-get install python-twisted\n```\n## 输出到文件\n为了更直观的看到结果，我们将结果输出到一个json文件\n```\nscrapy crawl stack -o items.json -t json\n```\n噢耶，第一个爬虫成功\n# 存储到mongodb\n接下来，我们做最后一件事，我们将结果存储到mongodb的数据库中\n在这里，我遇到一个大坑，无论是伯乐在线翻译的博客\n还是网上搜索到的一般教程，都是使用pymongo.Connection来连接数据库，可是妈蛋，你使用`pip install pymongo`安装的版本都是最新版本3.0.1，那个Connection的写法已经不支持，被丢弃了，擦。\n我们来看一下版本，我学到一个新命令`pip show pymongo`，用来查看某一个包的版本的。\n![查看pymongo版本](http://ww4.sinaimg.cn/large/692869a3gw1erjct36jnrj20df038dgf.jpg)\n在pymongo 3.0的版本中，已经不再支持pymongo.Connection，而是使用pymongo.MongoClient来替代。\n## 第一步\n创建一个用来保存我们抓取数据的数据库。打开`settings.py`,指定管道，然后加入数据库的相关设置\n```python\n\nBOT_NAME = 'stack'\n\nSPIDER_MODULES = ['stack.spiders']\nNEWSPIDER_MODULE = 'stack.spiders'\n\n# Crawl responsibly by identifying yourself (and your website) on the user-agent\n# USER_AGENT = 'stack (+http://www.yourdomain.com)'\n\nITEM_PIPELINES = ['stack.pipelines.MongoDBPipeline', ]\n# 关于mongodb的相关设置，包括服务器的ip，端口号，数据库名，表名，\n# 我也是第一次使用mongodb竟然不需要用户验证信息，而且这表名确实奇怪，叫做MONGODB_COLLECTION\nMONGODB_SERVER = \"localhost\"\nMONGODB_PORT = 27017\nMONGODB_DB = \"stackoverflow\"\nMONGODB_COLLECTION = \"questions\"\n\nDOWNLOAD_DELAY = 5  # 抓取的延迟\n\n```\n## 第二步\n我们已经能够爬取和解析html数据了，而且已经配置了数据库，接下来，我们通过`pipelines.py`中建立一个管道去连接这两个部分。\n我们首先来完成数据库的连接部分\n```python\nimport pymongo\n\nfrom scrapy.conf import settings\nfrom scrapy.exceptions import DropItem\nfrom scrapy import log\n\n\nclass MongoDBPipeline(object):\n\n    def __init__(self):\n        connection = pymongo.MongoClient(\n            settings['MONGODB_SERVER'],\n            settings['MONGODB_PORT']\n        )\n        db = connection[settings['MONGODB_DB']]\n        self.collection = db[settings['MONGODB_COLLECTION']]\n```\n接下来定义一个处理函数\n```python\n    def process_item(self, item, spider):\n        for data in item:\n            if not data:\n                raise DropItem(\"Missing data!\")\n        self.collection.update({'url': item['url']}, dict(item), upsert=True)\n        log.msg(\"Question added to MongoDB database!\",\n                level=log.DEBUG, spider=spider)\n        return item\n\n```\nok,搞定，我们再测试一把\n```python\nscrapy crawl stack\n```\n## 执行效果如下\n![mongodb数据库管理](http://ww1.sinaimg.cn/large/692869a3gw1erjv5to5w3j20w70g8wio.jpg)\n# 参考文献\n1 [ImportError: Error loading object 'scrapy.contrib.memusage.MemoryUsage': No module named mail.smtp](https://github.com/scrapy/scrapy/issues/958)\n2 <http://stackoverflow.com/questions/8671071/error-to-execute-python-scrappy-module>\n3 [Python下用Scrapy和MongoDB构建爬虫系统（1）](http://python.jobbole.com/81320/)\n","source":"_posts/ubuntu-scrapy-stackoverflow.md","raw":"title: ubuntu下使用scrapy抓取cnblogs\ndate: 2015-04-26 16:52:28\ntags:\n- python\n- scrapy\n- 爬虫\ncategories:\n- python学习笔记\n---\n今天在伯乐在线上看到一篇翻译的博客，讲的是使用scrapy来抓取stackoverflow上的问题，刚好好久没用这个，于是一并捡起来玩一下。\n<!-- more -->\n# 软件安装\n我的环境是：ubuntu 14.04 lts\n需要安装相关软件\n## scrapy\n```\npip install Scrapy\n```\n## PyMongo\n```\npip install pymongo\n\n```\n## Mongodb\n上面安装的是python使用Mongodb的接口，很显然，我们要安装Mongodb才能使用\n```\nsudo apt-get install mongodb-server\n```\n至此，要使用的软件都已经安装完毕\n# 使用scrapy新建工程\n使用scrapy新建工程很简单，如下所示，我们新建一个stack的项目，他会在你的当前目录新建一个stack文件夹\n```\nscrapy startproject stack\n```\n并且会建成如下所示的目录树结构\n```\nchen@chen-P31:~$ tree stack\nstack\n├── stack\n│   ├── __init__.py\n│   ├── items.py\n│   ├── pipelines.py\n│   ├── settings.py\n│   └── spiders\n│       └── __init__.py\n└── scrapy.cfg\n```\n接下来，我们修改items.py的内容，这个文件用于定义存储“容器”，用来存储将要抓取的数据。\n```python\nfrom scrapy.item import Item,Field\n\nclass StackItem(Item):\n    # define the fields for your item here like:\n    # name = scrapy.Field()\n    title = Field()# 我们添加两个字段，我们等会儿会抓取一个标题和url两个字段\n    url = Field()\n```\n接着，还有一个很重要的东西，对，就是我们的蜘蛛，我们在spider目录下，新建一个stack_spider.py文件。顾名思义，这就是我们的蜘蛛。我们需要定义我们爬虫的起点，爬虫的规则等等\n```python\nfrom scrapy import Spider\nfrom stack.items import StackItem  # 导入我们上面定义的容器类\nclass StackSpider(Spider):\n    name = 'stack'   # 定义我们爬虫的名字\n    allowed_domains = [\"cnblogs.com\"]   # 规定爬虫爬取的域名\n    start_urls = ['http://www.cnblogs.com/geqianst/p/',]   # 爬虫工作的起点\n\n    def parse(self, response):# 爬虫用来做数据解析的\n        questions = response.xpath('//div[@id=\"myposts\"]//a[@id]')\n        # xpath选择器，这里的含义是取所有id为myposts的div，在它下面找所有带id的超链接a\n        # 实际结果是这样的\n        # [<Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_0\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_1\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_2\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_3\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_4\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_5\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_6\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_7\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_8\" hr'>,\n        # <Selector xpath='//div[@id=\"myposts\"]//a[@id]' data=u'<a id=\"PostsList1_rpPosts_TitleUrl_9\" hr'>]\n        #\n\n        for question in questions:\n            item = StackItem()\n            item['title'] = question.xpath(\n                'text()').extract()[0]\n            item['url'] = question.xpath(\n                '@href').extract()[0]\n            print item\n            yield item\n```\n# 测试\nok，上述工作基本完成，我们来测试一下\n```bash\nscrapy crawl stack\n```\n还可以这样测试一下，使用shell命令\n![用shell测试xpath](http://ww4.sinaimg.cn/large/692869a3gw1erjvd7qeqdj213z0j9h2h.jpg)\n妈蛋，我的竟然出错了，输出如下\n```\nchen@chen-P31:~/stack$ scrapy crawl stack\n2015-04-26 16:49:11+0800 [scrapy] INFO: Scrapy 0.24.6 started (bot: stack)\n2015-04-26 16:49:11+0800 [scrapy] INFO: Optional features available: ssl, http11\n2015-04-26 16:49:11+0800 [scrapy] INFO: Overridden settings: {'NEWSPIDER_MODULE': 'stack.spiders', 'SPIDER_MODULES': ['stack.spiders'], 'BOT_NAME': 'stack'}\nTraceback (most recent call last):\n  File \"/usr/local/bin/scrapy\", line 11, in <module>\n    sys.exit(execute())\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 143, in execute\n    _run_print_help(parser, _run_command, cmd, args, opts)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 89, in _run_print_help\n    func(*a, **kw)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 150, in _run_command\n    cmd.run(args, opts)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/commands/crawl.py\", line 60, in run\n    self.crawler_process.start()\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 92, in start\n    if self.start_crawling():\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 124, in start_crawling\n    return self._start_crawler() is not None\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 139, in _start_crawler\n    crawler.configure()\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 46, in configure\n    self.extensions = ExtensionManager.from_crawler(self)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/middleware.py\", line 50, in from_crawler\n    return cls.from_settings(crawler.settings, crawler)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/middleware.py\", line 29, in from_settings\n    mwcls = load_object(clspath)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/utils/misc.py\", line 42, in load_object\n    raise ImportError(\"Error loading object '%s': %s\" % (path, e))\nImportError: Error loading object 'scrapy.telnet.TelnetConsole': No module named conch\n```\n这是什么gui？\n还好我有stackoverflow，google一番，找到解决办法（其实这不是最后的解决办法，请往后看）\n网上说是twisted的问题，重新安装一下就好了，ok，走起\n```\nchen@chen-P31:~/stack$ sudo apt-get install twisted\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nE: Unable to locate package twisted\nchen@chen-P31:~/stack$ sudo apt-get install twisted.conch\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nNote, selecting 'python-twisted-conch' for regex 'twisted.conch'\nNote, selecting 'python2.7-twisted-conch' for regex 'twisted.conch'\nNote, selecting 'python-twisted-conch' instead of 'python2.7-twisted-conch'\nThe following packages were automatically installed and are no longer required:\n  cli-common dockmanager freepats gstreamer1.0-plugins-bad-faad\n  gstreamer1.0-plugins-bad-videoparsers libbotan-1.10-0:i386 libcdaudio1\n  libdbus-glib2.0-cil libdbus2.0-cil libdbusmenu-glib4:i386\n  libdbusmenu-gtk4:i386 libegl1-mesa:i386 libegl1-mesa-drivers:i386 libflite1\n  libfluidsynth1 libgbm1:i386 libgconf2.0-cil libgdiplus libgif4\n  libgles2-mesa:i386 libglib2.0-cil libgme0 libgmp10:i386\n  libgnome-desktop-2-17 libgnome-keyring1.0-cil libgnomedesktop2.20-cil\n  libgstreamer-plugins-bad0.10-0 libgstreamer-plugins-bad1.0-0 libgtk2.0-cil\n  libicu52:i386 libmimic0 libmms0 libmono-addins0.2-cil libmono-cairo4.0-cil\n  libmono-corlib4.0-cil libmono-corlib4.5-cil libmono-data-tds4.0-cil\n  libmono-i18n-west4.0-cil libmono-i18n4.0-cil libmono-posix4.0-cil\n  libmono-security4.0-cil libmono-sharpzip4.84-cil libmono-sqlite4.0-cil\n  libmono-system-configuration4.0-cil libmono-system-core4.0-cil\n  libmono-system-data4.0-cil libmono-system-drawing4.0-cil\n  libmono-system-enterpriseservices4.0-cil\n  libmono-system-runtime-serialization-formatters-soap4.0-cil\n  libmono-system-security4.0-cil libmono-system-transactions4.0-cil\n  libmono-system-web-applicationservices4.0-cil\n  libmono-system-web-services4.0-cil libmono-system-web4.0-cil\n  libmono-system-xml-linq4.0-cil libmono-system-xml4.0-cil\n  libmono-system4.0-cil libmono-web4.0-cil libmpg123-0 libnotify0.4-cil\n  libofa0 libopenal-data libopenal1 libopenvg1-mesa:i386 libqrencode3:i386\n  libqt5core5a:i386 libqt5dbus5:i386 libqt5gui5:i386 libqt5network5:i386\n  libqt5widgets5:i386 libqtshadowsocks:i386 librsvg2-2.18-cil libslv2-9\n  libsoundtouch0 libspandsp2 libsrtp0 libssl1.0.0:i386 libv4l-0:i386\n  libv4lconvert0:i386 libvo-aacenc0 libvo-amrwbenc0 libwayland-client0:i386\n  libwayland-egl1-mesa:i386 libwayland-server0:i386 libwildmidi-config\n  libwildmidi1 libwnck2.20-cil libxcb-icccm4:i386 libxcb-image0:i386\n  libxcb-keysyms1:i386 libxcb-randr0:i386 libxcb-render-util0:i386\n  libxcb-shape0:i386 libxcb-util0:i386 libxcb-xfixes0:i386 libxcb-xkb1:i386\n  libxkbcommon-x11-0:i386 libxkbcommon0:i386 libzbar0:i386 mono-4.0-gac\n  mono-gac mono-runtime mono-runtime-common mono-runtime-sgen python-mpd\n  python-mutagen python-twisted-names\nUse 'apt-get autoremove' to remove them.\nThe following extra packages will be installed:\n  python-pyasn1\nThe following NEW packages will be installed:\n  python-pyasn1 python-twisted-conch\n0 upgraded, 2 newly installed, 0 to remove and 6 not upgraded.\nNeed to get 286 kB of archives.\nAfter this operation, 1,793 kB of additional disk space will be used.\nDo you want to continue? [Y/n] \nGet:1 http://mirrors.ustc.edu.cn/ubuntu/ trusty/main python-pyasn1 all 0.1.7-1ubuntu2 [44.2 kB]\nGet:2 http://mirrors.ustc.edu.cn/ubuntu/ trusty/main python-twisted-conch all 1:13.2.0-1ubuntu1 [242 kB]\nFetched 286 kB in 0s (1,595 kB/s)         \nSelecting previously unselected package python-pyasn1.\n(Reading database ... 359746 files and directories currently installed.)\nPreparing to unpack .../python-pyasn1_0.1.7-1ubuntu2_all.deb ...\nUnpacking python-pyasn1 (0.1.7-1ubuntu2) ...\nSelecting previously unselected package python-twisted-conch.\nPreparing to unpack .../python-twisted-conch_1%3a13.2.0-1ubuntu1_all.deb ...\nUnpacking python-twisted-conch (1:13.2.0-1ubuntu1) ...\nProcessing triggers for doc-base (0.10.5) ...\nProcessing 1 added doc-base file...\nProcessing triggers for man-db (2.6.7.1-1ubuntu1) ...\nSetting up python-pyasn1 (0.1.7-1ubuntu2) ...\nSetting up python-twisted-conch (1:13.2.0-1ubuntu1) ...\n```\n安装总算完成，再试一次，妈蛋，又来一个新错误，这是什么gui？？？\n```bash\nchen@chen-P31:~/stack$ scrapy crawl stack\n2015-04-26 16:50:44+0800 [scrapy] INFO: Scrapy 0.24.6 started (bot: stack)\n2015-04-26 16:50:44+0800 [scrapy] INFO: Optional features available: ssl, http11\n2015-04-26 16:50:44+0800 [scrapy] INFO: Overridden settings: {'NEWSPIDER_MODULE': 'stack.spiders', 'SPIDER_MODULES': ['stack.spiders'], 'BOT_NAME': 'stack'}\nTraceback (most recent call last):\n  File \"/usr/local/bin/scrapy\", line 11, in <module>\n    sys.exit(execute())\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 143, in execute\n    _run_print_help(parser, _run_command, cmd, args, opts)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 89, in _run_print_help\n    func(*a, **kw)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 150, in _run_command\n    cmd.run(args, opts)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/commands/crawl.py\", line 60, in run\n    self.crawler_process.start()\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 92, in start\n    if self.start_crawling():\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 124, in start_crawling\n    return self._start_crawler() is not None\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 139, in _start_crawler\n    crawler.configure()\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py\", line 46, in configure\n    self.extensions = ExtensionManager.from_crawler(self)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/middleware.py\", line 50, in from_crawler\n    return cls.from_settings(crawler.settings, crawler)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/middleware.py\", line 29, in from_settings\n    mwcls = load_object(clspath)\n  File \"/usr/local/lib/python2.7/dist-packages/scrapy/utils/misc.py\", line 42, in load_object\n    raise ImportError(\"Error loading object '%s': %s\" % (path, e))\nImportError: Error loading object 'scrapy.contrib.memusage.MemoryUsage': No module named mail.smtp\n```\n最后的最后，我在我们万能的github上找到[答案](https://github.com/scrapy/scrapy/issues/958)，原来是我们没有安装python-twisted，安装一下，世界都美好了\n```\nsudo apt-get install python-twisted\n```\n## 输出到文件\n为了更直观的看到结果，我们将结果输出到一个json文件\n```\nscrapy crawl stack -o items.json -t json\n```\n噢耶，第一个爬虫成功\n# 存储到mongodb\n接下来，我们做最后一件事，我们将结果存储到mongodb的数据库中\n在这里，我遇到一个大坑，无论是伯乐在线翻译的博客\n还是网上搜索到的一般教程，都是使用pymongo.Connection来连接数据库，可是妈蛋，你使用`pip install pymongo`安装的版本都是最新版本3.0.1，那个Connection的写法已经不支持，被丢弃了，擦。\n我们来看一下版本，我学到一个新命令`pip show pymongo`，用来查看某一个包的版本的。\n![查看pymongo版本](http://ww4.sinaimg.cn/large/692869a3gw1erjct36jnrj20df038dgf.jpg)\n在pymongo 3.0的版本中，已经不再支持pymongo.Connection，而是使用pymongo.MongoClient来替代。\n## 第一步\n创建一个用来保存我们抓取数据的数据库。打开`settings.py`,指定管道，然后加入数据库的相关设置\n```python\n\nBOT_NAME = 'stack'\n\nSPIDER_MODULES = ['stack.spiders']\nNEWSPIDER_MODULE = 'stack.spiders'\n\n# Crawl responsibly by identifying yourself (and your website) on the user-agent\n# USER_AGENT = 'stack (+http://www.yourdomain.com)'\n\nITEM_PIPELINES = ['stack.pipelines.MongoDBPipeline', ]\n# 关于mongodb的相关设置，包括服务器的ip，端口号，数据库名，表名，\n# 我也是第一次使用mongodb竟然不需要用户验证信息，而且这表名确实奇怪，叫做MONGODB_COLLECTION\nMONGODB_SERVER = \"localhost\"\nMONGODB_PORT = 27017\nMONGODB_DB = \"stackoverflow\"\nMONGODB_COLLECTION = \"questions\"\n\nDOWNLOAD_DELAY = 5  # 抓取的延迟\n\n```\n## 第二步\n我们已经能够爬取和解析html数据了，而且已经配置了数据库，接下来，我们通过`pipelines.py`中建立一个管道去连接这两个部分。\n我们首先来完成数据库的连接部分\n```python\nimport pymongo\n\nfrom scrapy.conf import settings\nfrom scrapy.exceptions import DropItem\nfrom scrapy import log\n\n\nclass MongoDBPipeline(object):\n\n    def __init__(self):\n        connection = pymongo.MongoClient(\n            settings['MONGODB_SERVER'],\n            settings['MONGODB_PORT']\n        )\n        db = connection[settings['MONGODB_DB']]\n        self.collection = db[settings['MONGODB_COLLECTION']]\n```\n接下来定义一个处理函数\n```python\n    def process_item(self, item, spider):\n        for data in item:\n            if not data:\n                raise DropItem(\"Missing data!\")\n        self.collection.update({'url': item['url']}, dict(item), upsert=True)\n        log.msg(\"Question added to MongoDB database!\",\n                level=log.DEBUG, spider=spider)\n        return item\n\n```\nok,搞定，我们再测试一把\n```python\nscrapy crawl stack\n```\n## 执行效果如下\n![mongodb数据库管理](http://ww1.sinaimg.cn/large/692869a3gw1erjv5to5w3j20w70g8wio.jpg)\n# 参考文献\n1 [ImportError: Error loading object 'scrapy.contrib.memusage.MemoryUsage': No module named mail.smtp](https://github.com/scrapy/scrapy/issues/958)\n2 <http://stackoverflow.com/questions/8671071/error-to-execute-python-scrappy-module>\n3 [Python下用Scrapy和MongoDB构建爬虫系统（1）](http://python.jobbole.com/81320/)\n","slug":"ubuntu-scrapy-stackoverflow","published":1,"updated":"2015-10-29T06:08:43.478Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hme00114si1o8v79lh1"},{"title":"ubuntu下设置apache的目录映射","date":"2015-10-15T14:12:37.000Z","_content":"好吧,我的博客一不小心又荒废下来了,话不多说,进入正文.\n<!-- more -->\n最近的项目一直在忙,发布代码的时候遇到一个麻烦事,由于所有项目代码都放在服务器的根目录,也就是`/var/www/html`下;然后还有一个api的页面,我放在一个`api`文件夹中,然后把整个`api`文件夹放在`html`目录下.由于每次发布代码都是替换整个根目录`html`下的文件,你懂的,我每次发布项目代码后,`api`就没了,需要我单独解压,再复制,blablabla,总之一个字,**  烦  **.\n我突然想起来,phpmyadmin安装后就不在网站的根目录,但是访问的时候我却还是直接在ip后面跟目录,比如`http://127.0.0.1/phpmyadmin`,这货应该是用了一个映射,我照着这个样子搞一个,不就行了,说干就干.\n\n# 1 使用的命令\n`Alias` 这个是这次主要使用的命令,使用的方法很简单,如下所示\n```shell\nAlias /api /home/ch/api\n```\n意思就是如果你在ip后面添加`/api`后缀,也就是你在浏览器访问`http://127.0.0.1/api`,那么实际就会访问到`/home/ch/api`目录下\n# 2 使用方法\n### Linux下\n由于我用的是ubuntu,所以具体说下ubuntu下怎么用.\n根据[在Ubuntu上安装LAMP服务器并简单配置](http://huirong.github.io/2015/04/01/installLamp/),这篇文章中关于`phpmyadmin`的设置部分,以下为摘抄\n```\n配置Apache服务器\n如果此时在浏览器中输入http://localhost/phpmyadmin，会提示404错误\n此时应该进行简单的配置，将phpMyAdmin的配置文件，复制到Apache2下\n\ncp /etc/phpmyadmin/apache.conf /etc/apache2/conf-enabled/phpmyadmin.conf\n然后重启Apache服务器\n\nservice apache2 restart\n\n```\n我们得到启发,本来phpmyadmin也是不在`html`根目录下的,上面的操作做了什么呢?\n我们打开`/etc/apache2/conf-enabled/phpmyadmin.conf`这个文件看看\n```\n# phpMyAdmin default Apache configuration\n\nAlias /phpmyadmin /usr/share/phpmyadmin\n\n<Directory /usr/share/phpmyadmin>\n    Options FollowSymLinks\n    DirectoryIndex index.php\n\n    <IfModule mod_php5.c>\n        AddType application/x-httpd-php .php\n\n        php_flag magic_quotes_gpc Off\n        php_flag track_vars On\n        php_flag register_globals Off\n        php_admin_flag allow_url_fopen Off\n        php_value include_path .\n        php_admin_value upload_tmp_dir /var/lib/phpmyadmin/tmp\n        php_admin_value open_basedir /usr/share/phpmyadmin/:/etc/phpmyadmin/:/var/lib/phpmyadmin/:/usr/share/php/php-gettext/:/usr/share/javascript/\n    </IfModule>\n\n</Directory>\n\n# Authorize for setup\n<Directory /usr/share/phpmyadmin/setup>\n    <IfModule mod_authn_file.c>\n    AuthType Basic\n    AuthName \"phpMyAdmin Setup\"\n    AuthUserFile /etc/phpmyadmin/htpasswd.setup\n    </IfModule>\n    Require valid-user\n</Directory>\n\n# Disallow web access to directories that don't need it\n<Directory /usr/share/phpmyadmin/libraries>\n    Order Deny,Allow\n    Deny from All\n</Directory>\n<Directory /usr/share/phpmyadmin/setup/lib>\n    Order Deny,Allow\n    Deny from All\n</Directory>\n\n\n```\n看看这个文件的第一行,soga,原来他用的也是`Alias`命令,接下来我们继续往下走,下面的代码是什么意思呢?下面的代码是用来设置文件目录的权限的,就是`<Directory>`标签里面的内容.\n关于这里的设置,我们可以参考[apache官网](https://httpd.apache.org/docs/2.2/mod/mod_authz_host.html# order)上的描述.简而言之\n`Order Deny,Allow`其实是Allow优先,举个例子\n```\nOrder Deny,Allow\nAllow from All\nDeny from All\n```\n由于`Deny`规则在`Allow`之前(Order规定的),所以先Deny所有的请求,然后`Allow`规则在其后,最后的结果就是所有的人都可以随意访问.假设你要对访问进行限制,建议按照下面这样设置\n```\nOrder Deny,Allow\nAllow from 192.168.1.122\nDeny from All\n```\n也就是指允许ip为`192.168.1.122`的用户去访问,其他的用户都会被`Deny`\n# 3 最后的结果\n结合上面的分析,给出我最后的结果\n```\nAlias /api /var/www/api\n<Directory /var/www/api>\n Options FollowSymLinks Includes -Indexes\n\n  AllowOverride None\n  Order allow,deny\n  allow from all\n</Directory>\n\n```\n这里的`-Indexes`选项的意思是,不要列出目录\n打完收工\n","source":"_posts/ubuntu-lamp-alias-setting.md","raw":"title: ubuntu下设置apache的目录映射\ndate: 2015-10-15 22:12:37\ntags:\n- ubuntu\n- apache\ncategories:\n- 服务器\n---\n好吧,我的博客一不小心又荒废下来了,话不多说,进入正文.\n<!-- more -->\n最近的项目一直在忙,发布代码的时候遇到一个麻烦事,由于所有项目代码都放在服务器的根目录,也就是`/var/www/html`下;然后还有一个api的页面,我放在一个`api`文件夹中,然后把整个`api`文件夹放在`html`目录下.由于每次发布代码都是替换整个根目录`html`下的文件,你懂的,我每次发布项目代码后,`api`就没了,需要我单独解压,再复制,blablabla,总之一个字,**  烦  **.\n我突然想起来,phpmyadmin安装后就不在网站的根目录,但是访问的时候我却还是直接在ip后面跟目录,比如`http://127.0.0.1/phpmyadmin`,这货应该是用了一个映射,我照着这个样子搞一个,不就行了,说干就干.\n\n# 1 使用的命令\n`Alias` 这个是这次主要使用的命令,使用的方法很简单,如下所示\n```shell\nAlias /api /home/ch/api\n```\n意思就是如果你在ip后面添加`/api`后缀,也就是你在浏览器访问`http://127.0.0.1/api`,那么实际就会访问到`/home/ch/api`目录下\n# 2 使用方法\n### Linux下\n由于我用的是ubuntu,所以具体说下ubuntu下怎么用.\n根据[在Ubuntu上安装LAMP服务器并简单配置](http://huirong.github.io/2015/04/01/installLamp/),这篇文章中关于`phpmyadmin`的设置部分,以下为摘抄\n```\n配置Apache服务器\n如果此时在浏览器中输入http://localhost/phpmyadmin，会提示404错误\n此时应该进行简单的配置，将phpMyAdmin的配置文件，复制到Apache2下\n\ncp /etc/phpmyadmin/apache.conf /etc/apache2/conf-enabled/phpmyadmin.conf\n然后重启Apache服务器\n\nservice apache2 restart\n\n```\n我们得到启发,本来phpmyadmin也是不在`html`根目录下的,上面的操作做了什么呢?\n我们打开`/etc/apache2/conf-enabled/phpmyadmin.conf`这个文件看看\n```\n# phpMyAdmin default Apache configuration\n\nAlias /phpmyadmin /usr/share/phpmyadmin\n\n<Directory /usr/share/phpmyadmin>\n    Options FollowSymLinks\n    DirectoryIndex index.php\n\n    <IfModule mod_php5.c>\n        AddType application/x-httpd-php .php\n\n        php_flag magic_quotes_gpc Off\n        php_flag track_vars On\n        php_flag register_globals Off\n        php_admin_flag allow_url_fopen Off\n        php_value include_path .\n        php_admin_value upload_tmp_dir /var/lib/phpmyadmin/tmp\n        php_admin_value open_basedir /usr/share/phpmyadmin/:/etc/phpmyadmin/:/var/lib/phpmyadmin/:/usr/share/php/php-gettext/:/usr/share/javascript/\n    </IfModule>\n\n</Directory>\n\n# Authorize for setup\n<Directory /usr/share/phpmyadmin/setup>\n    <IfModule mod_authn_file.c>\n    AuthType Basic\n    AuthName \"phpMyAdmin Setup\"\n    AuthUserFile /etc/phpmyadmin/htpasswd.setup\n    </IfModule>\n    Require valid-user\n</Directory>\n\n# Disallow web access to directories that don't need it\n<Directory /usr/share/phpmyadmin/libraries>\n    Order Deny,Allow\n    Deny from All\n</Directory>\n<Directory /usr/share/phpmyadmin/setup/lib>\n    Order Deny,Allow\n    Deny from All\n</Directory>\n\n\n```\n看看这个文件的第一行,soga,原来他用的也是`Alias`命令,接下来我们继续往下走,下面的代码是什么意思呢?下面的代码是用来设置文件目录的权限的,就是`<Directory>`标签里面的内容.\n关于这里的设置,我们可以参考[apache官网](https://httpd.apache.org/docs/2.2/mod/mod_authz_host.html# order)上的描述.简而言之\n`Order Deny,Allow`其实是Allow优先,举个例子\n```\nOrder Deny,Allow\nAllow from All\nDeny from All\n```\n由于`Deny`规则在`Allow`之前(Order规定的),所以先Deny所有的请求,然后`Allow`规则在其后,最后的结果就是所有的人都可以随意访问.假设你要对访问进行限制,建议按照下面这样设置\n```\nOrder Deny,Allow\nAllow from 192.168.1.122\nDeny from All\n```\n也就是指允许ip为`192.168.1.122`的用户去访问,其他的用户都会被`Deny`\n# 3 最后的结果\n结合上面的分析,给出我最后的结果\n```\nAlias /api /var/www/api\n<Directory /var/www/api>\n Options FollowSymLinks Includes -Indexes\n\n  AllowOverride None\n  Order allow,deny\n  allow from all\n</Directory>\n\n```\n这里的`-Indexes`选项的意思是,不要列出目录\n打完收工\n","slug":"ubuntu-lamp-alias-setting","published":1,"updated":"2015-10-29T06:08:43.994Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hmk001a4si1khha54ft"},{"title":"ubuntu 14.04 安装denyhosts","date":"2015-04-28T12:19:23.000Z","_content":"# 起因\n因为之前服务器两次被黑，妈蛋。今天在上google+的时候，无意中看到一个维护vps的帖子，就顺手把我的服务器维护下。\n之前被黑经历也很简单，因为方便管理的缘故，我给root用户设置了密码，没错，是弱口令，一扫不要一分钟就可以出来的那种。\n我在那篇帖子中看到denyhosts这货。东西很简单，分析你的日志，如果有人连续登陆几次密码都错误，那么把他的ip添加到denyhost当中，禁止它继续扫描。这货还很多功能，可以设置禁止时间以后，自动解禁；可以配置自动解禁的次数;还可以配置用户密码尝试的次数，给管理员发邮件等。\n<!-- more -->\n# 安装\n## 1、下载源码包,解压源码包\n```python\nwget http://sourceforge.net/projects/denyhosts/files/denyhosts/2.6/DenyHosts-2.6.tar.gz\ntar zxvf DenyHosts-2.6.tar.gz\ncd DenyHosts-2.6\n```\n## 2、安装部署\n```python\npython setup.py install\ncd /usr/share/denyhosts/\ncp denyhosts.cfg-dist denyhosts.cfg\ncp daemon-control-dist daemon-control\n```\n## 3、编辑配置文件denyhosts.cfg\n```python\nsudo vi denyhosts.cfg\n```\n几个常见的参数如下所示：\n```\nPURGE_DENY：当一个IP被阻止以后，过多长时间被自动解禁。可选如3m（三分钟）、5h（5小时）、2d（两天）、8w（8周）、1y（一年）；\nPURGE_THRESHOLD：定义了某一IP最多被解封多少次。即某一IP由于暴力破解SSH密码被阻止/解封达到了PURGE_THRESHOLD次，则会被永久禁止；\nBLOCK_SERVICE：需要阻止的服务名；\nDENY_THRESHOLD_INVALID：某一无效用户名（不存在的用户）尝试多少次登录后被阻止；\nDENY_THRESHOLD_VALID：某一有效用户名尝试多少次登陆后被阻止（比如账号正确但密码错误），root除外；\nDENY_THRESHOLD_ROOT：root用户尝试登录多少次后被阻止；\nHOSTNAME_LOOKUP：是否尝试解析源IP的域名；```\n\n一般我们就用默认就好，我们只需要改两个地方：\n### 第一个，我们注释掉第12行，启用第15行，修改以后结果如下(原因是ubuntu中的log不在/var/log/secure中，而是在/var/log/auth.log中)\n![修改后的denyhosts.cfg](http://ww3.sinaimg.cn/large/692869a3gw1erll3zp3xpj20id0b5q63.jpg)\n### 第二个，我们启用第64行，也就是设置，ip被禁止后，禁止5天，这个时间你可以自行设置\n去掉前面的`# `,就行了，修改后结果如下\n```bash\n 63 # purge entries older than 5 days\n 64 PURGE_DENY = 5d\n 65 ###################################################################### #\n 66 \n```\n## 4、编辑配置文件daemon-control\n因为在ubuntu系统中，有些文件不在预设的位置，所以我们需要编辑这个文件\n我们只需要改第14行就好了，修改`/usr/bin/denyhosts.py`为`/usr/local/bin/denyhosts.py`，修改后结果如下\n```bash\n 13 \n 14 DENYHOSTS_BIN   = \"/usr/local/bin/denyhosts.py\"\n 15 DENYHOSTS_LOCK  = \"/var/lock/subsys/denyhosts\"\n 16 DENYHOSTS_CFG   = \"/usr/share/denyhosts/denyhosts.cfg\"\n 17 \n 18 PYTHON_BIN      = \"/usr/bin/env python\"\n 19 \n\n```\n## 5、运行\n运行，额，错误一堆啊，我们执行`sudo ./daemon-control start`,然后得到如下错误\n```bash\nstarting DenyHosts:    /usr/bin/env python /usr/local/bin/denyhosts.py --daemon --config=/usr/share/denyhosts/denyhosts.cfg\nDenyHosts could not obtain lock (pid: )\n[Errno 2] No such file or directory: '/var/lock/subsys/denyhosts'\n\n```\n我们可以去`/var/lock`下面的确看不到subsys这个文件夹，那我们就手动创建他\n```bash\nmkdir -p /var/lock/subsys\n```\n继续执行`sudo ./daemon-control start`，应该就会成功\nps：如果还不成功，他缺什么文件我们就用`touch`新建这个文件，如果说`file exists`,我们就删除那个文件\n## 6、添加到开机启动\n第一种是将DenyHosts作为类似apache、mysql一样的服务，这种方法可以通过 /etc/init.d/denyhosts 命令来控制其状态。方法如下：\n```\ncd /etc/init.d\nln -s /usr/share/denyhosts/daemon-control denyhosts\n# 上面的操作就把他变成了一个服务 我们可以使用service denyhosts start来启动服务\n# 下面把他添加到开机自启动，我们这里需要安装一个软件来实现\n# ubuntu中没有chkconfig命令，网上的教程是用的chkconfig，具体操作查看后面的参考文献1，ubuntu中对应的是update-rc.d，但是不好用，所以我用sysv-rc-conf \nsudo apt-get install sysv-rc-conf\nsudo sysv-rc-conf\n```\n我们设置运行级别2345，编辑以后如下所示\n![设置denyhosts开机自启动](http://ww2.sinaimg.cn/large/692869a3gw1erlmrt5ht5j20j80m40zg.jpg)\n按`q`，退出并保存\n\n第二种是将Denyhosts直接加入rc.local中自动启动（类似于Windows中的“启动文件夹”）：\n```bash\necho '/usr/share/denyhosts/daemon-control start' >> /etc/rc.local\n```\n\n# 参考文献\n1 [通过DenyHosts阻止SSH暴力攻击教程](http://www.bootf.com/571.html)\n\n2 [/var/log/secure not present in 14.04 ,is there any alternative?](http://askubuntu.com/questions/534324/var-log-secure-not-present-in-14-04-is-there-any-alternative)\n","source":"_posts/ubuntu-denyhosts.md","raw":"title: ubuntu 14.04 安装denyhosts\ndate: 2015-04-28 20:19:23\ntags:\n- Linux\n- ubuntu\ncategories:\n- Linux\n---\n# 起因\n因为之前服务器两次被黑，妈蛋。今天在上google+的时候，无意中看到一个维护vps的帖子，就顺手把我的服务器维护下。\n之前被黑经历也很简单，因为方便管理的缘故，我给root用户设置了密码，没错，是弱口令，一扫不要一分钟就可以出来的那种。\n我在那篇帖子中看到denyhosts这货。东西很简单，分析你的日志，如果有人连续登陆几次密码都错误，那么把他的ip添加到denyhost当中，禁止它继续扫描。这货还很多功能，可以设置禁止时间以后，自动解禁；可以配置自动解禁的次数;还可以配置用户密码尝试的次数，给管理员发邮件等。\n<!-- more -->\n# 安装\n## 1、下载源码包,解压源码包\n```python\nwget http://sourceforge.net/projects/denyhosts/files/denyhosts/2.6/DenyHosts-2.6.tar.gz\ntar zxvf DenyHosts-2.6.tar.gz\ncd DenyHosts-2.6\n```\n## 2、安装部署\n```python\npython setup.py install\ncd /usr/share/denyhosts/\ncp denyhosts.cfg-dist denyhosts.cfg\ncp daemon-control-dist daemon-control\n```\n## 3、编辑配置文件denyhosts.cfg\n```python\nsudo vi denyhosts.cfg\n```\n几个常见的参数如下所示：\n```\nPURGE_DENY：当一个IP被阻止以后，过多长时间被自动解禁。可选如3m（三分钟）、5h（5小时）、2d（两天）、8w（8周）、1y（一年）；\nPURGE_THRESHOLD：定义了某一IP最多被解封多少次。即某一IP由于暴力破解SSH密码被阻止/解封达到了PURGE_THRESHOLD次，则会被永久禁止；\nBLOCK_SERVICE：需要阻止的服务名；\nDENY_THRESHOLD_INVALID：某一无效用户名（不存在的用户）尝试多少次登录后被阻止；\nDENY_THRESHOLD_VALID：某一有效用户名尝试多少次登陆后被阻止（比如账号正确但密码错误），root除外；\nDENY_THRESHOLD_ROOT：root用户尝试登录多少次后被阻止；\nHOSTNAME_LOOKUP：是否尝试解析源IP的域名；```\n\n一般我们就用默认就好，我们只需要改两个地方：\n### 第一个，我们注释掉第12行，启用第15行，修改以后结果如下(原因是ubuntu中的log不在/var/log/secure中，而是在/var/log/auth.log中)\n![修改后的denyhosts.cfg](http://ww3.sinaimg.cn/large/692869a3gw1erll3zp3xpj20id0b5q63.jpg)\n### 第二个，我们启用第64行，也就是设置，ip被禁止后，禁止5天，这个时间你可以自行设置\n去掉前面的`# `,就行了，修改后结果如下\n```bash\n 63 # purge entries older than 5 days\n 64 PURGE_DENY = 5d\n 65 ###################################################################### #\n 66 \n```\n## 4、编辑配置文件daemon-control\n因为在ubuntu系统中，有些文件不在预设的位置，所以我们需要编辑这个文件\n我们只需要改第14行就好了，修改`/usr/bin/denyhosts.py`为`/usr/local/bin/denyhosts.py`，修改后结果如下\n```bash\n 13 \n 14 DENYHOSTS_BIN   = \"/usr/local/bin/denyhosts.py\"\n 15 DENYHOSTS_LOCK  = \"/var/lock/subsys/denyhosts\"\n 16 DENYHOSTS_CFG   = \"/usr/share/denyhosts/denyhosts.cfg\"\n 17 \n 18 PYTHON_BIN      = \"/usr/bin/env python\"\n 19 \n\n```\n## 5、运行\n运行，额，错误一堆啊，我们执行`sudo ./daemon-control start`,然后得到如下错误\n```bash\nstarting DenyHosts:    /usr/bin/env python /usr/local/bin/denyhosts.py --daemon --config=/usr/share/denyhosts/denyhosts.cfg\nDenyHosts could not obtain lock (pid: )\n[Errno 2] No such file or directory: '/var/lock/subsys/denyhosts'\n\n```\n我们可以去`/var/lock`下面的确看不到subsys这个文件夹，那我们就手动创建他\n```bash\nmkdir -p /var/lock/subsys\n```\n继续执行`sudo ./daemon-control start`，应该就会成功\nps：如果还不成功，他缺什么文件我们就用`touch`新建这个文件，如果说`file exists`,我们就删除那个文件\n## 6、添加到开机启动\n第一种是将DenyHosts作为类似apache、mysql一样的服务，这种方法可以通过 /etc/init.d/denyhosts 命令来控制其状态。方法如下：\n```\ncd /etc/init.d\nln -s /usr/share/denyhosts/daemon-control denyhosts\n# 上面的操作就把他变成了一个服务 我们可以使用service denyhosts start来启动服务\n# 下面把他添加到开机自启动，我们这里需要安装一个软件来实现\n# ubuntu中没有chkconfig命令，网上的教程是用的chkconfig，具体操作查看后面的参考文献1，ubuntu中对应的是update-rc.d，但是不好用，所以我用sysv-rc-conf \nsudo apt-get install sysv-rc-conf\nsudo sysv-rc-conf\n```\n我们设置运行级别2345，编辑以后如下所示\n![设置denyhosts开机自启动](http://ww2.sinaimg.cn/large/692869a3gw1erlmrt5ht5j20j80m40zg.jpg)\n按`q`，退出并保存\n\n第二种是将Denyhosts直接加入rc.local中自动启动（类似于Windows中的“启动文件夹”）：\n```bash\necho '/usr/share/denyhosts/daemon-control start' >> /etc/rc.local\n```\n\n# 参考文献\n1 [通过DenyHosts阻止SSH暴力攻击教程](http://www.bootf.com/571.html)\n\n2 [/var/log/secure not present in 14.04 ,is there any alternative?](http://askubuntu.com/questions/534324/var-log-secure-not-present-in-14-04-is-there-any-alternative)\n","slug":"ubuntu-denyhosts","published":1,"updated":"2015-10-29T06:08:44.363Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hmn001f4si1czszqvfj"},{"title":"ubuntu 14.04配置thinkphp路由,隐藏index.php","date":"2015-06-29T12:16:17.000Z","_content":"今天把代码发布到服务器上去,发现服务器的rewrite有问题,无法实现隐藏index.php的功能.\n<!-- more -->\n# 环境\n服务器:ubuntu 14.04 lts\napache:2.4.7\nphp:5.5.9-\nmysql:5.5.43\n\n# 开启rewrite模块\n在ubuntu中,开启很简单,执行以下bash命令即可\n```bash\nsudo a2enmod rewrite\n```\n# 添加.htaccess支持\n默认apache会忽视所有的规则重写,即使添加了`.htaccess`文件,他不认.\n在ubuntu 14.04中设置,跟其他版本的ubuntu有点不同\n核心操作还是修改 `AllowOverride None`为` AllowOverride All`.\n问题是这个文件到底在哪儿.\n在网上找的教程中,有的说是在`/etc/apache2/sites-available/000-default.conf`中,在我这个版本的apache中,它不在这里.\n他在`/etc/apache2/apache2.conf`中.\n我们打开这个文件,大概在166行.\n```bash\n<Directory /var/www/>\n        Options Indexes FollowSymLinks\n        AllowOverride All\n        Require all granted\n</Directory>\n```\n# 重启apache服务器\nok,都改完了,就剩一步,重启apache服务器.\n```bash\nsudo service apache2 restart\n```\n搞定!\n![热疯了,空调房都热](http://ww3.sinaimg.cn/large/692869a3gw1etl9v3c6wzj20go09dmx6.jpg)\n\n\n\n\n\n\n[](http://www.dev-metal.com/enable-mod_rewrite-ubuntu-14-04-lts/)\n","source":"_posts/ubuntu-14-04-setting-about-thinkphp-url-rewrite.md","raw":"title: ubuntu 14.04配置thinkphp路由,隐藏index.php\ndate: 2015-06-29 20:16:17\ntags:\n- ubuntu\n- thinkphp\ncategories:\n- Linux\n---\n今天把代码发布到服务器上去,发现服务器的rewrite有问题,无法实现隐藏index.php的功能.\n<!-- more -->\n# 环境\n服务器:ubuntu 14.04 lts\napache:2.4.7\nphp:5.5.9-\nmysql:5.5.43\n\n# 开启rewrite模块\n在ubuntu中,开启很简单,执行以下bash命令即可\n```bash\nsudo a2enmod rewrite\n```\n# 添加.htaccess支持\n默认apache会忽视所有的规则重写,即使添加了`.htaccess`文件,他不认.\n在ubuntu 14.04中设置,跟其他版本的ubuntu有点不同\n核心操作还是修改 `AllowOverride None`为` AllowOverride All`.\n问题是这个文件到底在哪儿.\n在网上找的教程中,有的说是在`/etc/apache2/sites-available/000-default.conf`中,在我这个版本的apache中,它不在这里.\n他在`/etc/apache2/apache2.conf`中.\n我们打开这个文件,大概在166行.\n```bash\n<Directory /var/www/>\n        Options Indexes FollowSymLinks\n        AllowOverride All\n        Require all granted\n</Directory>\n```\n# 重启apache服务器\nok,都改完了,就剩一步,重启apache服务器.\n```bash\nsudo service apache2 restart\n```\n搞定!\n![热疯了,空调房都热](http://ww3.sinaimg.cn/large/692869a3gw1etl9v3c6wzj20go09dmx6.jpg)\n\n\n\n\n\n\n[](http://www.dev-metal.com/enable-mod_rewrite-ubuntu-14-04-lts/)\n","slug":"ubuntu-14-04-setting-about-thinkphp-url-rewrite","published":1,"updated":"2015-10-29T06:08:44.831Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hms001j4si1byhnn0gz"},{"title":"sql中left_join和right_join混用","date":"2014-08-08T02:02:00.000Z","_content":"left join(左联接) 返回包括左表中的所有记录和右表中联结字段相等的记录 \n\nright join(右联接) 返回包括右表中的所有记录和左表中联结字段相等的记录\n\ninner join(等值连接) 只返回两个表中联结字段相等的行\n\n\n\n如上所言,我们只做一下left join的实验,right join和left join 类似\n\n测试一共三张表,a  b   c\n![]()\n\n表结构和数据分别如下\n\na表                                                                  b表                                                              c表\n![]()         ![]()          ![]()\n\n然后我们来试一下左连接\n\n1,  我们来查询a b两张表,连接他们aid=bid的选项\nsql>>SELECT \\*  FROM a   LEFT JOIN b on aid=bid\n\n\n![]()\n\n\n\n看图很好理解,因为是a左连接b,所以b中为空的元素 ,在查询结果中以NULL的形式补全\n\n同理可得\n\nsql>>SELECT \\* FROM a LEFT JOIN c on aid=cid\n![]()\n\n\nsql>>SELECT \\* FROM c LEFT JOIN b on bid=cid\nsql>>SELECT \\* FROM c LEFT JOIN b on cid=bid\n\n\n![]()\n\n\n\n也就是on后面的顺序无所谓,无论是bid=cid还是cid=bid,重点是前面的left join还是right join\n\n\n\n\n\n\n\n2,我们来试一下如果三张表左连接呢,会有什么情况?\n\nsql>>SELECT \\* FROM a\n\n           LEFT JOIN b on bid=aid \n\n           LEFT JOIN c on aid=cid\n![]()\n\n\n\nsql>>SELECT \\* FROM a LEFT JOIN b on bid=aid LEFT JOIN c on bid=cid\n![]()\n\n\n\n3,如果我用了一个right join呢?\n\nsql>>SELECT \\* FROM a LEFT JOIN b on bid=aid RIGHT JOIN c on bid=cid\n![]()\n\n\n\n这里该怎么理解呢?\n感谢[http://blog.csdn.net/sqlserverdiscovery/article/details/6893288](http://blog.csdn.net/sqlserverdiscovery/article/details/6893288)\n\n我们理解的时候可以把它拆成两部分去理解\n\n比如第一部分\nsql>>SELECT \\* FROM a LEFT JOIN b on bid=aid\n\n\n![]()\n\n\n\n然后再思考第二部分,假如上图是一张表  我们叫它a_b\n\n你可以新建一个视图,就可以真成为一张虚表了\n\nsql>>create  VIEW a_b  as (SELECT \\* FROM a LEFT JOIN b on bid=aid)\n![]()\n\n\n\n然后我们继续做下面一部分\n\nsql>>select \\* from a_b right join c on bid=cid\n![]()\n\n\n\n可见,与上面的结果是一样的,当然这是我们理解的过程,实际数据库服务器执行的时候可能不是这样的,它会做一些优化,提高效率\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/sql中left_join和right_join混用.md","raw":"title: 'sql中left_join和right_join混用'\ndate: 2014-08-08 10:02\ntags:\n- sql\n- select\ncategories:\n- 数据库\n---\nleft join(左联接) 返回包括左表中的所有记录和右表中联结字段相等的记录 \n\nright join(右联接) 返回包括右表中的所有记录和左表中联结字段相等的记录\n\ninner join(等值连接) 只返回两个表中联结字段相等的行\n\n\n\n如上所言,我们只做一下left join的实验,right join和left join 类似\n\n测试一共三张表,a  b   c\n![]()\n\n表结构和数据分别如下\n\na表                                                                  b表                                                              c表\n![]()         ![]()          ![]()\n\n然后我们来试一下左连接\n\n1,  我们来查询a b两张表,连接他们aid=bid的选项\nsql>>SELECT \\*  FROM a   LEFT JOIN b on aid=bid\n\n\n![]()\n\n\n\n看图很好理解,因为是a左连接b,所以b中为空的元素 ,在查询结果中以NULL的形式补全\n\n同理可得\n\nsql>>SELECT \\* FROM a LEFT JOIN c on aid=cid\n![]()\n\n\nsql>>SELECT \\* FROM c LEFT JOIN b on bid=cid\nsql>>SELECT \\* FROM c LEFT JOIN b on cid=bid\n\n\n![]()\n\n\n\n也就是on后面的顺序无所谓,无论是bid=cid还是cid=bid,重点是前面的left join还是right join\n\n\n\n\n\n\n\n2,我们来试一下如果三张表左连接呢,会有什么情况?\n\nsql>>SELECT \\* FROM a\n\n           LEFT JOIN b on bid=aid \n\n           LEFT JOIN c on aid=cid\n![]()\n\n\n\nsql>>SELECT \\* FROM a LEFT JOIN b on bid=aid LEFT JOIN c on bid=cid\n![]()\n\n\n\n3,如果我用了一个right join呢?\n\nsql>>SELECT \\* FROM a LEFT JOIN b on bid=aid RIGHT JOIN c on bid=cid\n![]()\n\n\n\n这里该怎么理解呢?\n感谢[http://blog.csdn.net/sqlserverdiscovery/article/details/6893288](http://blog.csdn.net/sqlserverdiscovery/article/details/6893288)\n\n我们理解的时候可以把它拆成两部分去理解\n\n比如第一部分\nsql>>SELECT \\* FROM a LEFT JOIN b on bid=aid\n\n\n![]()\n\n\n\n然后再思考第二部分,假如上图是一张表  我们叫它a_b\n\n你可以新建一个视图,就可以真成为一张虚表了\n\nsql>>create  VIEW a_b  as (SELECT \\* FROM a LEFT JOIN b on bid=aid)\n![]()\n\n\n\n然后我们继续做下面一部分\n\nsql>>select \\* from a_b right join c on bid=cid\n![]()\n\n\n\n可见,与上面的结果是一样的,当然这是我们理解的过程,实际数据库服务器执行的时候可能不是这样的,它会做一些优化,提高效率\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"sql中left_join和right_join混用","published":1,"updated":"2015-09-29T11:41:23.732Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hmx001o4si1zu1byjux"},{"title":"近期任务","date":"2014-12-02T14:56:31.000Z","_content":"2014-12-02 22:56:31  接下来的一个星期，我的任务是学习python爬虫的编写，至少要实现csdn博客转markdown的任务\n","source":"_posts/recent-task.md","raw":"title: 近期任务\ndate: 2014-12-02 22:56:31\ntags:\ncategories:\n- 杂文\n---\n2014-12-02 22:56:31  接下来的一个星期，我的任务是学习python爬虫的编写，至少要实现csdn博客转markdown的任务\n","slug":"recent-task","published":1,"updated":"2015-09-29T11:41:23.732Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hn2001v4si156mngrwx"},{"title":"python学习笔记--socket编程端口复用","date":"2015-03-18T00:47:02.000Z","_content":"最近在学习socket编程,遇到一个问题:\n我先bind一个端口后,如果通过ctr+c关闭进程.接下来执行程序的时候,就会提示`socket.error: Address already in use`.\n<!-- more -->\n照例google一番,找到[这个](http://blog.csdn.net/xl_xunzhao/article/details/3130037).博主说的情况和我的一样.\n我还在stackoverflow上找到[这个](http://stackoverflow.com/questions/4465959/python-errno-98-address-already-in-use).\n修改后代码如下:\n```\n    server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    # 下面这行是关健\n    server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n\n    server_socket.bind(('', PORT))\n    server_socket.listen(5)\n```\n然后就搞定了.\n\n下面的代码是socket编程敲得两个小例子,基于socket的聊天小程序都是别人的东西,只是练习一下,源地址在本文最后.\n## 多线程版本服务器端程序server2.py\n```\n# !/usr/bin/env python\n# -*- coding:utf-8-*-\n__author__ = 'chen'\n\n\nimport socket,sys\nfrom thread import *\n\nHOST = ''\nPORT = 8888\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nprint 'socket created'\n\ntry:\n    s.bind((HOST, PORT))\nexcept socket.error, msg:\n    print 'bind failed.Error code: |||%S Message: %s' %(str(msg[0]), msg[1])\n    sys.exit()\n\n\nprint 'socket bind complete'\n\ns.listen(10)\nprint 'socket now listening'\n\ndef clientthread(conn):\n    conn.send('welcome to the server.Type something and hit enter\\n')\n\n    while True:\n        data = conn.recv(1024)\n        reply = 'ok...' + data\n        if not data:\n            break\n        conn.sendall(reply)\n    conn.close()\n\nwhile 1:\n    conn, addr = s.accept()\n    print 'connected with %s : %s' %(addr[0],str(addr[1]))\n\n    start_new_thread(clientthread, (conn,))\n\ns.close()\n```\n直接telnet连接socket,就可以调试\n```\ntelnet localhost 8888\n```\n## 改良版,带广播的聊天室程序server3.py\n```\n# !/usr/bin/env python\n# -*- coding:utf-8-*-\n__author__ = 'chen'\n\nimport socket, select\n\ndef broadcast_data(sock, message):\n    for socket in CONNECTION_LIST:\n        if socket != server_socket != sock:\n            try:\n                socket.send(message)\n            except msg:\n                socket.close()\n                CONNECTION_LIST.remove(socket)\n\nif __name__ == \"__main__\":\n    CONNECTION_LIST = []\n    RECV_BUFFER = 4096\n    PORT = 5000\n    server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n    server_socket.bind(('', PORT))\n    server_socket.listen(5)\n\n    CONNECTION_LIST.append(server_socket)\n    print \"chat server started on port %s\" % str(PORT)\n\n    while 1:\n        read_sockets, write_sockets,error_sockets = select.select(CONNECTION_LIST, [], [])\n\n        for sock in read_sockets:\n            if sock == server_socket:\n                sockfd,addr = server_socket.accept()\n                CONNECTION_LIST.append(sockfd)\n                print \"client (%s, %s) connected\" % addr\n\n                broadcast_data(sockfd, \"[%s:%s] entered room\\n\" % addr)\n\n            else:\n                try:\n                    data = sock.recv(RECV_BUFFER)\n                    if data:\n                        print  \"[%s:%s]\" % (str(sock.getpeername()), data)\n                        broadcast_data(sock, \"[%s:%s]\" % (str(sock.getpeername()), data))\n                except msg:\n                    print msg\n                    broadcast_data(sock, \"client (%s, %s) is offline \"% addr)\n                    print \"client (%s,%s) is offline \" % addr\n                    sock.close()\n                    CONNECTION_LIST.remove(sock)\n                    continue\n    server_socket.close()\n```\n## 客户端程序client3.py\n```\n# !/usr/bin/env python\n# -*- coding:utf-8-*-\n__author__ = 'chen'\n\nimport socket,select,string,sys\n\ndef prompt():\n    sys.stdout.write('[you]')\n    sys.stdout.flush()\n\nif __name__ == \"__main__\":\n    if(len(sys.argv)<3):\n        print 'usage: python client3.py hostname port'\n        sys.exit()\n\n    host = sys.argv[1]\n    port = int(sys.argv[2])\n\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    s.settimeout(2)\n\n    try:\n        s.connect((host, port))\n    except:\n        print 'unable to connect'\n        sys.exit()\n\n    print 'connected to remote host. start sending messages'\n    prompt()\n\n    while 1:\n        rlist = [sys.stdin, s]\n\n        read_list, write_list, error_list = select.select(rlist, [], [])\n\n        for sock in read_list:\n            if sock == s:\n                data = sock.recv(4096)\n                if not data:\n                    print '\\nDisconnected from chat server'\n                    sys.exit()\n                else:\n                    sys.stdout.write(data)\n                    prompt()\n\n            else:\n                msg = sys.stdin.readline()\n                s.send(msg)\n                prompt()\n```\n---\n# 参考文献\n1 [Python Socket 网络编程](http://www.cnblogs.com/hazir/p/python_socket_programming.html)\n2 [Python Socket 编程——聊天室示例程序](http://www.cnblogs.com/hazir/p/python_chat_room.html)\n","source":"_posts/python-socket-port-reuse.md","raw":"title: python学习笔记--socket编程端口复用\ndate: 2015-03-18 08:47:02\ntags:\n- python\n- socket\n- Linux\ncategories:\n- python学习笔记\n---\n最近在学习socket编程,遇到一个问题:\n我先bind一个端口后,如果通过ctr+c关闭进程.接下来执行程序的时候,就会提示`socket.error: Address already in use`.\n<!-- more -->\n照例google一番,找到[这个](http://blog.csdn.net/xl_xunzhao/article/details/3130037).博主说的情况和我的一样.\n我还在stackoverflow上找到[这个](http://stackoverflow.com/questions/4465959/python-errno-98-address-already-in-use).\n修改后代码如下:\n```\n    server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    # 下面这行是关健\n    server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n\n    server_socket.bind(('', PORT))\n    server_socket.listen(5)\n```\n然后就搞定了.\n\n下面的代码是socket编程敲得两个小例子,基于socket的聊天小程序都是别人的东西,只是练习一下,源地址在本文最后.\n## 多线程版本服务器端程序server2.py\n```\n# !/usr/bin/env python\n# -*- coding:utf-8-*-\n__author__ = 'chen'\n\n\nimport socket,sys\nfrom thread import *\n\nHOST = ''\nPORT = 8888\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nprint 'socket created'\n\ntry:\n    s.bind((HOST, PORT))\nexcept socket.error, msg:\n    print 'bind failed.Error code: |||%S Message: %s' %(str(msg[0]), msg[1])\n    sys.exit()\n\n\nprint 'socket bind complete'\n\ns.listen(10)\nprint 'socket now listening'\n\ndef clientthread(conn):\n    conn.send('welcome to the server.Type something and hit enter\\n')\n\n    while True:\n        data = conn.recv(1024)\n        reply = 'ok...' + data\n        if not data:\n            break\n        conn.sendall(reply)\n    conn.close()\n\nwhile 1:\n    conn, addr = s.accept()\n    print 'connected with %s : %s' %(addr[0],str(addr[1]))\n\n    start_new_thread(clientthread, (conn,))\n\ns.close()\n```\n直接telnet连接socket,就可以调试\n```\ntelnet localhost 8888\n```\n## 改良版,带广播的聊天室程序server3.py\n```\n# !/usr/bin/env python\n# -*- coding:utf-8-*-\n__author__ = 'chen'\n\nimport socket, select\n\ndef broadcast_data(sock, message):\n    for socket in CONNECTION_LIST:\n        if socket != server_socket != sock:\n            try:\n                socket.send(message)\n            except msg:\n                socket.close()\n                CONNECTION_LIST.remove(socket)\n\nif __name__ == \"__main__\":\n    CONNECTION_LIST = []\n    RECV_BUFFER = 4096\n    PORT = 5000\n    server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n    server_socket.bind(('', PORT))\n    server_socket.listen(5)\n\n    CONNECTION_LIST.append(server_socket)\n    print \"chat server started on port %s\" % str(PORT)\n\n    while 1:\n        read_sockets, write_sockets,error_sockets = select.select(CONNECTION_LIST, [], [])\n\n        for sock in read_sockets:\n            if sock == server_socket:\n                sockfd,addr = server_socket.accept()\n                CONNECTION_LIST.append(sockfd)\n                print \"client (%s, %s) connected\" % addr\n\n                broadcast_data(sockfd, \"[%s:%s] entered room\\n\" % addr)\n\n            else:\n                try:\n                    data = sock.recv(RECV_BUFFER)\n                    if data:\n                        print  \"[%s:%s]\" % (str(sock.getpeername()), data)\n                        broadcast_data(sock, \"[%s:%s]\" % (str(sock.getpeername()), data))\n                except msg:\n                    print msg\n                    broadcast_data(sock, \"client (%s, %s) is offline \"% addr)\n                    print \"client (%s,%s) is offline \" % addr\n                    sock.close()\n                    CONNECTION_LIST.remove(sock)\n                    continue\n    server_socket.close()\n```\n## 客户端程序client3.py\n```\n# !/usr/bin/env python\n# -*- coding:utf-8-*-\n__author__ = 'chen'\n\nimport socket,select,string,sys\n\ndef prompt():\n    sys.stdout.write('[you]')\n    sys.stdout.flush()\n\nif __name__ == \"__main__\":\n    if(len(sys.argv)<3):\n        print 'usage: python client3.py hostname port'\n        sys.exit()\n\n    host = sys.argv[1]\n    port = int(sys.argv[2])\n\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    s.settimeout(2)\n\n    try:\n        s.connect((host, port))\n    except:\n        print 'unable to connect'\n        sys.exit()\n\n    print 'connected to remote host. start sending messages'\n    prompt()\n\n    while 1:\n        rlist = [sys.stdin, s]\n\n        read_list, write_list, error_list = select.select(rlist, [], [])\n\n        for sock in read_list:\n            if sock == s:\n                data = sock.recv(4096)\n                if not data:\n                    print '\\nDisconnected from chat server'\n                    sys.exit()\n                else:\n                    sys.stdout.write(data)\n                    prompt()\n\n            else:\n                msg = sys.stdin.readline()\n                s.send(msg)\n                prompt()\n```\n---\n# 参考文献\n1 [Python Socket 网络编程](http://www.cnblogs.com/hazir/p/python_socket_programming.html)\n2 [Python Socket 编程——聊天室示例程序](http://www.cnblogs.com/hazir/p/python_chat_room.html)\n","slug":"python-socket-port-reuse","published":1,"updated":"2015-10-29T06:08:45.367Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hn7001y4si1vn66nkxt"},{"title":"基于python的requests库，模拟登录csdn博客","date":"2015-05-23T11:06:04.000Z","_content":"还是继续我的python学习。以前写的爬虫用的urllib2来实现，也用过scrapy的爬虫框架，这次试试requests，刚开始用，用起来确实比urllib2好，封装的更好一些，使用起来简单方便很多。\n<!-- more -->\n# 安装requests库\n在ubuntu下面安装很简单\n```bash\npip install requests\n```\n就搞定了\n\n# 快速上手的小例子\n下面给个快速入门，最简单的例子\n```python\nimport requests\nr = requests.get('http://www.baidu.com')\nprint r.text\n```\n这段代码，很简单。\n第一行，引入requests库，这是必然的。\n第二行，通过get方式获取baidu首页的内容。\n第三行，把返回的response内容，输出出来\n\n果然很简单，这样就可以发送一个get请求，同理，你还可以使用\n`requests.post`,`requests.put`,`requests.options`,`requests.head`，发送请求，没错就是这么简单，果然比urllib2好用。\n# 模拟登录csdn\n我们需要其他的辅助工具\n### 浏览器：Firefox\n### 浏览器插件：tamper data，firebug\n我们需要tamper data来拦截请求，因为chrome没有这个功能的插件，所以这个只能使用firefox来做（除了拦截请求chrome没有，其他的工作都可以用chrome，看个人喜好吧）。\n\n# 分析登录过程\n## 1 打开登录页面\n我们首先打开csdn的登录页面`https://passport.csdn.net/account/login?ref=toolbar`\n这个链接，前面部分是登录的网址，问号后面的参数，顾名思义，referer，就是你从哪里跳过来的，也许是一个页面跳转到登录的，toolbar就是我自己点击顶部导航栏，然后跳转到登录页面的。\n## 2 清除相关的cookie\n为了排除不必要的干扰，我们先清除掉所有的相关的cookie，这样方便我们分析哪些参数是必须的。\n![firefox中，清除cookie](http://ww1.sinaimg.cn/large/692869a3gw1esegc1itw2j20qu075779.jpg)\n## 3 登录过程分析\n清除了cookie后，我们刷新一下页面`https://passport.csdn.net/account/login?ref=toolbar`，重新获取对应的cookie。\n然后我们就开始用tamper data来拦截请求。\n![使用tamper data](http://ww2.sinaimg.cn/large/692869a3gw1esegfztiz7j20s40ftdjw.jpg)\n我们点击`start tamper`，在网页中填写用户名和密码。点击`登录`，会发出一个请求，然后tamper data会拦截下这个请求，询问我们是否拦截，点击tamper，我们可以在这个请求提交之前，查看请求的内容，还可以做删改。\n![发出第一个登录请求前拦截下来，查看表单内容](http://ww1.sinaimg.cn/large/692869a3gw1esegkslypyj20y20gntdt.jpg)\ncsdn的登录过程比较简单，发送一个登录表单过去，就登录成功了，不过记得修改headers，这是后话。\n## 4 开始模拟登录\n知道登录过程了，我们就开始写登录的代码。\n```python\nimport requests\n# 使用beautifulsoup来处理获取的html内容，这个库需要安装，还是使用pip install beautifulsoup4来安装\nfrom bs4 import BeautifulSoup as bs\n# 这个函数使用来提取流水号的\ndef toJson(str):\n    '''\n    提取lt流水号，将数据化为一个字典\n    '''\n    soup = bs(str)\n    tt = {}\n    # 提取form表单中所有的input标签，以字典的形式来保存name：value\n    for inp in soup.form.find_all('input'):\n        if inp.get('name') != None:\n            tt[inp.get('name')] =inp.get('value')\n    return tt\n    \n# 这行代码，是用来维持cookie的，你后续的操作都不用担心cookie，他会自动带上相应的cookie\ns = requests.Session()\n# 我们需要带表单的参数,这里面有个参数lt,登录操作的流水号，我们需要从html页面中进行提取\npayload ={'username':'jackroyal','password':'123456','lt':soup[\"lt\"],'execution':'e1s1','_eventId':'submit'}\nr = s.post(\"http://passport.csdn.net/account/login\",data=payload,headers=header)\nprint r.text\n```\nok，至此，登录就成功了\n## 5 优化\n当你登录成功后，你会问，我怎么知道登录成功了呢？当你试图去抓取`http://write.blog.csdn.net/postlist`的内容的时候，你会发现一个403的错误，这是为啥呢？\n很简单，`user agent`没有修改，我们用的是默认的`user agent`，这可不是一个正常的用户，所以被网站拒绝了。我们加上他就好了\n```python\nheader = {'User-Agent':'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:38.0) Gecko/20100101 Firefox/38.0'}\nr = s.post(\"http://passport.csdn.net/account/login\",data=payload,headers=header)\nprint r.text\n```\n# 后话\n上面的代码还是太简单，我们都知道cookie是有有效期的，我在做调试的时候，没修改一次，就要模拟登录一次，这样不好，我们要保存cookie，这样下次就不需要重新发送登录请求了\n分享出完整的代码\n```python\n# !/usr/bin/env python\n# -*- coding: utf-8 -*-\n\nimport requests\nimport time\nimport os\nfrom bs4 import BeautifulSoup as bs\nfrom cookielib import LWPCookieJar\n\n\ndef toJson(str):\n    '''\n    提取lt流水号，将数据化为一个字典\n    '''\n    soup = bs(str)\n    tt = {}\n    for inp in soup.form.find_all('input'):\n        if inp.get('name') != None:\n            tt[inp.get('name')] =inp.get('value')\n    return tt\n\n\n# cookie setting\ns = requests.Session()\ns.cookies = LWPCookieJar('cookiejar')\nheader = {'User-Agent':'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:38.0) Gecko/20100101 Firefox/38.0'}\nif not os.path.exists('cookiejar'):\n    print \"there is no cookie,setting\"\n    r = s.get(\"http://passport.csdn.net/account/login\")\n    soup = toJson(r.text)\n    payload ={'username':'jackroyal','password':'123456','lt':soup[\"lt\"],'execution':'e1s1','_eventId':'submit'}\n\n    print payload\n    r = s.post(\"http://passport.csdn.net/account/login\",data=payload,headers=header)\n    s.cookies.save(ignore_discard=True)\n\n    print r.text\nelse:\n    print \"cookie exists,restore\"\n    s.cookies.load(ignore_discard=True)\n\n# r = s.get(\"https://passport.csdn.net/content/loginbox/loginapi.js\")\nr = s.get(\"http://write.blog.csdn.net/postlist\",headers=header)\nprint r.text\n```\n\n\n\n\n# 参考文献\n1 [requests官方文档快速上手——中文版](http://requests-docs-cn.readthedocs.org/zh_CN/latest/user/quickstart.html)\n2 [beautifuisoup官方文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html)\n3 [python的requests如何保存cookie到文件](http://stackoverflow.com/questions/13030095/how-to-save-requests-python-cookies-to-a-file)\n\n\n\n\n\n\n\n","source":"_posts/python-requests-login-csdn-blog.md","raw":"title: 基于python的requests库，模拟登录csdn博客\ndate: 2015-05-23 19:06:04\ntags:\n- python\n- csdn\n- 模拟登录\n- requests\ncategories:\n- python学习笔记\n---\n还是继续我的python学习。以前写的爬虫用的urllib2来实现，也用过scrapy的爬虫框架，这次试试requests，刚开始用，用起来确实比urllib2好，封装的更好一些，使用起来简单方便很多。\n<!-- more -->\n# 安装requests库\n在ubuntu下面安装很简单\n```bash\npip install requests\n```\n就搞定了\n\n# 快速上手的小例子\n下面给个快速入门，最简单的例子\n```python\nimport requests\nr = requests.get('http://www.baidu.com')\nprint r.text\n```\n这段代码，很简单。\n第一行，引入requests库，这是必然的。\n第二行，通过get方式获取baidu首页的内容。\n第三行，把返回的response内容，输出出来\n\n果然很简单，这样就可以发送一个get请求，同理，你还可以使用\n`requests.post`,`requests.put`,`requests.options`,`requests.head`，发送请求，没错就是这么简单，果然比urllib2好用。\n# 模拟登录csdn\n我们需要其他的辅助工具\n### 浏览器：Firefox\n### 浏览器插件：tamper data，firebug\n我们需要tamper data来拦截请求，因为chrome没有这个功能的插件，所以这个只能使用firefox来做（除了拦截请求chrome没有，其他的工作都可以用chrome，看个人喜好吧）。\n\n# 分析登录过程\n## 1 打开登录页面\n我们首先打开csdn的登录页面`https://passport.csdn.net/account/login?ref=toolbar`\n这个链接，前面部分是登录的网址，问号后面的参数，顾名思义，referer，就是你从哪里跳过来的，也许是一个页面跳转到登录的，toolbar就是我自己点击顶部导航栏，然后跳转到登录页面的。\n## 2 清除相关的cookie\n为了排除不必要的干扰，我们先清除掉所有的相关的cookie，这样方便我们分析哪些参数是必须的。\n![firefox中，清除cookie](http://ww1.sinaimg.cn/large/692869a3gw1esegc1itw2j20qu075779.jpg)\n## 3 登录过程分析\n清除了cookie后，我们刷新一下页面`https://passport.csdn.net/account/login?ref=toolbar`，重新获取对应的cookie。\n然后我们就开始用tamper data来拦截请求。\n![使用tamper data](http://ww2.sinaimg.cn/large/692869a3gw1esegfztiz7j20s40ftdjw.jpg)\n我们点击`start tamper`，在网页中填写用户名和密码。点击`登录`，会发出一个请求，然后tamper data会拦截下这个请求，询问我们是否拦截，点击tamper，我们可以在这个请求提交之前，查看请求的内容，还可以做删改。\n![发出第一个登录请求前拦截下来，查看表单内容](http://ww1.sinaimg.cn/large/692869a3gw1esegkslypyj20y20gntdt.jpg)\ncsdn的登录过程比较简单，发送一个登录表单过去，就登录成功了，不过记得修改headers，这是后话。\n## 4 开始模拟登录\n知道登录过程了，我们就开始写登录的代码。\n```python\nimport requests\n# 使用beautifulsoup来处理获取的html内容，这个库需要安装，还是使用pip install beautifulsoup4来安装\nfrom bs4 import BeautifulSoup as bs\n# 这个函数使用来提取流水号的\ndef toJson(str):\n    '''\n    提取lt流水号，将数据化为一个字典\n    '''\n    soup = bs(str)\n    tt = {}\n    # 提取form表单中所有的input标签，以字典的形式来保存name：value\n    for inp in soup.form.find_all('input'):\n        if inp.get('name') != None:\n            tt[inp.get('name')] =inp.get('value')\n    return tt\n    \n# 这行代码，是用来维持cookie的，你后续的操作都不用担心cookie，他会自动带上相应的cookie\ns = requests.Session()\n# 我们需要带表单的参数,这里面有个参数lt,登录操作的流水号，我们需要从html页面中进行提取\npayload ={'username':'jackroyal','password':'123456','lt':soup[\"lt\"],'execution':'e1s1','_eventId':'submit'}\nr = s.post(\"http://passport.csdn.net/account/login\",data=payload,headers=header)\nprint r.text\n```\nok，至此，登录就成功了\n## 5 优化\n当你登录成功后，你会问，我怎么知道登录成功了呢？当你试图去抓取`http://write.blog.csdn.net/postlist`的内容的时候，你会发现一个403的错误，这是为啥呢？\n很简单，`user agent`没有修改，我们用的是默认的`user agent`，这可不是一个正常的用户，所以被网站拒绝了。我们加上他就好了\n```python\nheader = {'User-Agent':'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:38.0) Gecko/20100101 Firefox/38.0'}\nr = s.post(\"http://passport.csdn.net/account/login\",data=payload,headers=header)\nprint r.text\n```\n# 后话\n上面的代码还是太简单，我们都知道cookie是有有效期的，我在做调试的时候，没修改一次，就要模拟登录一次，这样不好，我们要保存cookie，这样下次就不需要重新发送登录请求了\n分享出完整的代码\n```python\n# !/usr/bin/env python\n# -*- coding: utf-8 -*-\n\nimport requests\nimport time\nimport os\nfrom bs4 import BeautifulSoup as bs\nfrom cookielib import LWPCookieJar\n\n\ndef toJson(str):\n    '''\n    提取lt流水号，将数据化为一个字典\n    '''\n    soup = bs(str)\n    tt = {}\n    for inp in soup.form.find_all('input'):\n        if inp.get('name') != None:\n            tt[inp.get('name')] =inp.get('value')\n    return tt\n\n\n# cookie setting\ns = requests.Session()\ns.cookies = LWPCookieJar('cookiejar')\nheader = {'User-Agent':'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:38.0) Gecko/20100101 Firefox/38.0'}\nif not os.path.exists('cookiejar'):\n    print \"there is no cookie,setting\"\n    r = s.get(\"http://passport.csdn.net/account/login\")\n    soup = toJson(r.text)\n    payload ={'username':'jackroyal','password':'123456','lt':soup[\"lt\"],'execution':'e1s1','_eventId':'submit'}\n\n    print payload\n    r = s.post(\"http://passport.csdn.net/account/login\",data=payload,headers=header)\n    s.cookies.save(ignore_discard=True)\n\n    print r.text\nelse:\n    print \"cookie exists,restore\"\n    s.cookies.load(ignore_discard=True)\n\n# r = s.get(\"https://passport.csdn.net/content/loginbox/loginapi.js\")\nr = s.get(\"http://write.blog.csdn.net/postlist\",headers=header)\nprint r.text\n```\n\n\n\n\n# 参考文献\n1 [requests官方文档快速上手——中文版](http://requests-docs-cn.readthedocs.org/zh_CN/latest/user/quickstart.html)\n2 [beautifuisoup官方文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html)\n3 [python的requests如何保存cookie到文件](http://stackoverflow.com/questions/13030095/how-to-save-requests-python-cookies-to-a-file)\n\n\n\n\n\n\n\n","slug":"python-requests-login-csdn-blog","published":1,"updated":"2015-10-29T06:08:45.707Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hnc00244si1ao0h86f6"},{"title":"python学习笔记--一个简单聊天室的实现","date":"2015-03-26T13:33:35.000Z","_content":"最近项目真多,一个接一个的失之交臂,全部都错过了.最近状态有些不好,容易胡思乱想.\n这是来自书上的一个python聊天程序,我照着敲了一遍,然后给扩展了一下,加了多个房间和创建选择房间的功能,写了好久好久,感觉都拖了一个星期了.\n下一步是做一个gui,恩,那将是我的第一个gui程序.\n<!-- more -->\n# 先贴一下代码 server5.py\n```\n# !/usr/bin/env python\n# -*- coding:utf-8-*-\n__author__ = 'chen'\n\nfrom asyncore import  dispatcher\nfrom  asynchat import async_chat\nimport socket,asyncore\n\nPORT = 5005  # 设定程序的端口号\nNAME = 'testchat'  # 给服务器一个名称\n\nclass EndSession(Exception):pass\n\nclass CommandHandler:\n    \"\"\"\n    类似标准库中cmd.Cmd的简单命令处理程序\n    \"\"\"\n    # 如果输入的命令,那么就返回unknown命令\n    def unknown(self, session, cmd):\n        session.push('Unknown command: %s \\r\\n' % cmd)\n    \n    def handle(self, session, line):\n        if not line.strip():\n            return\n        parts = line.split(' ', 1)\n        cmd = parts[0]\n        try:\n            line = parts[1].strip()\n        except IndexError:line = ''\n        meth = getattr(self, 'do_' + cmd, None)\n        try:\n            meth(session, line)\n        except TypeError:\n            self.unknown(session, cmd)\n# 这个类是聊天房间的类,继承上面的类是为了继承执行命令的功能\nclass ChatRoom(CommandHandler):\n    def __init__(self, name, server):\n        self.server = server\n        self.name = name\n        self.sessions = []\n\n    def add(self, session):\n        self.broadcast(session.name + ' has entered the room %s\\r\\n' % self.name)\n        session.push('you can type \"h\" for help\\r\\n')\n        ## 因为后面要将用户挪动房间,所以必须保存每个用户的session,这样才能挪动和删除\n        self.server.users[session.name] = session\n        self.sessions.append(session)\n\n    def remove(self, session):\n        try:\n            self.sessions.remove(session)\n        except: pass # 如果此处的sessions为空或者已经不存在,会出错,此处不上报\n\n    def broadcast(self, line):\n        # 广播,只广播到当前房间\n        for session in self.sessions:\n            session.push(line)\n\n    def do_say(self, session, line):\n        # 说话\n        self.broadcast(session.name + \":\" + line + '\\r\\n')\n\n    def do_login(self, session, line):\n        # login,其实是实现改名字的功能,懒得去改函数名了\n        name = line.strip()\n        if not name:\n            session.push('please enter a name\\r\\n')\n        elif name in self.server.users.keys():\n            session.push('The name %s is taken\\r\\n' % name)\n            session.push('please try again\\r\\n')\n        else:\n            session.server.users[name] = session.server.users.pop(session.name)\n            session.name = name\n            session.enter(self)\n            self.do_list(session, '')\n            session.push('type \"select name\" to choose one room\\r\\n')\n    # 查看当前房间有哪些人\n    def do_look(self, session, line):\n        session.push('the following are in this room:\\r\\n')\n        for other in self.sessions:\n            session.push(other.name + \"\\r\\n\")\n    # 查看当前在线的用户,所有房间的用户\n    def do_who(self, session, line):\n        session.push('the following are logged in:\\r\\n')\n        for name in self.server.users:\n            session.push(name + '\\r\\n')\n    # 查看当前所有的房间\n    def do_list(self, session, line):\n        session.push('the room list is below\\r\\n')\n        session.push('   '.join(self.server.rooms) + '\\r\\n')\n    # 选择房间\n    def do_select(self, session, line):\n        name = line.strip()\n        if not name:\n            session.push('please enter a room name\\r\\n')\n        elif name in self.server.rooms.keys():\n            session.enter(self.server.rooms[name])\n            self.broadcast(' %s ,welcome to join %s\\r\\n'% (session.name, name))\n    # 输出帮助\n    def do_h(self, session, line):\n        session.push('you can use this commands:\\r\\n1,who to see who is on this server(online and offline)\\r\\n2,'\n        'list to see how many room are avaliable\\r\\n3,look to see who are in this room\\r\\n4,login to login online and '\n        'change a name\\r\\n5,create to create a new room')\n    # 创建新房间\n    def do_create(self, session, line):\n        name = line.strip()\n        if not name:\n            session.push('please enter a name\\r\\n')\n        elif name in self.server.rooms.keys():\n            session.push('The room name %s is taken\\r\\n' % name)\n            session.push('please try again\\r\\n')\n        else:\n            ChatRoom(name, self.server)\n            session.server.rooms[name] = ChatRoom(name, self.server)\n            session.push(\"the room %s create successful\\r\\n\" % name)\n            session.enter(session.server.rooms[name])\n# 每个用户回话,这个是重点类\nclass ChatSession(async_chat):\n    def __init__(self, server, sock):\n        async_chat.__init__(self, sock)\n        self.server = server\n        self.set_terminator('\\r\\n')\n        self.data = []\n        self.name = 'visitor' + str(len(server.users))# 初始化用户名,用visitor1之类来表示\n        self.room = self.server.main_room\n        self.enter(self.server.main_room)\n\n    def enter(self, room):\n        try:\n            cur = self.room\n        except AttributeError: pass\n        else: cur.remove(self)\n        self.room = room\n        room.add(self)\n    # 当用户有输入的时候\n    def collect_incoming_data(self, data):\n        self.data.append(data)\n    # 当用户输入终止符的时候\n    def found_terminator(self):\n        line = ''.join(self.data)\n        self.data = []\n        try:\n            self.room.handle(self, line)\n        except EndSession:\n            self.handle_close()\n    # 关闭用户回话\n    def handle_close(self):\n        async_chat.handle_close(self)\n        # self.enter()\n\n# 服务器类,这个也是重点类\nclass ChatServer(dispatcher):\n    def __init__(self, port, name):\n        dispatcher.__init__(self)\n        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)\n        # 端口复用\n        self.set_reuse_addr()\n        self.bind(('', port))\n        self.listen(5)\n        self.sessions = {}\n        self.name = name\n        self.users = {}\n        self.rooms = {}\n        # 新建一个房间hall,因为每个初始登陆的用户没有房间,但是操作是依赖与ChatRoom类的,所以给一个初始默认的房间\n        self.main_room = ChatRoom('hall', self)\n        self.rooms[self.main_room.name] = self.main_room\n\n    def handle_accept(self):\n        conn,addr = self.accept()\n        ChatSession(self, conn)\n        print 'connection attempt from ', addr[0]\n\nif __name__ == \"__main__\":\n    print 'server start'\n    s = ChatServer(PORT, NAME)\n    try:\n        asyncore.loop()\n    except KeyboardInterrupt: print\n```\n效果如图所示\n![运行效果](http://ww3.sinaimg.cn/large/692869a3gw1eqjhaekoz0j20ii0h5q62.jpg)\n","source":"_posts/python-im.md","raw":"title: python学习笔记--一个简单聊天室的实现\ndate: 2015-03-26 21:33:35\ntags:\n- python\n- socket\ncategories:\n- python学习笔记\n---\n最近项目真多,一个接一个的失之交臂,全部都错过了.最近状态有些不好,容易胡思乱想.\n这是来自书上的一个python聊天程序,我照着敲了一遍,然后给扩展了一下,加了多个房间和创建选择房间的功能,写了好久好久,感觉都拖了一个星期了.\n下一步是做一个gui,恩,那将是我的第一个gui程序.\n<!-- more -->\n# 先贴一下代码 server5.py\n```\n# !/usr/bin/env python\n# -*- coding:utf-8-*-\n__author__ = 'chen'\n\nfrom asyncore import  dispatcher\nfrom  asynchat import async_chat\nimport socket,asyncore\n\nPORT = 5005  # 设定程序的端口号\nNAME = 'testchat'  # 给服务器一个名称\n\nclass EndSession(Exception):pass\n\nclass CommandHandler:\n    \"\"\"\n    类似标准库中cmd.Cmd的简单命令处理程序\n    \"\"\"\n    # 如果输入的命令,那么就返回unknown命令\n    def unknown(self, session, cmd):\n        session.push('Unknown command: %s \\r\\n' % cmd)\n    \n    def handle(self, session, line):\n        if not line.strip():\n            return\n        parts = line.split(' ', 1)\n        cmd = parts[0]\n        try:\n            line = parts[1].strip()\n        except IndexError:line = ''\n        meth = getattr(self, 'do_' + cmd, None)\n        try:\n            meth(session, line)\n        except TypeError:\n            self.unknown(session, cmd)\n# 这个类是聊天房间的类,继承上面的类是为了继承执行命令的功能\nclass ChatRoom(CommandHandler):\n    def __init__(self, name, server):\n        self.server = server\n        self.name = name\n        self.sessions = []\n\n    def add(self, session):\n        self.broadcast(session.name + ' has entered the room %s\\r\\n' % self.name)\n        session.push('you can type \"h\" for help\\r\\n')\n        ## 因为后面要将用户挪动房间,所以必须保存每个用户的session,这样才能挪动和删除\n        self.server.users[session.name] = session\n        self.sessions.append(session)\n\n    def remove(self, session):\n        try:\n            self.sessions.remove(session)\n        except: pass # 如果此处的sessions为空或者已经不存在,会出错,此处不上报\n\n    def broadcast(self, line):\n        # 广播,只广播到当前房间\n        for session in self.sessions:\n            session.push(line)\n\n    def do_say(self, session, line):\n        # 说话\n        self.broadcast(session.name + \":\" + line + '\\r\\n')\n\n    def do_login(self, session, line):\n        # login,其实是实现改名字的功能,懒得去改函数名了\n        name = line.strip()\n        if not name:\n            session.push('please enter a name\\r\\n')\n        elif name in self.server.users.keys():\n            session.push('The name %s is taken\\r\\n' % name)\n            session.push('please try again\\r\\n')\n        else:\n            session.server.users[name] = session.server.users.pop(session.name)\n            session.name = name\n            session.enter(self)\n            self.do_list(session, '')\n            session.push('type \"select name\" to choose one room\\r\\n')\n    # 查看当前房间有哪些人\n    def do_look(self, session, line):\n        session.push('the following are in this room:\\r\\n')\n        for other in self.sessions:\n            session.push(other.name + \"\\r\\n\")\n    # 查看当前在线的用户,所有房间的用户\n    def do_who(self, session, line):\n        session.push('the following are logged in:\\r\\n')\n        for name in self.server.users:\n            session.push(name + '\\r\\n')\n    # 查看当前所有的房间\n    def do_list(self, session, line):\n        session.push('the room list is below\\r\\n')\n        session.push('   '.join(self.server.rooms) + '\\r\\n')\n    # 选择房间\n    def do_select(self, session, line):\n        name = line.strip()\n        if not name:\n            session.push('please enter a room name\\r\\n')\n        elif name in self.server.rooms.keys():\n            session.enter(self.server.rooms[name])\n            self.broadcast(' %s ,welcome to join %s\\r\\n'% (session.name, name))\n    # 输出帮助\n    def do_h(self, session, line):\n        session.push('you can use this commands:\\r\\n1,who to see who is on this server(online and offline)\\r\\n2,'\n        'list to see how many room are avaliable\\r\\n3,look to see who are in this room\\r\\n4,login to login online and '\n        'change a name\\r\\n5,create to create a new room')\n    # 创建新房间\n    def do_create(self, session, line):\n        name = line.strip()\n        if not name:\n            session.push('please enter a name\\r\\n')\n        elif name in self.server.rooms.keys():\n            session.push('The room name %s is taken\\r\\n' % name)\n            session.push('please try again\\r\\n')\n        else:\n            ChatRoom(name, self.server)\n            session.server.rooms[name] = ChatRoom(name, self.server)\n            session.push(\"the room %s create successful\\r\\n\" % name)\n            session.enter(session.server.rooms[name])\n# 每个用户回话,这个是重点类\nclass ChatSession(async_chat):\n    def __init__(self, server, sock):\n        async_chat.__init__(self, sock)\n        self.server = server\n        self.set_terminator('\\r\\n')\n        self.data = []\n        self.name = 'visitor' + str(len(server.users))# 初始化用户名,用visitor1之类来表示\n        self.room = self.server.main_room\n        self.enter(self.server.main_room)\n\n    def enter(self, room):\n        try:\n            cur = self.room\n        except AttributeError: pass\n        else: cur.remove(self)\n        self.room = room\n        room.add(self)\n    # 当用户有输入的时候\n    def collect_incoming_data(self, data):\n        self.data.append(data)\n    # 当用户输入终止符的时候\n    def found_terminator(self):\n        line = ''.join(self.data)\n        self.data = []\n        try:\n            self.room.handle(self, line)\n        except EndSession:\n            self.handle_close()\n    # 关闭用户回话\n    def handle_close(self):\n        async_chat.handle_close(self)\n        # self.enter()\n\n# 服务器类,这个也是重点类\nclass ChatServer(dispatcher):\n    def __init__(self, port, name):\n        dispatcher.__init__(self)\n        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)\n        # 端口复用\n        self.set_reuse_addr()\n        self.bind(('', port))\n        self.listen(5)\n        self.sessions = {}\n        self.name = name\n        self.users = {}\n        self.rooms = {}\n        # 新建一个房间hall,因为每个初始登陆的用户没有房间,但是操作是依赖与ChatRoom类的,所以给一个初始默认的房间\n        self.main_room = ChatRoom('hall', self)\n        self.rooms[self.main_room.name] = self.main_room\n\n    def handle_accept(self):\n        conn,addr = self.accept()\n        ChatSession(self, conn)\n        print 'connection attempt from ', addr[0]\n\nif __name__ == \"__main__\":\n    print 'server start'\n    s = ChatServer(PORT, NAME)\n    try:\n        asyncore.loop()\n    except KeyboardInterrupt: print\n```\n效果如图所示\n![运行效果](http://ww3.sinaimg.cn/large/692869a3gw1eqjhaekoz0j20ii0h5q62.jpg)\n","slug":"python-im","published":1,"updated":"2015-10-29T06:08:46.091Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hnk002d4si19ji8779t"},{"title":"python学习笔记--python和beautifulsoup遇到的编码问题","date":"2015-03-29T06:43:45.000Z","_content":"在刚开始使用github pages的时候,我用python写了一个爬虫,计划是从csdn和cnblogs等博客网站上,把自己之前写的博客爬取下来,然后再转换成hexo用的markdown格式,样就可以直接添加到我的github pages.\n>项目主页: https://github.com/Jackroyal/blog2markdown\n\n最近刚好在学习python,刚好就把它给优化了一下,顺便做了个跨平台(哈哈,win和ubuntu都可以跑哈),昨天遇到很蛋疼的问题,一它给了我很多思路帮助我定位问题,.直搞到凌晨两点才弄好.\n非常非常感谢[【总结】Python 2.x中常见字符编码和解码方面的错误及其解决办法](http://www.crifan.com/summary_python_2_x_common_string_encode_decode_error_reason_and_solution/)\n作者做了一个很好的总结,帮助我们定位问题.\n<!-- more -->\n\n# 1 编码类型\n首先确定好你的编码类型,比如一般推荐用utf-8.当确定编码类型后,就要保持统一,不要又弄些GBK的编码在里面.\n+ 1.1  编辑器编码\n    * 我们有时候会犯一个错误,我在py文件的头部声明当前文件是按照utf-8来编码.但是文件实际保存的编却不是utf-8,这样也会导致乱码.建议使用可以查看当前文件编码的编辑器,比如sublime text或者notepad++ 或者pycharm.<br>在sublime下如图所示<br>![sublime显示当前文件编码](http://ww2.sinaimg.cn/large/692869a3gw1eqmn535qb7j208u028t8k.jpg)\n    * 文件编码声明,我们要在py文件的头部添加一行`# -*- coding: utf-8 -*-`,表明我接下来要使用utf-8编码\n+ 1.2  python解释器\n    * 如果是Python的IDLE，如果你没修改defaultencoding，那么就使用默认的字符编码可以通过sys.getdefaultencoding()而获得，比如此处获得是：ascii<br>![win中python解释器编码](http://ww4.sinaimg.cn/large/692869a3gw1eqmnd8fgrjj20b205kabi.jpg)<br>![ubuntu终端解释器的编码](http://ww3.sinaimg.cn/large/692869a3gw1eqmnfd29u7j20k5047wfv.jpg)\n+ 1.3  执行python代码\n    * 其中，很常见的几种动作是：\n        * 打印print对应的所获得的字符\n            * 对于字符串打印,Python的逻辑:\n                * 如果是Unicode字符串,则可以,自动地,编码为对应的终端所用编码,然后正确的显示出来\n                * 比如unicode的字符串,输出到windows的默认编码为GBK的cmd中,则Python可以自动将Unicode编码为GBK,然后输出到cmd中\n                * 个别特殊情况,也会出错:\n                    * 当此unicode字符串中包含某特殊字符,而目标终端的编码集合中,没有此字符,则很明显也是无法实现将Unicode编码为对应的特定编码的字符串,无法正确显示的\n                * 如果是某种编码类型的str,则需要该str的编码类型,和目标终端编码匹配\n                    * 比如GBK的字符串,输出到windows的默认编码为GBK的cmd,则是可以正常输出的\n                    * 此处后来经过代码测试，就发现一个有趣或者说诡异的问题，虽然我们python文件声明的UTF-8编码，但是实际上实际上是用GBK编码，而此时，文件中的字符串，很明显是用GBK存储的，所以，将此GBK字符，输出到GBK的cmd中，是可以正常输出的。即，此处字符串的类型，很明显只和文件所用的实际编码有关，而和文件所声明的代码无关。\n                * 如果是UTF-8的字符串,输出到windows的默认编码为GBK的cmd,就会出错\n                    * 对相应的字符，进行编码（为某种特定类型的字符str），或解码（为对应的unicode类型的字符）\n                    * 比如将当前的某种编码的字符串，解码为Unicode字符串\n                        * 很明显，也是要保证，你字符串本身的编码和所指定的编码，两者之间要一致的\n                        * 比如：decodedUnicode = someUtf8Str.decode(\"UTF-8\")\n                        * 而如果用这样的：decodedUnicode = someGbkStr.decode(\"UTF-8\")，那就会出现错误\n\n# 2 常用方法\n### 2.1 encode和decode\nencode()  unicode编码->其他编码\n\ndecode()  其他编码->unicode编码\n\n使用这两个方法的前提是,你要知道当前是什么编码.然后用对应的编码去进行解码\n比如对于s字符串可以用\n```\ns.encode('utf-8') # 将s由unicode转码成utf-8\ns.decode('GBK') # s是GBK编码,将s转换成unicode\n```\n### 2.2 isinstance()\n```\nisinstance(s , unicode) # 检测s是否是unicode编码\n\nisinstance(s , str) # 检测s是否是str格式\n```\n\n\n# 3 beautifulsoup编码问题\n\n### Beautiful Soup 会按顺序尝试不同的编码将你的文档转换为Unicode：\n+   可以通过from_encoding参数传递编码类型给soup的构造器\n+   通过文档本身找到编码类型：例如XML的声明或者HTML文档http-equiv的META标签。 \n+   如果Beautiful Soup在文档中发现编码类型，它试着使用找到的类型转换文档。 +\n+   但是，如果你明显的指定一个编码类型， \n+   并且成功使用了编码：这时它会忽略任何它在文档中发现的编码类型。\n+   通过嗅探文件开头的一下数据，判断编码。如果编码类型可以被检测到，\n+   它将是这些中的一个：UTF-*编码，EBCDIC或者ASCII。\n+   通过chardet库,嗅探编码，如果你安装了这个库。\n+   UTF-8\n+   Windows-1252\n\n一般来说,bs的自动识别,是不会有问题的,但是在我这里除了问题,具体原因不太清楚\n我的网页上已经声明了是`utf-8`编码\n原来代码如下\n```\n# 这是原来的编码,在win下面乱码\nself.soup = bs((response.read()))\nprint self.soup.originalEncoding   # 此处结果竟然返回Windows-1252\n```\n修改后代码如下\n```\n# win下乱码的关键在这里,beautifulsoup解析的编码不对,我们这里直接指定编码\nself.soup = bs((response.read()), from_encoding='utf-8')\nprint self.soup.originalEncoding   # 修正后代码正确返回'utf-8'\n```\n\n看来beautifulsoup的自动识别编码不能全部依赖.\n好不容易才定位到这里的问题,折腾了一天啊\n这里用了一个方法来检测编码.就是soup.iriginalEncoding属性\n```\nprint self.soup.originalEncoding   # 修正后代码正确返回'utf-8'\n```\n\n这篇博客好水,毕竟不是很懂,所以说不出来\n\nupdate:2015-03-30\n# 4 新技能get\n之前都没好好理解原作者的博客,觉得没办法一个程序在win和ubuntu中不更改正常运行,现在发现,如果把编码改为unicode格式输出,那么系统会自动转换,这样就不存在utf-8编码在windows下cmd乱码了.\n\n\n# 参考文献\n1 [【总结】Python 2.x中常见字符编码和解码方面的错误及其解决办法](http://www.crifan.com/summary_python_2_x_common_string_encode_decode_error_reason_and_solution/)\n2 [【已解决】python中文字符乱码（GB2312，GBK，GB18030相关的问题）](http://www.crifan.com/resolved_python_garbled_chinese_characters_gb2312_gbk_gb18030-related_issues/)\n参考资料太多,贴不过来啊,主要都是cifan的博客,里面资料很多,一步一步都有过程,非常好用,谢谢cifan作者\n","source":"_posts/python-blog-spider.md","raw":"title: python学习笔记--python和beautifulsoup遇到的编码问题\ndate: 2015-03-29 14:43:45\ntags:\n- python\n- 爬虫\ncategories:\n- python学习笔记\n---\n在刚开始使用github pages的时候,我用python写了一个爬虫,计划是从csdn和cnblogs等博客网站上,把自己之前写的博客爬取下来,然后再转换成hexo用的markdown格式,样就可以直接添加到我的github pages.\n>项目主页: https://github.com/Jackroyal/blog2markdown\n\n最近刚好在学习python,刚好就把它给优化了一下,顺便做了个跨平台(哈哈,win和ubuntu都可以跑哈),昨天遇到很蛋疼的问题,一它给了我很多思路帮助我定位问题,.直搞到凌晨两点才弄好.\n非常非常感谢[【总结】Python 2.x中常见字符编码和解码方面的错误及其解决办法](http://www.crifan.com/summary_python_2_x_common_string_encode_decode_error_reason_and_solution/)\n作者做了一个很好的总结,帮助我们定位问题.\n<!-- more -->\n\n# 1 编码类型\n首先确定好你的编码类型,比如一般推荐用utf-8.当确定编码类型后,就要保持统一,不要又弄些GBK的编码在里面.\n+ 1.1  编辑器编码\n    * 我们有时候会犯一个错误,我在py文件的头部声明当前文件是按照utf-8来编码.但是文件实际保存的编却不是utf-8,这样也会导致乱码.建议使用可以查看当前文件编码的编辑器,比如sublime text或者notepad++ 或者pycharm.<br>在sublime下如图所示<br>![sublime显示当前文件编码](http://ww2.sinaimg.cn/large/692869a3gw1eqmn535qb7j208u028t8k.jpg)\n    * 文件编码声明,我们要在py文件的头部添加一行`# -*- coding: utf-8 -*-`,表明我接下来要使用utf-8编码\n+ 1.2  python解释器\n    * 如果是Python的IDLE，如果你没修改defaultencoding，那么就使用默认的字符编码可以通过sys.getdefaultencoding()而获得，比如此处获得是：ascii<br>![win中python解释器编码](http://ww4.sinaimg.cn/large/692869a3gw1eqmnd8fgrjj20b205kabi.jpg)<br>![ubuntu终端解释器的编码](http://ww3.sinaimg.cn/large/692869a3gw1eqmnfd29u7j20k5047wfv.jpg)\n+ 1.3  执行python代码\n    * 其中，很常见的几种动作是：\n        * 打印print对应的所获得的字符\n            * 对于字符串打印,Python的逻辑:\n                * 如果是Unicode字符串,则可以,自动地,编码为对应的终端所用编码,然后正确的显示出来\n                * 比如unicode的字符串,输出到windows的默认编码为GBK的cmd中,则Python可以自动将Unicode编码为GBK,然后输出到cmd中\n                * 个别特殊情况,也会出错:\n                    * 当此unicode字符串中包含某特殊字符,而目标终端的编码集合中,没有此字符,则很明显也是无法实现将Unicode编码为对应的特定编码的字符串,无法正确显示的\n                * 如果是某种编码类型的str,则需要该str的编码类型,和目标终端编码匹配\n                    * 比如GBK的字符串,输出到windows的默认编码为GBK的cmd,则是可以正常输出的\n                    * 此处后来经过代码测试，就发现一个有趣或者说诡异的问题，虽然我们python文件声明的UTF-8编码，但是实际上实际上是用GBK编码，而此时，文件中的字符串，很明显是用GBK存储的，所以，将此GBK字符，输出到GBK的cmd中，是可以正常输出的。即，此处字符串的类型，很明显只和文件所用的实际编码有关，而和文件所声明的代码无关。\n                * 如果是UTF-8的字符串,输出到windows的默认编码为GBK的cmd,就会出错\n                    * 对相应的字符，进行编码（为某种特定类型的字符str），或解码（为对应的unicode类型的字符）\n                    * 比如将当前的某种编码的字符串，解码为Unicode字符串\n                        * 很明显，也是要保证，你字符串本身的编码和所指定的编码，两者之间要一致的\n                        * 比如：decodedUnicode = someUtf8Str.decode(\"UTF-8\")\n                        * 而如果用这样的：decodedUnicode = someGbkStr.decode(\"UTF-8\")，那就会出现错误\n\n# 2 常用方法\n### 2.1 encode和decode\nencode()  unicode编码->其他编码\n\ndecode()  其他编码->unicode编码\n\n使用这两个方法的前提是,你要知道当前是什么编码.然后用对应的编码去进行解码\n比如对于s字符串可以用\n```\ns.encode('utf-8') # 将s由unicode转码成utf-8\ns.decode('GBK') # s是GBK编码,将s转换成unicode\n```\n### 2.2 isinstance()\n```\nisinstance(s , unicode) # 检测s是否是unicode编码\n\nisinstance(s , str) # 检测s是否是str格式\n```\n\n\n# 3 beautifulsoup编码问题\n\n### Beautiful Soup 会按顺序尝试不同的编码将你的文档转换为Unicode：\n+   可以通过from_encoding参数传递编码类型给soup的构造器\n+   通过文档本身找到编码类型：例如XML的声明或者HTML文档http-equiv的META标签。 \n+   如果Beautiful Soup在文档中发现编码类型，它试着使用找到的类型转换文档。 +\n+   但是，如果你明显的指定一个编码类型， \n+   并且成功使用了编码：这时它会忽略任何它在文档中发现的编码类型。\n+   通过嗅探文件开头的一下数据，判断编码。如果编码类型可以被检测到，\n+   它将是这些中的一个：UTF-*编码，EBCDIC或者ASCII。\n+   通过chardet库,嗅探编码，如果你安装了这个库。\n+   UTF-8\n+   Windows-1252\n\n一般来说,bs的自动识别,是不会有问题的,但是在我这里除了问题,具体原因不太清楚\n我的网页上已经声明了是`utf-8`编码\n原来代码如下\n```\n# 这是原来的编码,在win下面乱码\nself.soup = bs((response.read()))\nprint self.soup.originalEncoding   # 此处结果竟然返回Windows-1252\n```\n修改后代码如下\n```\n# win下乱码的关键在这里,beautifulsoup解析的编码不对,我们这里直接指定编码\nself.soup = bs((response.read()), from_encoding='utf-8')\nprint self.soup.originalEncoding   # 修正后代码正确返回'utf-8'\n```\n\n看来beautifulsoup的自动识别编码不能全部依赖.\n好不容易才定位到这里的问题,折腾了一天啊\n这里用了一个方法来检测编码.就是soup.iriginalEncoding属性\n```\nprint self.soup.originalEncoding   # 修正后代码正确返回'utf-8'\n```\n\n这篇博客好水,毕竟不是很懂,所以说不出来\n\nupdate:2015-03-30\n# 4 新技能get\n之前都没好好理解原作者的博客,觉得没办法一个程序在win和ubuntu中不更改正常运行,现在发现,如果把编码改为unicode格式输出,那么系统会自动转换,这样就不存在utf-8编码在windows下cmd乱码了.\n\n\n# 参考文献\n1 [【总结】Python 2.x中常见字符编码和解码方面的错误及其解决办法](http://www.crifan.com/summary_python_2_x_common_string_encode_decode_error_reason_and_solution/)\n2 [【已解决】python中文字符乱码（GB2312，GBK，GB18030相关的问题）](http://www.crifan.com/resolved_python_garbled_chinese_characters_gb2312_gbk_gb18030-related_issues/)\n参考资料太多,贴不过来啊,主要都是cifan的博客,里面资料很多,一步一步都有过程,非常好用,谢谢cifan作者\n","slug":"python-blog-spider","published":1,"updated":"2015-10-29T06:08:46.478Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hnp002h4si17p1n705l"},{"title":"php中的bool值和类型转换","date":"2015-07-20T06:23:21.000Z","_content":"最近在写php,发现有个问题一直无法避免,那就是关于php的bool值和类型转换.\n以前每次遇到要校验一个变量`$a`,是否为空,都是使用`$a==''`去判断,感觉不是很懂,反正一直这样用,也没出太多纰漏,而没有理会什么NUll,'',0之类的其他值.今天决定研究下,把它彻底搞清楚.\n<!-- more -->\n# 1 php的数据类型\nphp支持原始的8总数据类型.\n4总标量类型:\n- boolean\n- integer\n- float(也称作double类型)\n- string\n2种复合类型\n- array(数组)\n- object(对象)\n2种特殊类型\n- resource(资源)\n- NULL(无类型)\n实际上 double 和 float 是相同的，由于一些历史的原因，这两个名称同时存在。\n变量的类型通常不是由程序员设定的，确切地说，是由PHP根据该变量使用的上下文在运行时决定的。\n前面几种类型很好理解,现在重点看一下resource类型和NULL类型\n1. `resource` 是一种特殊变量，保存了到外部资源的一个引用。资源是通过专门的函数来建立和使用的。由于资源类型变量保存有为打开文件、数据库连接、图形画布区域等的特殊句柄，因此将其它类型的值转换为资源没有意义。\n2. `NULL`,特殊的NULL值表示一个变量没有值。NULL类型唯一可能的值就是 NULL。在下列情况下一个变量被认为是NULL：\n- 被赋值为 NULL。\n- 尚未被赋值。\n- 被 unset()。\n\n# 2 常用的比较函数\n### empty()\n这个函数最近经常见到,它比较有特点.\n如果 var 是非空或非零的值，则empty()返回`FALSE`。\n换句话说，\"\"、0、\"0\"、NULL、FALSE、array()、var $var以及没有任何属性的对象都将\n被认为是空的，返回 TRUE。\n如果变量没有赋值,empty()也不会报错.\n\n### is_set()\n这个函数和is_null()刚好相反,如果一个函数的is_null()返回`true`,那么它的is_set()则必定返回相反值,`false`.\n\n### is_null()\n所有的`is_`开头的函数,都不会进行类型转换,例如is_bool('0'),返回false,因为'0'不是一个布尔类型的值.\n详细对比看下图\n![使用 PHP 函数对变量 $x 进行比较](http://ww4.sinaimg.cn/large/692869a3gw1euak04nwitj20nf0i2432.jpg)\n\n\n更多更详细的比较,大家看这里[php类型比较表](http://php.net/manual/zh/types.comparisons.php)\n","source":"_posts/php-boolean-value.md","raw":"title: php中的bool值和类型转换\ndate: 2015-07-20 14:23:21\ntags:\n- php\n- bool\ncategories:\n- php\n---\n最近在写php,发现有个问题一直无法避免,那就是关于php的bool值和类型转换.\n以前每次遇到要校验一个变量`$a`,是否为空,都是使用`$a==''`去判断,感觉不是很懂,反正一直这样用,也没出太多纰漏,而没有理会什么NUll,'',0之类的其他值.今天决定研究下,把它彻底搞清楚.\n<!-- more -->\n# 1 php的数据类型\nphp支持原始的8总数据类型.\n4总标量类型:\n- boolean\n- integer\n- float(也称作double类型)\n- string\n2种复合类型\n- array(数组)\n- object(对象)\n2种特殊类型\n- resource(资源)\n- NULL(无类型)\n实际上 double 和 float 是相同的，由于一些历史的原因，这两个名称同时存在。\n变量的类型通常不是由程序员设定的，确切地说，是由PHP根据该变量使用的上下文在运行时决定的。\n前面几种类型很好理解,现在重点看一下resource类型和NULL类型\n1. `resource` 是一种特殊变量，保存了到外部资源的一个引用。资源是通过专门的函数来建立和使用的。由于资源类型变量保存有为打开文件、数据库连接、图形画布区域等的特殊句柄，因此将其它类型的值转换为资源没有意义。\n2. `NULL`,特殊的NULL值表示一个变量没有值。NULL类型唯一可能的值就是 NULL。在下列情况下一个变量被认为是NULL：\n- 被赋值为 NULL。\n- 尚未被赋值。\n- 被 unset()。\n\n# 2 常用的比较函数\n### empty()\n这个函数最近经常见到,它比较有特点.\n如果 var 是非空或非零的值，则empty()返回`FALSE`。\n换句话说，\"\"、0、\"0\"、NULL、FALSE、array()、var $var以及没有任何属性的对象都将\n被认为是空的，返回 TRUE。\n如果变量没有赋值,empty()也不会报错.\n\n### is_set()\n这个函数和is_null()刚好相反,如果一个函数的is_null()返回`true`,那么它的is_set()则必定返回相反值,`false`.\n\n### is_null()\n所有的`is_`开头的函数,都不会进行类型转换,例如is_bool('0'),返回false,因为'0'不是一个布尔类型的值.\n详细对比看下图\n![使用 PHP 函数对变量 $x 进行比较](http://ww4.sinaimg.cn/large/692869a3gw1euak04nwitj20nf0i2432.jpg)\n\n\n更多更详细的比较,大家看这里[php类型比较表](http://php.net/manual/zh/types.comparisons.php)\n","slug":"php-boolean-value","published":1,"updated":"2015-10-29T06:08:46.797Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hnt002l4si1a2qaabwr"},{"title":"opencv中LBPH的人脸识别代码分析","date":"2015-05-06T14:32:42.000Z","_content":"我开始用opencv的时候，用的是opencv最新的3.0版本。不过我死活找不到LBPH的代码，网上的教程也都是opencv 2.4的，so  我也去下一份2.4的源码来读读。\n<!-- more -->\nopencv目前支持一下三种方法来实现人脸识别：\n+ **Eigenfaces特征脸createEigenFaceRecognizer()**\n+ **Fisherfaces createFisherFaceRecognizer()**\n+ **Local Binary Patterns Histograms局部二值直方图 createLBPHFaceRecognizer()**\n\n我今天读了一下LBPH的代码。\n自动人脸识别就是如何从一幅图像中提取有意义的特征，把它们放入一种有用的表示方式，然后对他们进行一些分类。<br>特征脸方法描述了一个全面的方法来识别人脸：面部图像是一个点，这个点是从高维图像空间找到它在低维空间的表示，这样分类变得很简单。低维子空间低维是使用主元分析(Principal Component Analysis,PCA)找到的，它可以找拥有最大方差的那个轴。虽然这样的转换是从最佳重建角度考虑的，但是他没有把标签问题考虑进去。想象一个情况，如果变化是基于外部来源，比如光照。轴的最大方差不一定包含任何有鉴别性的信息，因此此时的分类是不可能的。因此，一个使用线性鉴别(Linear Discriminant Analysis,LDA)的特定类投影方法被提出来解决人脸识别问题。其中一个基本的想法就是，使类内方差最小的同时，使类外方差最大。<br>近年来，各种局部特征提取方法出现。为了避免输入的图像的高维数据，仅仅使用的局部特征描述图像的方法被提出，提取的特征(很有希望的)对于局部遮挡、光照变化、小样本等情况更强健。有关局部特征提取的方法有盖伯小波(Gabor Waelets)，离散傅立叶变换(Discrete Cosinus Transform,DCT)，局部二值模式(Local Binary Patterns,LBP)。使用什么方法来提取时域空间的局部特征依旧是一个开放性的研究问题，因为空间信息是潜在有用的信息。\n","source":"_posts/opencv-lbph-source-code-analysis.md","raw":"title: opencv中LBPH的人脸识别代码分析\ndate: 2015-05-06 22:32:42\ntags:\n- 图像处理\n- opencv\n- lbph\ncategories:\n- 图像处理\n---\n我开始用opencv的时候，用的是opencv最新的3.0版本。不过我死活找不到LBPH的代码，网上的教程也都是opencv 2.4的，so  我也去下一份2.4的源码来读读。\n<!-- more -->\nopencv目前支持一下三种方法来实现人脸识别：\n+ **Eigenfaces特征脸createEigenFaceRecognizer()**\n+ **Fisherfaces createFisherFaceRecognizer()**\n+ **Local Binary Patterns Histograms局部二值直方图 createLBPHFaceRecognizer()**\n\n我今天读了一下LBPH的代码。\n自动人脸识别就是如何从一幅图像中提取有意义的特征，把它们放入一种有用的表示方式，然后对他们进行一些分类。<br>特征脸方法描述了一个全面的方法来识别人脸：面部图像是一个点，这个点是从高维图像空间找到它在低维空间的表示，这样分类变得很简单。低维子空间低维是使用主元分析(Principal Component Analysis,PCA)找到的，它可以找拥有最大方差的那个轴。虽然这样的转换是从最佳重建角度考虑的，但是他没有把标签问题考虑进去。想象一个情况，如果变化是基于外部来源，比如光照。轴的最大方差不一定包含任何有鉴别性的信息，因此此时的分类是不可能的。因此，一个使用线性鉴别(Linear Discriminant Analysis,LDA)的特定类投影方法被提出来解决人脸识别问题。其中一个基本的想法就是，使类内方差最小的同时，使类外方差最大。<br>近年来，各种局部特征提取方法出现。为了避免输入的图像的高维数据，仅仅使用的局部特征描述图像的方法被提出，提取的特征(很有希望的)对于局部遮挡、光照变化、小样本等情况更强健。有关局部特征提取的方法有盖伯小波(Gabor Waelets)，离散傅立叶变换(Discrete Cosinus Transform,DCT)，局部二值模式(Local Binary Patterns,LBP)。使用什么方法来提取时域空间的局部特征依旧是一个开放性的研究问题，因为空间信息是潜在有用的信息。\n","slug":"opencv-lbph-source-code-analysis","published":1,"updated":"2015-09-29T11:41:23.730Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hnx002r4si12mxqcxdr"},{"title":"win8中使用vs2010配置opencv","date":"2015-05-15T11:56:06.000Z","_content":"今天在师兄的帮助下,总算配置好了opencv.\n# 1 系统环境和软件版本\n操作系统:win8 64位\nvs版本:vs2010 32位\nopencv版本:opencv 2.4.10\n<!-- more -->\n# 2 配置opencv\n安装vs比较简单,这里不再赘述.\n现在说下配置opencv.\n网上有很多相关的配置,都是设置环境变量,然后添加库目录,包含目录,blablabla.\n这样做的坏处是,每次我新建一个项目,都要重复以上操作,这样岂不是很蛋疼.\n如果你移植你的程序给别人,别人也还要去配置这些东西才能够运行,是不是很不方便?\n所以,师兄教给我简单粗暴的办法,直接把相关文件手动复制到vs的目录下,这样就没这么多事了.\n**缺点:每次都需要手动设置你所需要调用的lib文件**\n\n## 解压opencv到某个目录\n这个很简单,双击那个exe,选择一个目录,就会把opencv的文件解压到你设定的那个目录.\n我将它解压到`D:/opencv`下.\n## 复制include文件夹\n复制`D:\\opencv\\build\\include`目录下的`opencv`和`opencv2`\n到`C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\include`.\n![opencv解压后的include目录](http://ww3.sinaimg.cn/large/692869a3gw1es5atg7oimj20kw081ta4.jpg)\n![复制以后的效果截图](http://ww2.sinaimg.cn/large/692869a3gw1es5az6qsa7j20jc099jtf.jpg)\n## 复制lib文件夹\n同理,复制lib文件夹\n从`D:\\opencv\\build\\x86\\vc10\\lib`复制到`C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\lib`\n如果你的程序是win32就选择x86,如果你写的程序是64位的,就复制x64的程序\n## 复制bin文件夹\n复制bin目录下的东西,我们只需要系统找得到就行,所以我们这里采用环境变量的搞法\n\n我们修改path变量,在后面添加`;d:\\opencv\\build\\x86\\vc10\\bin`,效果如图所示<br>\n![修改path变量,添加opencv的bin目录路径](http://ww2.sinaimg.cn/large/692869a3gw1es5bew5vcjj20e10g4go8.jpg)\n# 3 写代码调试\n代码如下:\n```c#\n# include <opencv2/opencv.hpp>\n# include <iostream>\n# include <string>\n# ifdef _DEBUG\n# pragma comment(lib,\"opencv_core2410d.lib\")\n# pragma comment(lib,\"opencv_highgui2410d.lib\")\n# else\n# pragma comment(lib,\"opencv_core2410.lib\")\n# pragma comment(lib,\"opencv_highgui2410.lib\")\n# endif\nusing namespace cv;\nusing namespace std;\nint main()\n{\n    Mat img = imread(\"ie8-2.png\");\n    if(img.empty())\n    {\n        cout<<\"error\";\n        return -1;\n   }\n   imshow(\"xx的靓照\",img);\n   waitKey();\n}\n```\n注意一下这段宏设置\n```\n# ifdef _DEBUG\n# pragma comment(lib,\"opencv_core2410d.lib\")\n# pragma comment(lib,\"opencv_highgui2410d.lib\")\n# else\n# pragma comment(lib,\"opencv_core2410.lib\")\n# pragma comment(lib,\"opencv_highgui2410.lib\")\n# endif\n```\ndebug和release,分别调用对应的lib\n如果你当前是debug模式\n```\n# pragma comment(lib,\"opencv_core2410d.lib\")\n# pragma comment(lib,\"opencv_highgui2410d.lib\")\n```\n这段代码是必须要的,以后调用相应的lib文件,我们都要手动在头部加入这句话才行\n否则,你会看到下面这堆东西\n```\n1>  test.cpp\n1>ManifestResourceCompile:\n1>  所有输出均为最新。\n1>test.obj : error LNK2019: 无法解析的外部符号 \"int __cdecl cv::waitKey(int)\" (?waitKey@cv@@YAHH@Z)，该符号在函数 _main 中被引用\n1>test.obj : error LNK2019: 无法解析的外部符号 \"void __cdecl cv::imshow(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class cv::_InputArray const &)\" (?imshow@cv@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV_InputArray@1@@Z)，该符号在函数 _main 中被引用\n1>test.obj : error LNK2019: 无法解析的外部符号 \"public: __thiscall cv::_InputArray::_InputArray(class cv::Mat const &)\" (??0_InputArray@cv@@QAE@ABVMat@1@@Z)，该符号在函数 _main 中被引用\n1>test.obj : error LNK2019: 无法解析的外部符号 \"class cv::Mat __cdecl cv::imread(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int)\" (?imread@cv@@YA?AVMat@1@ABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@H@Z)，该符号在函数 _main 中被引用\n1>test.obj : error LNK2019: 无法解析的外部符号 \"void __cdecl cv::fastFree(void *)\" (?fastFree@cv@@YAXPAX@Z)，该符号在函数 \"public: __thiscall cv::Mat::~Mat(void)\" (??1Mat@cv@@QAE@XZ) 中被引用\n1>test.obj : error LNK2019: 无法解析的外部符号 \"public: void __thiscall cv::Mat::deallocate(void)\" (?deallocate@Mat@cv@@QAEXXZ)，该符号在函数 \"public: void __thiscall cv::Mat::release(void)\" (?release@Mat@cv@@QAEXXZ) 中被引用\n1>test.obj : error LNK2019: 无法解析的外部符号 \"int __cdecl cv::_interlockedExchangeAdd(int *,int)\" (?_interlockedExchangeAdd@cv@@YAHPAHH@Z)，该符号在函数 \"public: void __thiscall cv::Mat::release(void)\" (?release@Mat@cv@@QAEXXZ) 中被引用\n1>C:\\Users\\chenhao\\documents\\visual studio 2010\\Projects\\b\\Debug\\b.exe : fatal error LNK1120: 7 个无法解析的外部命令\n1>\n1>生成失败。\n1>\n1>已用时间 00:00:03.71\n========== 生成: 成功 0 个，失败 1 个，最新 0 个，跳过 0 个 ==========\n```\n\nok,打完收工!\n\n\nps:上述操作完,应该就好了.我还遇到一个奇葩问题\n编译和生成解决方案没有问题，但是开始执行就出现应用程序无法正常启动 0xc000007b错误窗口\n最后,原来是权限问题,使用管理员权限打开vs就解决了,win7下找兼容性设置,以管理员权限运行\n我的win8没有找到兼容性设置,如图所示操作,每次都能以管理员权限打开vs\n![win8使用管理员权限运行vs2010](http://ww4.sinaimg.cn/large/692869a3gw1es5bpz7mkqj20mm0giq7k.jpg)\n\n# 参考文献\n1 [VS2010+Opencv-2.4.0的配置攻略](http://www.cnblogs.com/freedomshe/archive/2012/04/25/2470540.html)\n\n\n","source":"_posts/opencv-and-vs2010-in-win8.md","raw":"title: win8中使用vs2010配置opencv\ndate: 2015-05-15 19:56:06\ntags:\n- 软件安装与技巧\n- vs2010\n- opencv\n- win8\ncategories:\n- 软件安装与技巧\n---\n今天在师兄的帮助下,总算配置好了opencv.\n# 1 系统环境和软件版本\n操作系统:win8 64位\nvs版本:vs2010 32位\nopencv版本:opencv 2.4.10\n<!-- more -->\n# 2 配置opencv\n安装vs比较简单,这里不再赘述.\n现在说下配置opencv.\n网上有很多相关的配置,都是设置环境变量,然后添加库目录,包含目录,blablabla.\n这样做的坏处是,每次我新建一个项目,都要重复以上操作,这样岂不是很蛋疼.\n如果你移植你的程序给别人,别人也还要去配置这些东西才能够运行,是不是很不方便?\n所以,师兄教给我简单粗暴的办法,直接把相关文件手动复制到vs的目录下,这样就没这么多事了.\n**缺点:每次都需要手动设置你所需要调用的lib文件**\n\n## 解压opencv到某个目录\n这个很简单,双击那个exe,选择一个目录,就会把opencv的文件解压到你设定的那个目录.\n我将它解压到`D:/opencv`下.\n## 复制include文件夹\n复制`D:\\opencv\\build\\include`目录下的`opencv`和`opencv2`\n到`C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\include`.\n![opencv解压后的include目录](http://ww3.sinaimg.cn/large/692869a3gw1es5atg7oimj20kw081ta4.jpg)\n![复制以后的效果截图](http://ww2.sinaimg.cn/large/692869a3gw1es5az6qsa7j20jc099jtf.jpg)\n## 复制lib文件夹\n同理,复制lib文件夹\n从`D:\\opencv\\build\\x86\\vc10\\lib`复制到`C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\lib`\n如果你的程序是win32就选择x86,如果你写的程序是64位的,就复制x64的程序\n## 复制bin文件夹\n复制bin目录下的东西,我们只需要系统找得到就行,所以我们这里采用环境变量的搞法\n\n我们修改path变量,在后面添加`;d:\\opencv\\build\\x86\\vc10\\bin`,效果如图所示<br>\n![修改path变量,添加opencv的bin目录路径](http://ww2.sinaimg.cn/large/692869a3gw1es5bew5vcjj20e10g4go8.jpg)\n# 3 写代码调试\n代码如下:\n```c#\n# include <opencv2/opencv.hpp>\n# include <iostream>\n# include <string>\n# ifdef _DEBUG\n# pragma comment(lib,\"opencv_core2410d.lib\")\n# pragma comment(lib,\"opencv_highgui2410d.lib\")\n# else\n# pragma comment(lib,\"opencv_core2410.lib\")\n# pragma comment(lib,\"opencv_highgui2410.lib\")\n# endif\nusing namespace cv;\nusing namespace std;\nint main()\n{\n    Mat img = imread(\"ie8-2.png\");\n    if(img.empty())\n    {\n        cout<<\"error\";\n        return -1;\n   }\n   imshow(\"xx的靓照\",img);\n   waitKey();\n}\n```\n注意一下这段宏设置\n```\n# ifdef _DEBUG\n# pragma comment(lib,\"opencv_core2410d.lib\")\n# pragma comment(lib,\"opencv_highgui2410d.lib\")\n# else\n# pragma comment(lib,\"opencv_core2410.lib\")\n# pragma comment(lib,\"opencv_highgui2410.lib\")\n# endif\n```\ndebug和release,分别调用对应的lib\n如果你当前是debug模式\n```\n# pragma comment(lib,\"opencv_core2410d.lib\")\n# pragma comment(lib,\"opencv_highgui2410d.lib\")\n```\n这段代码是必须要的,以后调用相应的lib文件,我们都要手动在头部加入这句话才行\n否则,你会看到下面这堆东西\n```\n1>  test.cpp\n1>ManifestResourceCompile:\n1>  所有输出均为最新。\n1>test.obj : error LNK2019: 无法解析的外部符号 \"int __cdecl cv::waitKey(int)\" (?waitKey@cv@@YAHH@Z)，该符号在函数 _main 中被引用\n1>test.obj : error LNK2019: 无法解析的外部符号 \"void __cdecl cv::imshow(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class cv::_InputArray const &)\" (?imshow@cv@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV_InputArray@1@@Z)，该符号在函数 _main 中被引用\n1>test.obj : error LNK2019: 无法解析的外部符号 \"public: __thiscall cv::_InputArray::_InputArray(class cv::Mat const &)\" (??0_InputArray@cv@@QAE@ABVMat@1@@Z)，该符号在函数 _main 中被引用\n1>test.obj : error LNK2019: 无法解析的外部符号 \"class cv::Mat __cdecl cv::imread(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int)\" (?imread@cv@@YA?AVMat@1@ABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@H@Z)，该符号在函数 _main 中被引用\n1>test.obj : error LNK2019: 无法解析的外部符号 \"void __cdecl cv::fastFree(void *)\" (?fastFree@cv@@YAXPAX@Z)，该符号在函数 \"public: __thiscall cv::Mat::~Mat(void)\" (??1Mat@cv@@QAE@XZ) 中被引用\n1>test.obj : error LNK2019: 无法解析的外部符号 \"public: void __thiscall cv::Mat::deallocate(void)\" (?deallocate@Mat@cv@@QAEXXZ)，该符号在函数 \"public: void __thiscall cv::Mat::release(void)\" (?release@Mat@cv@@QAEXXZ) 中被引用\n1>test.obj : error LNK2019: 无法解析的外部符号 \"int __cdecl cv::_interlockedExchangeAdd(int *,int)\" (?_interlockedExchangeAdd@cv@@YAHPAHH@Z)，该符号在函数 \"public: void __thiscall cv::Mat::release(void)\" (?release@Mat@cv@@QAEXXZ) 中被引用\n1>C:\\Users\\chenhao\\documents\\visual studio 2010\\Projects\\b\\Debug\\b.exe : fatal error LNK1120: 7 个无法解析的外部命令\n1>\n1>生成失败。\n1>\n1>已用时间 00:00:03.71\n========== 生成: 成功 0 个，失败 1 个，最新 0 个，跳过 0 个 ==========\n```\n\nok,打完收工!\n\n\nps:上述操作完,应该就好了.我还遇到一个奇葩问题\n编译和生成解决方案没有问题，但是开始执行就出现应用程序无法正常启动 0xc000007b错误窗口\n最后,原来是权限问题,使用管理员权限打开vs就解决了,win7下找兼容性设置,以管理员权限运行\n我的win8没有找到兼容性设置,如图所示操作,每次都能以管理员权限打开vs\n![win8使用管理员权限运行vs2010](http://ww4.sinaimg.cn/large/692869a3gw1es5bpz7mkqj20mm0giq7k.jpg)\n\n# 参考文献\n1 [VS2010+Opencv-2.4.0的配置攻略](http://www.cnblogs.com/freedomshe/archive/2012/04/25/2470540.html)\n\n\n","slug":"opencv-and-vs2010-in-win8","published":1,"updated":"2015-10-29T06:08:47.548Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5ho200304si1yxan6fgg"},{"title":"新的开始","date":"2014-11-26T13:29:15.000Z","_content":"\n今天**折腾**了一天,终于弄好了,[我的博客](http://jackroyal.github.io \"搁浅St的博客\"),正式落户Github.<!-- more -->\n![GitHub Mark](http://github.global.ssl.fastly.net/images/modules/logos_page/GitHub-Mark.png \"GitHub Mark\")\n","source":"_posts/new-start.md","raw":"title: 新的开始\ndate: 2014-11-26 21:29:15\ntags:\n- hexo\n---\n\n今天**折腾**了一天,终于弄好了,[我的博客](http://jackroyal.github.io \"搁浅St的博客\"),正式落户Github.<!-- more -->\n![GitHub Mark](http://github.global.ssl.fastly.net/images/modules/logos_page/GitHub-Mark.png \"GitHub Mark\")\n","slug":"new-start","published":1,"updated":"2015-09-29T11:41:23.730Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5ho700394si1ydtjg8d0"},{"title":"Linux下使用github","date":"2015-01-18T16:53:48.000Z","_content":">我的惰性真是病入膏肓了，已经整整3周没有在github上提交东西了，今天看了《模拟游戏》，索性又捡起来了。下面来总结一下linux下github的使用，也算是给自己一个备份，因为我自己也是老忘记。\n<!-- more -->\n使用环境：Ubuntu 14.04\n## 1 安装git相关软件\n我的Ubuntu里面没有自带git相关软件，所以我们首先需要安装它，很简单。\n```\nsudo apt-get install git \n```\n## 2 初始化git的设置\n接下来，进行初始化设置，也就是设置你的github账号和密码\n```\ngit config --global user.name \"zhangsan\"# 其中的“zhangsan”输入的就是你注册时候的用户名，这步是设置你提交时候默认的用户名\n# 之后设置提交时候默认的邮箱，在命令行输入：\ngit config --global user.email \"haha@qq.com\"\n# 其中的“haha@qq.com”就是你注册时候用的邮箱，当然也可以用别的邮箱，用别的邮箱的时候你必须在github的主页上设置里面把用的邮箱添加进去\n```\n## 3 开始使用github\n1 首先你的github上应该有一个库，如果没有的话，就去github网站上新建一个库，或者fork一个别人的项目，以下的操作都是建立在这个基础上，`假设存在一个库https://github.com/Jackroyal/test.git`.\n如果你的github上已经有库了，可以忽略第1步直接进入第2步\n2 我们在本地新建一个文件夹(命名随你便，我取名叫做test_git)\n```\nmkdir test_git\n```\n3 将远程的库复制下来，我们使用git clone命令来完成\n```\n# 如果你的环境不在test_git目录\n# cd test_git\n# 如果在test_git中\ngit clone https://github.com/Jackroyal/test.git# 他会在你的本地新建一个test文件夹\ncd test\n# 接下来新建一个测试文件\ntouch test.md\n# 修改测试文件的内容\nvi test.md\n# 提交刚才所做的更改\ngit add .\ngit commit -m \"首次提交\"\n```\n3 push提交到github\n```\ngit remote add origin https://github.com/Jackroyal/test.git\ngit push\n```\n之后会提示你输入用户名密码，你输入你github账号和密码就行了\n打完收工，睡觉\n后面会陆续介绍hexo在Linux下的使用\n# 参考文献\n1 [ubuntu 下 github 简单的使用教程](http://blog.chinaunix.net/uid-29040159-id-3799719.html)\n2 [Github入门级使用攻略](http://blog.csdn.net/pony_maggie/article/details/23207847)\n","source":"_posts/linux下使用github.md","raw":"title: Linux下使用github\ndate: 2015-01-19 00:53:48\ntags:\n- Linux\n- github\ncategories:\n- Linux\n---\n>我的惰性真是病入膏肓了，已经整整3周没有在github上提交东西了，今天看了《模拟游戏》，索性又捡起来了。下面来总结一下linux下github的使用，也算是给自己一个备份，因为我自己也是老忘记。\n<!-- more -->\n使用环境：Ubuntu 14.04\n## 1 安装git相关软件\n我的Ubuntu里面没有自带git相关软件，所以我们首先需要安装它，很简单。\n```\nsudo apt-get install git \n```\n## 2 初始化git的设置\n接下来，进行初始化设置，也就是设置你的github账号和密码\n```\ngit config --global user.name \"zhangsan\"# 其中的“zhangsan”输入的就是你注册时候的用户名，这步是设置你提交时候默认的用户名\n# 之后设置提交时候默认的邮箱，在命令行输入：\ngit config --global user.email \"haha@qq.com\"\n# 其中的“haha@qq.com”就是你注册时候用的邮箱，当然也可以用别的邮箱，用别的邮箱的时候你必须在github的主页上设置里面把用的邮箱添加进去\n```\n## 3 开始使用github\n1 首先你的github上应该有一个库，如果没有的话，就去github网站上新建一个库，或者fork一个别人的项目，以下的操作都是建立在这个基础上，`假设存在一个库https://github.com/Jackroyal/test.git`.\n如果你的github上已经有库了，可以忽略第1步直接进入第2步\n2 我们在本地新建一个文件夹(命名随你便，我取名叫做test_git)\n```\nmkdir test_git\n```\n3 将远程的库复制下来，我们使用git clone命令来完成\n```\n# 如果你的环境不在test_git目录\n# cd test_git\n# 如果在test_git中\ngit clone https://github.com/Jackroyal/test.git# 他会在你的本地新建一个test文件夹\ncd test\n# 接下来新建一个测试文件\ntouch test.md\n# 修改测试文件的内容\nvi test.md\n# 提交刚才所做的更改\ngit add .\ngit commit -m \"首次提交\"\n```\n3 push提交到github\n```\ngit remote add origin https://github.com/Jackroyal/test.git\ngit push\n```\n之后会提示你输入用户名密码，你输入你github账号和密码就行了\n打完收工，睡觉\n后面会陆续介绍hexo在Linux下的使用\n# 参考文献\n1 [ubuntu 下 github 简单的使用教程](http://blog.chinaunix.net/uid-29040159-id-3799719.html)\n2 [Github入门级使用攻略](http://blog.csdn.net/pony_maggie/article/details/23207847)\n","slug":"linux下使用github","published":1,"updated":"2015-10-29T06:08:47.988Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hob003c4si1sqau6dfr"},{"title":"kali和ubuntu双系统安装","date":"2015-03-03T13:17:41.000Z","_content":"\n时间忽快忽慢，一转眼，年过完了，又回来学校了，又一个多月没有push了，重新回到github。今天我们家笨笨给我找了点kali的资料，索性就把kali捡起来，第一步安装kali的系统。\n此处背景不再介绍，直奔主题。kali的安装过程和ubuntu的安装过程类似，应该说原理上是一模一样的，只是界面有些不同。我的电脑当前已经安装了win8和ubuntu，现在需要再加一个kali的系统，三系统共存。\n大体分为如下几个步骤：\n### 1 下载kali镜像\n### 2 刻录u盘\n### 3 安装kali\n<!-- more -->\n---\n# 1 下载kali镜像\n这步很简单，我们去kali的官网下载<https://www.kali.org/downloads/>,下载对应的版本。我这里下载的是第一个64位版本（<http://cdimage.kali.org/kali-1.1.0/kali-linux-1.1.0-amd64.iso>）,因为是在ubuntu下，我们可以顺手校验一下文件的hash值，防止文件损坏。\n在终端中输入``` sha1sum /home/chen/kali-linux-1.1.0-amd64.iso```\n查看输出是否是`40a1fd1d4864e7fac70438a1bf2095c8c1a4e764`，若正确，则第一步完成。\n# 2 刻录u盘\n如果采用硬盘安装的话，我们需要在win下面操作，使用easybcd来编辑grub引导，还需要解压文件，相对比较麻烦，我这里采用u盘安装，相对比较简单。\n和安装ubuntu不同，我之前在win下用UltraISO来刻录,\n![刻录ubuntu](http://ww3.sinaimg.cn/large/692869a3gw1epsvwgs1rqj20fa0c676e.jpg)如图所示，便捷启动是可以不修改的，直接默认，点击写入就行。我今天在刻录kali的时候，发现这样写的u盘无法启动，开机的时候会提示`failed to boot from USB disk with error: gfxboot.c32: not a COM32R Image boot:`的错误。\n解决方法有两个\n1 linux的用mkusb，windows的用Win32DiskImager 来制作U盘启动\n具体用法：\nhttps://wiki.ubuntu.com/Win32DiskImager/iso2usb\nhttps://help.ubuntu.com/community/mkusb\n2 在win下用UltraISO来刻录，记得更改便捷启动的设置，如图所示\n![更改便捷启动](http://ww4.sinaimg.cn/large/692869a3gw1epsw409qr3j20go09rjtp.jpg)，点击便捷启动->选择写入新的启动器引导扇区——>syslinus——>写入\n\n*我采用的是法一，我在ubuntu中用mkusb来刻录*\n# 3 安装kali\n下面开始安装kali（以下图片是我用virtualbox虚拟机中安装拍摄的）\n## 1 引导成功以后，开机画面如图所示\n![开机画面](http://ww1.sinaimg.cn/large/692869a3gw1eptme5jxk5j20ne0hcjwf.jpg)\n我们选择`Graphical install`,图形化安装，也可以选择`install`那是文字界面安装\n## 2 选择语言，地区\n语言： 选择 `chinese（simplified）简体中文`\n地区： 选择 `中国`\n## 3 配置网络名称和domain\n这个代表你的电脑在网络上的名称，比如win默认的就是pc-2000123131，也就是别人在网上邻居中看到你的电脑的名称。我们就用默认的`localhost`\ndomain我们留空不管他，下一步\n## 4 设置root密码\n我们设置两次一样的密码就行，不要忘记了\n![设置root密码](http://ww2.sinaimg.cn/large/692869a3gw1eptmmnvzlnj20ne0hcdih.jpg)\n## 5 磁盘分区\n我们选择第三项`手动`\n![磁盘分区选项](http://ww4.sinaimg.cn/large/692869a3gw1eptmp2uw4ij20ne0hc42t.jpg)\n**分区**，这里我们一共分`三个区`，一个300M的`/boot`分区，一个2048M的`swap`分区，其他的分为一个`/`（你也可以把/home单独分区出来），因为分区方法类似，所以我只讲一个`/boot`和`swap`分区的步骤\n**boot分区**\n**注意:**选择**可启动标志**，我们只有/boot设置为`开`，其他分区的这个选项都是`关`\n![boot分区设置](http://ww1.sinaimg.cn/large/692869a3gw1eptmu4nonsj20ne0hctbb.jpg)\n设置完成后，选择`分区设定结束`，点击继续\n\n**交换空间**\n**注意:**交换空间是一种**文件类型**，其他的分区是**属于载点**\n![交换空间swap分区设置](http://ww1.sinaimg.cn/large/692869a3gw1eptn2gehkdj20ne0hc77a.jpg)\n设置完成后，选择`分区设定结束`，点击继续\n\n\n等分区完成，就选择`分区设定结束并将修改写入磁盘`，点击继续，就开始安装kali\n\n## 6 启动引导\n当系统快安装完成的时候，会出现grub安装的选择,如图所示\n![交换空间swap分区设置](http://ww3.sinaimg.cn/large/692869a3gw1eptnhakprmj20ns0j7dij.jpg)\n\n因为我的系统是`win8`和`ubuntu`和`kali`多系统共存，当前是由`win`来引导（当前系统由谁引导就看开机看到的第一个`系统选择`是谁的，如果是红色的ubuntu选项，那就说明由ubuntu引导）。\n我这里选择否的话，那么我就需要去`win`里面手动添加`kali`的引导（使用easybcd来操作）。\n如果你是`ubuntu`来引导系统的话，一样需要手动去添加`kali`的引导（这里我还不会）。\n所以我选择`是`，这样装完三个系统都可以正常开机了。\n\n\n到此所有的安装结束。\n\n# 参考文献\n1 安装kali 系统 <http://blog.sina.com.cn/s/blog_779dcd090102va9c.html>\n2 [kali系统安装图文教程，kali系统安装图文](http://www.bkjia.com/Linuxjc/844530.html)\n\n# 致谢\n这里，要感谢我最亲爱的笨笨<http://huirong.github.io>\n\n\n\n\n\n\n\n","source":"_posts/kali-and-ubuntu.md","raw":"title: kali和ubuntu双系统安装\ndate: 2015-03-03 21:17:41\ntags:\n- kali\n- Linux\ncategories: Linux\n---\n\n时间忽快忽慢，一转眼，年过完了，又回来学校了，又一个多月没有push了，重新回到github。今天我们家笨笨给我找了点kali的资料，索性就把kali捡起来，第一步安装kali的系统。\n此处背景不再介绍，直奔主题。kali的安装过程和ubuntu的安装过程类似，应该说原理上是一模一样的，只是界面有些不同。我的电脑当前已经安装了win8和ubuntu，现在需要再加一个kali的系统，三系统共存。\n大体分为如下几个步骤：\n### 1 下载kali镜像\n### 2 刻录u盘\n### 3 安装kali\n<!-- more -->\n---\n# 1 下载kali镜像\n这步很简单，我们去kali的官网下载<https://www.kali.org/downloads/>,下载对应的版本。我这里下载的是第一个64位版本（<http://cdimage.kali.org/kali-1.1.0/kali-linux-1.1.0-amd64.iso>）,因为是在ubuntu下，我们可以顺手校验一下文件的hash值，防止文件损坏。\n在终端中输入``` sha1sum /home/chen/kali-linux-1.1.0-amd64.iso```\n查看输出是否是`40a1fd1d4864e7fac70438a1bf2095c8c1a4e764`，若正确，则第一步完成。\n# 2 刻录u盘\n如果采用硬盘安装的话，我们需要在win下面操作，使用easybcd来编辑grub引导，还需要解压文件，相对比较麻烦，我这里采用u盘安装，相对比较简单。\n和安装ubuntu不同，我之前在win下用UltraISO来刻录,\n![刻录ubuntu](http://ww3.sinaimg.cn/large/692869a3gw1epsvwgs1rqj20fa0c676e.jpg)如图所示，便捷启动是可以不修改的，直接默认，点击写入就行。我今天在刻录kali的时候，发现这样写的u盘无法启动，开机的时候会提示`failed to boot from USB disk with error: gfxboot.c32: not a COM32R Image boot:`的错误。\n解决方法有两个\n1 linux的用mkusb，windows的用Win32DiskImager 来制作U盘启动\n具体用法：\nhttps://wiki.ubuntu.com/Win32DiskImager/iso2usb\nhttps://help.ubuntu.com/community/mkusb\n2 在win下用UltraISO来刻录，记得更改便捷启动的设置，如图所示\n![更改便捷启动](http://ww4.sinaimg.cn/large/692869a3gw1epsw409qr3j20go09rjtp.jpg)，点击便捷启动->选择写入新的启动器引导扇区——>syslinus——>写入\n\n*我采用的是法一，我在ubuntu中用mkusb来刻录*\n# 3 安装kali\n下面开始安装kali（以下图片是我用virtualbox虚拟机中安装拍摄的）\n## 1 引导成功以后，开机画面如图所示\n![开机画面](http://ww1.sinaimg.cn/large/692869a3gw1eptme5jxk5j20ne0hcjwf.jpg)\n我们选择`Graphical install`,图形化安装，也可以选择`install`那是文字界面安装\n## 2 选择语言，地区\n语言： 选择 `chinese（simplified）简体中文`\n地区： 选择 `中国`\n## 3 配置网络名称和domain\n这个代表你的电脑在网络上的名称，比如win默认的就是pc-2000123131，也就是别人在网上邻居中看到你的电脑的名称。我们就用默认的`localhost`\ndomain我们留空不管他，下一步\n## 4 设置root密码\n我们设置两次一样的密码就行，不要忘记了\n![设置root密码](http://ww2.sinaimg.cn/large/692869a3gw1eptmmnvzlnj20ne0hcdih.jpg)\n## 5 磁盘分区\n我们选择第三项`手动`\n![磁盘分区选项](http://ww4.sinaimg.cn/large/692869a3gw1eptmp2uw4ij20ne0hc42t.jpg)\n**分区**，这里我们一共分`三个区`，一个300M的`/boot`分区，一个2048M的`swap`分区，其他的分为一个`/`（你也可以把/home单独分区出来），因为分区方法类似，所以我只讲一个`/boot`和`swap`分区的步骤\n**boot分区**\n**注意:**选择**可启动标志**，我们只有/boot设置为`开`，其他分区的这个选项都是`关`\n![boot分区设置](http://ww1.sinaimg.cn/large/692869a3gw1eptmu4nonsj20ne0hctbb.jpg)\n设置完成后，选择`分区设定结束`，点击继续\n\n**交换空间**\n**注意:**交换空间是一种**文件类型**，其他的分区是**属于载点**\n![交换空间swap分区设置](http://ww1.sinaimg.cn/large/692869a3gw1eptn2gehkdj20ne0hc77a.jpg)\n设置完成后，选择`分区设定结束`，点击继续\n\n\n等分区完成，就选择`分区设定结束并将修改写入磁盘`，点击继续，就开始安装kali\n\n## 6 启动引导\n当系统快安装完成的时候，会出现grub安装的选择,如图所示\n![交换空间swap分区设置](http://ww3.sinaimg.cn/large/692869a3gw1eptnhakprmj20ns0j7dij.jpg)\n\n因为我的系统是`win8`和`ubuntu`和`kali`多系统共存，当前是由`win`来引导（当前系统由谁引导就看开机看到的第一个`系统选择`是谁的，如果是红色的ubuntu选项，那就说明由ubuntu引导）。\n我这里选择否的话，那么我就需要去`win`里面手动添加`kali`的引导（使用easybcd来操作）。\n如果你是`ubuntu`来引导系统的话，一样需要手动去添加`kali`的引导（这里我还不会）。\n所以我选择`是`，这样装完三个系统都可以正常开机了。\n\n\n到此所有的安装结束。\n\n# 参考文献\n1 安装kali 系统 <http://blog.sina.com.cn/s/blog_779dcd090102va9c.html>\n2 [kali系统安装图文教程，kali系统安装图文](http://www.bkjia.com/Linuxjc/844530.html)\n\n# 致谢\n这里，要感谢我最亲爱的笨笨<http://huirong.github.io>\n\n\n\n\n\n\n\n","slug":"kali-and-ubuntu","published":1,"updated":"2015-10-29T06:08:48.348Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hoe003h4si16kxbh57w"},{"title":"使用hexo建立自己的Github pages","date":"2014-11-27T06:48:29.000Z","_content":"昨天经过一天的[折腾](http://jackroyal.github.io/2014/11/26/new-start/ '生命在于折腾'),总算把博客搭建起来了,今天就来写个博客总结一下.\n网上的资料很多,我主要参考的是这篇博客,一路很顺利.\n>http://zipperary.com/2013/05/28/hexo-guide-2/\n\n一个很重要的原因就是他是针对windows的,刚好我也在用windows.\n# 安装过程\n# # 1. 安装Github for windows\n因为我之前就在用Github,所以早就安装了这个.已经装过的同学请忽略这一段.\n下载 [Github for windows](https://windows.github.com/ \"Github for windows\") 并执行即可完成安装(*在线安装,会有点慢*)。这个软件的的好处是有一个带GUI的界面,还有一个终端界面.如图所示<!-- more -->\n![Github for windows](http://ww2.sinaimg.cn/large/692869a3jw1emplp1lz31j204w033mx0.jpg)\n![GUI and Bash](http://ww2.sinaimg.cn/large/692869a3gw1empluh6hvej210b0j741r.jpg)\n如果你不喜欢用这个,也可以用上面的博客推荐的[msysgit](http://code.google.com/p/msysgit/).\n\n# # 2. 安装Node.js\n在 Windows 环境下安装 [Node.js](http://nodejs.org/ \"Node.js 官网\") 非常简单，仅须下载安装文件并执行即可完成安装。（win下建议下载msi格式的，因为这样可以不用配置环境变量之类的）\n\n# # 3. 测试node.js是否安装\n在任何控制台输入(可以按windows键+R,输入cmd,然后输入npm,一般来说不会有问题)\n```\nnpm\n```\n返回值如下\n```\nUsage: npm <command>\n\nwhere <command> is one of:\n    add-user, adduser, apihelp, author, bin, bugs, c, cache,\n    completion, config, ddp, dedupe, deprecate, docs, edit,\n    explore, faq, find, find-dupes, get, help, help-search,\n    home, i, info, init, install, isntall, issues, la, link,\n    list, ll, ln, login, ls, outdated, owner, pack, prefix,\n    prune, publish, r, rb, rebuild, remove, repo, restart, rm,\n    root, run-script, s, se, search, set, show, shrinkwrap,\n    star, stars, start, stop, submodule, t, tag, test, tst, un,\n    uninstall, unlink, unpublish, unstar, up, update, v,\n    version, view, whoami\n\nnpm <cmd> -h     quick help on <cmd>\nnpm -l           display full usage info\nnpm faq          commonly asked questions\nnpm help <term>  search for help on <term>\nnpm help npm     involved overview\n\nSpecify configs in the ini-formatted file:\n    C:\\Users\\chenhao\\.npmrc\nor on the command line via: npm <command> --key value\nConfig info can be viewed via: npm help config\n\nnpm@1.4.28 D:\\Program Files (x86)\\nodejs\\node_modules\\npm\n```\n看到这个结果,就表示你的node.js已经安装上去了\n*感谢我们家笨笨的反馈：*此处如果npm无效，首先确定win下你采用的是msi格式的安装文件，然后重启下电脑，应该就正常了。\n# # 4. 安装hexo\n接下来的操作我都是用**Github for windows**自带的Bash来完成的,因为后面会涉及到SSH,用**Github for windows**,就可以避免这个问题.\n- 在Bash中输入以下命令\n```\nnpm install -g hexo\n```\n- 创建hexo文件夹\n创建你hexo放置的文件夹,先用Bash进入到目标文件夹,比如我的是F:/blog/,接下来初始化hexo,自动生成相关的文件,在F:/blog/环境下,输入\n```\ncd /f/blog  # 这个命令表示当前进入目录为f：/blog/\nhexo init\n```\n- 安装依赖包\n```\nnpm install\n```\n- 本地预览,做完以上操作,可以本地预览一下\n```\nhexo g\nhexo s\n```\n以上两条命令的意思是:\n生成相关文件(就是生成目标html,静态博客嘛,就是很多html组成)\n打开本地服务器预览(node.js就是干这事的,点击访问<http://localhost:4000>,就可以看到了)\n**ok**,到这里,博客搭建基本完成,现在要做的就是把它发布到你的Github上去\n---\n接下来,教你怎么发布到Github上去\n# 注册Github\n这一步没什么说的,如果你连简单的注册都不会,我也不会教你╮(╯▽╰)╭\n# 创建公共库\n在自己Github主页右下角，创建一个新的repository([点这里](https://github.com/new '点我新建'))。比如我的Github账号是Jackroyal，那么我应该创建的repository名字应该是Jackroyal.github.io(注意你的repository名字就是Jackroyal.github.io,我之前用的是Jackroyal怎么尝试都不行)。\n> PS:有个大小写的问题其实我注册的是Jackroyal,大写的J,但是我访问的时候特别是带https的链接,他会自动转为小写访问.怎么说呢?简单点,你就按照你的用户名来,该大写大写,该小写小写\n\n# 部署\n现在万事俱备,只差部署了,我们来配置下`_config.yml`.\n这个文件在路径是F:/blog/_config.yml.\n用编辑器把它打开,修改最后一段\nps:以下为hexo 2.8x的配置方法,不适用于3.0\n```\ndeploy:\n  type: github\n  repo: https://github.com/Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n\n*update 2015-06-16:*\n现在hexo由2.8升级到3.0了,按照上面的方式安装,你的hexo版本是hexo 3.0,3.0的这段代码的设置内容如下:\n```\ndeploy:\n  type: git\n  repo: https://github.com/Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n照着我的这个格式修改就好了,把我里面的用户名替换成你的.\n至此基本完成所有搭建步骤.\n# 上传\n我们开始上传项目的代码,再重复一次,我一直以来用的工具都是_Github for windows_自带的Bash,所以我没有配置SSH,如果你用的windows自带的终端或者其他比如msysgit,可能需要配置SSH,不然无法使用Github(点击[`这里`](https://help.github.com/articles/generating-ssh-keys/ \"https://help.github.com/articles/generating-ssh-keys/\")查看官方教程).\n我们输入以下命令\n```\nhexo g\nhexo d\n```\n或者偷个懒\n```\nhexo d -g\n```\nok,现在就可以去看看你的个人主页了,逼格满满有木有.\n# 问题\n我的中间出过一些问题:\n1. 我的`hexo d`的时候出错,可以尝试手动删除`.deploy`文件夹,然后执行`hexo clean`还有可能出现的情况是,`deploy`没错但是一直没有提示`deploy done`,那就是骚年,你访问Github网速太慢\n1. 我`deploy d`成功以后,在Github里面已经看到生成的页面了,访问<http://jackroyal.github.io>或者<https://jackroyal.github.io>一直报404的错误,这种时候等一等就好了,一般等几分钟.如果一直不好那就给官方发个邮件,他们很快会回复你的,有什么问题说清楚就行.\n# 致谢\n这里，要感谢我最亲爱的笨笨，是她给我测试和反馈的<http://huirong.github.io>\n\n","source":"_posts/how-to-build-a-blog-with-hexo.md","raw":"title: 使用hexo建立自己的Github pages\ndate: 2014-11-27 14:48:29\ntags:\n- hexo\n- github\ncategories: hexo\n---\n昨天经过一天的[折腾](http://jackroyal.github.io/2014/11/26/new-start/ '生命在于折腾'),总算把博客搭建起来了,今天就来写个博客总结一下.\n网上的资料很多,我主要参考的是这篇博客,一路很顺利.\n>http://zipperary.com/2013/05/28/hexo-guide-2/\n\n一个很重要的原因就是他是针对windows的,刚好我也在用windows.\n# 安装过程\n# # 1. 安装Github for windows\n因为我之前就在用Github,所以早就安装了这个.已经装过的同学请忽略这一段.\n下载 [Github for windows](https://windows.github.com/ \"Github for windows\") 并执行即可完成安装(*在线安装,会有点慢*)。这个软件的的好处是有一个带GUI的界面,还有一个终端界面.如图所示<!-- more -->\n![Github for windows](http://ww2.sinaimg.cn/large/692869a3jw1emplp1lz31j204w033mx0.jpg)\n![GUI and Bash](http://ww2.sinaimg.cn/large/692869a3gw1empluh6hvej210b0j741r.jpg)\n如果你不喜欢用这个,也可以用上面的博客推荐的[msysgit](http://code.google.com/p/msysgit/).\n\n# # 2. 安装Node.js\n在 Windows 环境下安装 [Node.js](http://nodejs.org/ \"Node.js 官网\") 非常简单，仅须下载安装文件并执行即可完成安装。（win下建议下载msi格式的，因为这样可以不用配置环境变量之类的）\n\n# # 3. 测试node.js是否安装\n在任何控制台输入(可以按windows键+R,输入cmd,然后输入npm,一般来说不会有问题)\n```\nnpm\n```\n返回值如下\n```\nUsage: npm <command>\n\nwhere <command> is one of:\n    add-user, adduser, apihelp, author, bin, bugs, c, cache,\n    completion, config, ddp, dedupe, deprecate, docs, edit,\n    explore, faq, find, find-dupes, get, help, help-search,\n    home, i, info, init, install, isntall, issues, la, link,\n    list, ll, ln, login, ls, outdated, owner, pack, prefix,\n    prune, publish, r, rb, rebuild, remove, repo, restart, rm,\n    root, run-script, s, se, search, set, show, shrinkwrap,\n    star, stars, start, stop, submodule, t, tag, test, tst, un,\n    uninstall, unlink, unpublish, unstar, up, update, v,\n    version, view, whoami\n\nnpm <cmd> -h     quick help on <cmd>\nnpm -l           display full usage info\nnpm faq          commonly asked questions\nnpm help <term>  search for help on <term>\nnpm help npm     involved overview\n\nSpecify configs in the ini-formatted file:\n    C:\\Users\\chenhao\\.npmrc\nor on the command line via: npm <command> --key value\nConfig info can be viewed via: npm help config\n\nnpm@1.4.28 D:\\Program Files (x86)\\nodejs\\node_modules\\npm\n```\n看到这个结果,就表示你的node.js已经安装上去了\n*感谢我们家笨笨的反馈：*此处如果npm无效，首先确定win下你采用的是msi格式的安装文件，然后重启下电脑，应该就正常了。\n# # 4. 安装hexo\n接下来的操作我都是用**Github for windows**自带的Bash来完成的,因为后面会涉及到SSH,用**Github for windows**,就可以避免这个问题.\n- 在Bash中输入以下命令\n```\nnpm install -g hexo\n```\n- 创建hexo文件夹\n创建你hexo放置的文件夹,先用Bash进入到目标文件夹,比如我的是F:/blog/,接下来初始化hexo,自动生成相关的文件,在F:/blog/环境下,输入\n```\ncd /f/blog  # 这个命令表示当前进入目录为f：/blog/\nhexo init\n```\n- 安装依赖包\n```\nnpm install\n```\n- 本地预览,做完以上操作,可以本地预览一下\n```\nhexo g\nhexo s\n```\n以上两条命令的意思是:\n生成相关文件(就是生成目标html,静态博客嘛,就是很多html组成)\n打开本地服务器预览(node.js就是干这事的,点击访问<http://localhost:4000>,就可以看到了)\n**ok**,到这里,博客搭建基本完成,现在要做的就是把它发布到你的Github上去\n---\n接下来,教你怎么发布到Github上去\n# 注册Github\n这一步没什么说的,如果你连简单的注册都不会,我也不会教你╮(╯▽╰)╭\n# 创建公共库\n在自己Github主页右下角，创建一个新的repository([点这里](https://github.com/new '点我新建'))。比如我的Github账号是Jackroyal，那么我应该创建的repository名字应该是Jackroyal.github.io(注意你的repository名字就是Jackroyal.github.io,我之前用的是Jackroyal怎么尝试都不行)。\n> PS:有个大小写的问题其实我注册的是Jackroyal,大写的J,但是我访问的时候特别是带https的链接,他会自动转为小写访问.怎么说呢?简单点,你就按照你的用户名来,该大写大写,该小写小写\n\n# 部署\n现在万事俱备,只差部署了,我们来配置下`_config.yml`.\n这个文件在路径是F:/blog/_config.yml.\n用编辑器把它打开,修改最后一段\nps:以下为hexo 2.8x的配置方法,不适用于3.0\n```\ndeploy:\n  type: github\n  repo: https://github.com/Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n\n*update 2015-06-16:*\n现在hexo由2.8升级到3.0了,按照上面的方式安装,你的hexo版本是hexo 3.0,3.0的这段代码的设置内容如下:\n```\ndeploy:\n  type: git\n  repo: https://github.com/Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n照着我的这个格式修改就好了,把我里面的用户名替换成你的.\n至此基本完成所有搭建步骤.\n# 上传\n我们开始上传项目的代码,再重复一次,我一直以来用的工具都是_Github for windows_自带的Bash,所以我没有配置SSH,如果你用的windows自带的终端或者其他比如msysgit,可能需要配置SSH,不然无法使用Github(点击[`这里`](https://help.github.com/articles/generating-ssh-keys/ \"https://help.github.com/articles/generating-ssh-keys/\")查看官方教程).\n我们输入以下命令\n```\nhexo g\nhexo d\n```\n或者偷个懒\n```\nhexo d -g\n```\nok,现在就可以去看看你的个人主页了,逼格满满有木有.\n# 问题\n我的中间出过一些问题:\n1. 我的`hexo d`的时候出错,可以尝试手动删除`.deploy`文件夹,然后执行`hexo clean`还有可能出现的情况是,`deploy`没错但是一直没有提示`deploy done`,那就是骚年,你访问Github网速太慢\n1. 我`deploy d`成功以后,在Github里面已经看到生成的页面了,访问<http://jackroyal.github.io>或者<https://jackroyal.github.io>一直报404的错误,这种时候等一等就好了,一般等几分钟.如果一直不好那就给官方发个邮件,他们很快会回复你的,有什么问题说清楚就行.\n# 致谢\n这里，要感谢我最亲爱的笨笨，是她给我测试和反馈的<http://huirong.github.io>\n\n","slug":"how-to-build-a-blog-with-hexo","published":1,"updated":"2015-10-29T06:08:48.740Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hoi003m4si1ro5ud349"},{"title":"html5在ie中遇到的那些坑","date":"2015-05-15T15:19:43.000Z","_content":"这段时间,笨笨找了个活儿,做一个页面,能够适配所有的主流浏览器,包括pc,平板和手机等终端(这和当年某刘提的要求一样啊).\n我第一个想到的是bootstrap,可惜这货太大了,我只是几个简单的页面,没必要用这么大体量的东西.\n搜索一番以后,我找到了我的解决方案,media query,支付宝也是这么解决的.\n<!-- more -->\n# 前提条件\n以下所给出的例子,都是html5的页面,不合适html4.0的页面,也就是说你的头部必须是\n`<!DOCTYPE html>`才行,如果是`<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">`,是不行的,要仔细看清楚哈.\n下面就来罗列一下,这次经过的那些坑:\n# 1  自动适配终端屏幕宽度\n```\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\">\n```\ncontent属性值 :\n     width:可视区域的宽度，值可为数字或关键词device-width\n     height:同width\n     intial-scale:页面首次被显示是可视区域的缩放级别，取值1.0则页面按实际尺寸显示，无任何缩放\n     maximum-scale=1.0, minimum-scale=1.0;可视区域的缩放级别，\n              maximum-scale用户可将页面放大的程序，1.0将禁止用户放大到实际尺寸之上。\n     user-scalable:是否可对页面进行缩放，no 禁止缩放\n\n# 2  使ie6-8支持html5的元素\n```\n<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->\n<!--[if lt IE 9]>\n<script src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"></script>\n<![endif]-->\n```\n以上代码,顾名思义,当ie的版本是9一下的时候,加载html5.js这个文件(建议最好下载下来在本地调用),他是用来帮助ie6-8支持html元素的.\n\n# 3  ie10以下的版本不支持placeholder(不完美解决)\nplaceholder是html5里面才有的东东,ie8不支持就算了,ie9都不支持,伤不起.这个没办法,只能用js去写,网上有很多类似的东西,不过不是很好用,我找到的都不完美.\n```\n(function($) {\n  /**\n   * 没有开花的树\n   * http://blog.csdn.net/mycwq/\n   * 2012/11/28 15:12\n   */\n\n  var placeholderfriend = {\n    focus: function(s) {\n      s = $(s).hide().prev().show().focus();\n      var idValue = s.attr(\"id\");\n      if (idValue) {\n        s.attr(\"id\", idValue.replace(\"placeholderfriend\", \"\"));\n      }\n      var clsValue = s.attr(\"class\");\n      if (clsValue) {\n        s.attr(\"class\", clsValue.replace(\"placeholderfriend\", \"\"));\n      }\n    }\n  }\n\n  //判断是否支持placeholder\n  function isPlaceholer() {\n    var input = document.createElement('input');\n    return \"placeholder\" in input;\n  }\n  //不支持的代码\n  if (!isPlaceholer()) {\n    $(function() {\n\n      var form = $(this);\n\n      //遍历所有文本框，添加placeholder模拟事件\n      var elements = form.find(\"input[type='text'][placeholder]\");\n      elements.each(function() {\n        var s = $(this);\n        var pValue = s.attr(\"placeholder\");\n        var sValue = s.val();\n        if (pValue) {\n          if (sValue == '') {\n            s.val(pValue);\n          }\n        }\n      });\n\n      elements.focus(function() {\n        var s = $(this);\n        var pValue = s.attr(\"placeholder\");\n        var sValue = s.val();\n        if (sValue && pValue) {\n          if (sValue == pValue) {\n            s.val('');\n          }\n        }\n      });\n\n      elements.blur(function() {\n        var s = $(this);\n        var pValue = s.attr(\"placeholder\");\n        var sValue = s.val();\n        if (!sValue) {\n          s.val(pValue);\n        }\n      });\n\n      //遍历所有密码框，添加placeholder模拟事件\n      var elementsPass = form.find(\"input[type='password'][placeholder]\");\n      elementsPass.each(function(i) {\n        var s = $(this);\n        var pValue = s.attr(\"placeholder\");\n        var sValue = s.val();\n        if (pValue) {\n          if (sValue == '') {\n            //DOM不支持type的修改，需要复制密码框属性，生成新的DOM\n            var html = this.outerHTML || \"\";\n            html = html.replace(/\\s*type=(['\"])?password\\1/gi, \" type=text placeholderfriend\")\n              .replace(/\\s*(?:value|on[a-z]+|name)(=(['\"])?\\S*\\1)?/gi, \" \")\n              .replace(/\\s*placeholderfriend/, \" placeholderfriend value='\" + pValue\n              + \"' \" + \"onfocus='placeholderfriendfocus(this);' \");\n            var idValue = s.attr(\"id\");\n            if (idValue) {\n              s.attr(\"id\", idValue + \"placeholderfriend\");\n            }\n            var clsValue = s.attr(\"class\");\n            if (clsValue) {\n              s.attr(\"class\", clsValue + \"placeholderfriend\");\n            }\n            s.hide();\n            s.after(html);\n          }\n        }\n      });\n\n      elementsPass.blur(function() {\n        var s = $(this);\n        var sValue = s.val();\n        if (sValue == '') {\n          var idValue = s.attr(\"id\");\n          if (idValue) {\n            s.attr(\"id\", idValue + \"placeholderfriend\");\n          }\n          var clsValue = s.attr(\"class\");\n          if (clsValue) {\n            s.attr(\"class\", clsValue + \"placeholderfriend\");\n          }\n          s.hide().next().show();\n        }\n      });\n\n    });\n  }\n  window.placeholderfriendfocus = placeholderfriend.focus;\n})(jQuery);\n```\n我最终选择这段代码,他能够在ie的各版本中正常运行,支持`text`和`password`标签.\n唯一的不足是,你直接点提交,你的text里面会有内容,内容就是placeholder中设置的提示内容.\n# 4  background-size在ie9一下不支持\nbackground-size属性是用来让背景图片平铺的.不过ie9一下并不支持这个属性,我们使用滤镜来实现平铺的效果,示例代码如下.\n```\nbackground-size: cover;\n    filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='./assets/images/01.png', sizingMethod='scale')\\9;\n```\n需要注意的是,这里的图片路径是相对于html文件的,不是css的路径,如果设置了没效果,先检查下你的路径.\n# 5  input输入框 光标不居中\n这个问题来自于魅族手机,还有老大难的ie6-8的测试中.\n解决方法是设置`height`和`line-height`等高,没那么简单,这里有技巧的\n```css\n    line-height: normal;/*这行代码解决了魅族手机中的不居中问题*/\n    line-height: 42px\\9;/*这行css代码的含义是ie9以下设置line-height为42px*/\n```\n# 6  opacity的继承问题\n```css\n<div id='a' style=\"\">\n    <div id='b'>\n    hello moto\n    </div>\n</div>\n```\n\n如果我们给父div设置了一个`opacity`为0.1,即使我们给子div设置`opacity`为1,也是不管用的,如图\n![未设置父div的opacity之前](http://ww1.sinaimg.cn/large/692869a3gw1es5fm0jafhj20iv0ecq46.jpg)\n设置父div的`opacity`之后\n![设置父div的opacity之后](http://ww4.sinaimg.cn/large/692869a3gw1es5fnsk3pvj20hy0fdwfm.jpg)\n我们可以清楚看到子div受到了影响.\n解决办法:解除父子关系,把子div从父div中挪出来\n\n# 7  border-radius在ie9以下不支持\n输入框等其他地方用到圆角的话,在老版本ie中果断是没有支持的.\n我们需要用hack的方式[pie](http://css3pie.com/),去实现border-radius和box-shadow等功能.加入pie以后的css代码如下:\n```\n    -moz-border-radius: 6px;\n    -webkit-border-radius: 6px;\n    border-radius: 6px;\n    behavior: url(assets/css/pie.htc);/*这一行是核心*/\n```\n缺点:设置的border-radius四角的设置值都是相同的\n\n# 8 css递进关系\n挖坑,以后填\n\n\nps:晚安,亲爱的\n\n\n\n# 参考文献\n1 [meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\" 解释](http://www.cnblogs.com/yuzhongwusan/p/4184923.html)\n2 [pie用hack方式在ie中实现border-radius](http://css3pie.com/)\n","source":"_posts/holes-in-ie6-about-html5.md","raw":"title: html5在ie中遇到的那些坑\ndate: 2015-05-15 23:19:43\ntags:\n- 前端\n- css\n- html5\n- ie\n- 兼容性\ncategories:\n- 前端\n---\n这段时间,笨笨找了个活儿,做一个页面,能够适配所有的主流浏览器,包括pc,平板和手机等终端(这和当年某刘提的要求一样啊).\n我第一个想到的是bootstrap,可惜这货太大了,我只是几个简单的页面,没必要用这么大体量的东西.\n搜索一番以后,我找到了我的解决方案,media query,支付宝也是这么解决的.\n<!-- more -->\n# 前提条件\n以下所给出的例子,都是html5的页面,不合适html4.0的页面,也就是说你的头部必须是\n`<!DOCTYPE html>`才行,如果是`<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">`,是不行的,要仔细看清楚哈.\n下面就来罗列一下,这次经过的那些坑:\n# 1  自动适配终端屏幕宽度\n```\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\">\n```\ncontent属性值 :\n     width:可视区域的宽度，值可为数字或关键词device-width\n     height:同width\n     intial-scale:页面首次被显示是可视区域的缩放级别，取值1.0则页面按实际尺寸显示，无任何缩放\n     maximum-scale=1.0, minimum-scale=1.0;可视区域的缩放级别，\n              maximum-scale用户可将页面放大的程序，1.0将禁止用户放大到实际尺寸之上。\n     user-scalable:是否可对页面进行缩放，no 禁止缩放\n\n# 2  使ie6-8支持html5的元素\n```\n<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->\n<!--[if lt IE 9]>\n<script src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"></script>\n<![endif]-->\n```\n以上代码,顾名思义,当ie的版本是9一下的时候,加载html5.js这个文件(建议最好下载下来在本地调用),他是用来帮助ie6-8支持html元素的.\n\n# 3  ie10以下的版本不支持placeholder(不完美解决)\nplaceholder是html5里面才有的东东,ie8不支持就算了,ie9都不支持,伤不起.这个没办法,只能用js去写,网上有很多类似的东西,不过不是很好用,我找到的都不完美.\n```\n(function($) {\n  /**\n   * 没有开花的树\n   * http://blog.csdn.net/mycwq/\n   * 2012/11/28 15:12\n   */\n\n  var placeholderfriend = {\n    focus: function(s) {\n      s = $(s).hide().prev().show().focus();\n      var idValue = s.attr(\"id\");\n      if (idValue) {\n        s.attr(\"id\", idValue.replace(\"placeholderfriend\", \"\"));\n      }\n      var clsValue = s.attr(\"class\");\n      if (clsValue) {\n        s.attr(\"class\", clsValue.replace(\"placeholderfriend\", \"\"));\n      }\n    }\n  }\n\n  //判断是否支持placeholder\n  function isPlaceholer() {\n    var input = document.createElement('input');\n    return \"placeholder\" in input;\n  }\n  //不支持的代码\n  if (!isPlaceholer()) {\n    $(function() {\n\n      var form = $(this);\n\n      //遍历所有文本框，添加placeholder模拟事件\n      var elements = form.find(\"input[type='text'][placeholder]\");\n      elements.each(function() {\n        var s = $(this);\n        var pValue = s.attr(\"placeholder\");\n        var sValue = s.val();\n        if (pValue) {\n          if (sValue == '') {\n            s.val(pValue);\n          }\n        }\n      });\n\n      elements.focus(function() {\n        var s = $(this);\n        var pValue = s.attr(\"placeholder\");\n        var sValue = s.val();\n        if (sValue && pValue) {\n          if (sValue == pValue) {\n            s.val('');\n          }\n        }\n      });\n\n      elements.blur(function() {\n        var s = $(this);\n        var pValue = s.attr(\"placeholder\");\n        var sValue = s.val();\n        if (!sValue) {\n          s.val(pValue);\n        }\n      });\n\n      //遍历所有密码框，添加placeholder模拟事件\n      var elementsPass = form.find(\"input[type='password'][placeholder]\");\n      elementsPass.each(function(i) {\n        var s = $(this);\n        var pValue = s.attr(\"placeholder\");\n        var sValue = s.val();\n        if (pValue) {\n          if (sValue == '') {\n            //DOM不支持type的修改，需要复制密码框属性，生成新的DOM\n            var html = this.outerHTML || \"\";\n            html = html.replace(/\\s*type=(['\"])?password\\1/gi, \" type=text placeholderfriend\")\n              .replace(/\\s*(?:value|on[a-z]+|name)(=(['\"])?\\S*\\1)?/gi, \" \")\n              .replace(/\\s*placeholderfriend/, \" placeholderfriend value='\" + pValue\n              + \"' \" + \"onfocus='placeholderfriendfocus(this);' \");\n            var idValue = s.attr(\"id\");\n            if (idValue) {\n              s.attr(\"id\", idValue + \"placeholderfriend\");\n            }\n            var clsValue = s.attr(\"class\");\n            if (clsValue) {\n              s.attr(\"class\", clsValue + \"placeholderfriend\");\n            }\n            s.hide();\n            s.after(html);\n          }\n        }\n      });\n\n      elementsPass.blur(function() {\n        var s = $(this);\n        var sValue = s.val();\n        if (sValue == '') {\n          var idValue = s.attr(\"id\");\n          if (idValue) {\n            s.attr(\"id\", idValue + \"placeholderfriend\");\n          }\n          var clsValue = s.attr(\"class\");\n          if (clsValue) {\n            s.attr(\"class\", clsValue + \"placeholderfriend\");\n          }\n          s.hide().next().show();\n        }\n      });\n\n    });\n  }\n  window.placeholderfriendfocus = placeholderfriend.focus;\n})(jQuery);\n```\n我最终选择这段代码,他能够在ie的各版本中正常运行,支持`text`和`password`标签.\n唯一的不足是,你直接点提交,你的text里面会有内容,内容就是placeholder中设置的提示内容.\n# 4  background-size在ie9一下不支持\nbackground-size属性是用来让背景图片平铺的.不过ie9一下并不支持这个属性,我们使用滤镜来实现平铺的效果,示例代码如下.\n```\nbackground-size: cover;\n    filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='./assets/images/01.png', sizingMethod='scale')\\9;\n```\n需要注意的是,这里的图片路径是相对于html文件的,不是css的路径,如果设置了没效果,先检查下你的路径.\n# 5  input输入框 光标不居中\n这个问题来自于魅族手机,还有老大难的ie6-8的测试中.\n解决方法是设置`height`和`line-height`等高,没那么简单,这里有技巧的\n```css\n    line-height: normal;/*这行代码解决了魅族手机中的不居中问题*/\n    line-height: 42px\\9;/*这行css代码的含义是ie9以下设置line-height为42px*/\n```\n# 6  opacity的继承问题\n```css\n<div id='a' style=\"\">\n    <div id='b'>\n    hello moto\n    </div>\n</div>\n```\n\n如果我们给父div设置了一个`opacity`为0.1,即使我们给子div设置`opacity`为1,也是不管用的,如图\n![未设置父div的opacity之前](http://ww1.sinaimg.cn/large/692869a3gw1es5fm0jafhj20iv0ecq46.jpg)\n设置父div的`opacity`之后\n![设置父div的opacity之后](http://ww4.sinaimg.cn/large/692869a3gw1es5fnsk3pvj20hy0fdwfm.jpg)\n我们可以清楚看到子div受到了影响.\n解决办法:解除父子关系,把子div从父div中挪出来\n\n# 7  border-radius在ie9以下不支持\n输入框等其他地方用到圆角的话,在老版本ie中果断是没有支持的.\n我们需要用hack的方式[pie](http://css3pie.com/),去实现border-radius和box-shadow等功能.加入pie以后的css代码如下:\n```\n    -moz-border-radius: 6px;\n    -webkit-border-radius: 6px;\n    border-radius: 6px;\n    behavior: url(assets/css/pie.htc);/*这一行是核心*/\n```\n缺点:设置的border-radius四角的设置值都是相同的\n\n# 8 css递进关系\n挖坑,以后填\n\n\nps:晚安,亲爱的\n\n\n\n# 参考文献\n1 [meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\" 解释](http://www.cnblogs.com/yuzhongwusan/p/4184923.html)\n2 [pie用hack方式在ie中实现border-radius](http://css3pie.com/)\n","slug":"holes-in-ie6-about-html5","published":1,"updated":"2015-10-29T06:08:49.149Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hon003r4si1gjjhyq2o"},{"title":"给hexo配置上评论和访问量","date":"2015-05-30T06:08:49.000Z","_content":"哈哈,我们家笨笨,绝对是我学习技术的很大很大很大大的动力.更开始用github pages的时候,就觉得没法看访问量和评论数量这事,很蛋疼,不过也没折腾.\n今天上午,我们家笨笨说没有评论和访问量不好,都不知道多少人看了.妹子都发话了,果断要搞定.\n<!-- more -->\ngoogle一番找到解决方法:\n#### 1 关于评论数量的显示,我们可以直接使用多说官网提供的方法,很简单\n#### 2 关于访问量统计这事儿,不太好搞,我找到了这个[不蒜子](http://ibruce.info/2015/04/04/busuanzi/),这位非著名码农自己做的访问统计,哈哈,点个赞\n#### 3 今天还看到了font-awesome,可以显示一些小图标,为了显示效果更好,一并加上去\n先展示一下最终的效果:<br>\n![页底关于整站访问量的显示](http://ww1.sinaimg.cn/large/692869a3gw1esm9snxfcuj20su0ad74x.jpg)\n![文章页面关于访问量和评论数量的显示](http://ww4.sinaimg.cn/large/692869a3gw1esm9tcczdij20r00doq4t.jpg)\n\n下面,开始动手\n# 1 配置评论数量的显示\n首先,确认你的评论系统用的是多说,如果不是,那就不用继续往下看了(参考[这里](http://localhost:4000/2014/11/28/custom-hexo/)配置多说).\n我使用的主题是`light`,其他主题原理类似.我们打开`themes/light/layout/_partial/article.ejs`,我们在`header`标签的尾部添加上下面的代码:\n```html\n    <% if (item.excerpt && index){ %>\n     <% } else { %>\n     <div class=\"busuanzi_container_page_pv\">\n       <span class=\"head-plus\">\n       <i class=\"fa fa-user\"></i><span id=\"busuanzi_value_page_pv\"><i class=\"fa fa-spinner fa-spin\"></i></span>次访问\n       </span>\n       <span class=\"head-plus\">\n       <i class=\"fa fa-comments\"></i><span class=\"ds-thread-count\" data-thread-key=\"<%= page.layout %>-<%= page.slug %>\"><i class=\"fa fa-spinner fa-spin\"></i></span>条评论\n       </span>\n     </div>\n     <% } %>\n```\n最终效果如图<br>\n![修改后的article.ejs](http://ww2.sinaimg.cn/large/692869a3gw1esmas5d58oj20x50jc46f.jpg)\n以上代码,是最终成型的代码,我加入了一些美化的东西,最核心的就是\n```html\n<span class=\"ds-thread-count\" data-thread-key=\"<%= page.layout %>-<%= page.slug %>\"></span>\n```\n尤其注意`data-thread-key`的设置,他和你之前配置多说的时候是一致的,每篇文章有一个独一无二的key,你可以去你的`themes/light/layout/_partial/comment.ejs`里找到关于data-thread-key的内容,直接复制过来即可.\n\nPs:这里我们可能还需要配置下数据显示的格式,在你的多说后台管理里面,进入设置界面如图\n![多说后台设置](http://ww3.sinaimg.cn/large/692869a3gw1esmayan2utj20w50mx0ya.jpg)\n我们找到`暂无评论`,`1条评论`,`{num}条评论`,这几个设置,修改成自己要的格式,也可以参照我的修改,`0`,`1`,`{num}`\n\n# 2 配置文章访问量的显示\n这个更简单了,按照作者的说法,只需要引入一个js,再添加一个span就完成了.由于js一般放置在页面的最底部,所以我们找到`themes/light/layout/_partial/after_footer.ejs`,我们在最后添加上下面的代码:\n```javascript\n<script async src=\"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\">\n</script>\n```\n上面就完成了js文件的引入,我们再在要显示访问量的地方添加一个span就行了.比如我想显示在标题的下面,那就打开`themes/light/layout/_partial/article.ejs`,添加的代码,就是`第一步`里面添加的那个.如果你想简洁一点,也可以只添加下面核心代码就行:\n```html\n本站总访问量<span id=\"busuanzi_value_site_pv\"></span>次\n本站访客数<span id=\"busuanzi_value_site_uv\"></span>人次\n本文总阅读量<span id=\"busuanzi_value_page_pv\"></span>次\n```\n# 3  经过美化后最终的代码\n如果只用官方提供的代码,没有优化,很丑,我优化了下,分享一下.\n\n1.修改`themes/light/layout/_partial/article.ejs`,在header标签的末尾添加以下代码\n```html\n    <% if (item.excerpt && index){ %>\n     <% } else { %>\n     <div class=\"busuanzi_container_page_pv\">\n       <span class=\"head-plus\">\n       <i class=\"fa fa-user\"></i><span id=\"busuanzi_value_page_pv\"><i class=\"fa fa-spinner fa-spin\"></i></span>次访问\n       </span>\n       <span class=\"head-plus\">\n       <i class=\"fa fa-comments\"></i><span class=\"ds-thread-count\" data-thread-key=\"<%= page.layout %>-<%= page.slug %>\"><i class=\"fa fa-spinner fa-spin\"></i></span>条评论\n       </span>\n     </div>\n     <% } %>\n```\n![修改后的article.ejs](http://ww2.sinaimg.cn/large/692869a3gw1esmas5d58oj20x50jc46f.jpg)<br>2.修改`themes/light/layout/_partial/footer.ejs`,下面是footer.ejs的**全部代码**:\n```html\n<div class=\"alignleft\">\n  <% if (config.author){ %>\n  &copy; <%= new Date().getFullYear() %> <%= config.author %>\n  <% } else { %>\n  &copy; <%= new Date().getFullYear() %> <%= config.title %>\n  <% } %>\n<span id=\"busuanzi_container_site_pv\">\n     <i class=\"fa fa-flag\"></i>    你是第<span id=\"busuanzi_value_site_pv\"><i class=\"fa fa-spinner fa-spin\"></i></span>个到访的小伙伴\n</span>\n</div>\n<div class=\"clearfix\"></div>\n```\n<br>3.修改`themes/light/layout/_partial/after_footer.ejs`,我们在**最后**添加上下面的代码:\n\n```javascript\n<script async src=\"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\">\n</script>\n```\n\n4.修改`themes\\light\\source\\css\\_partial\\article.styl`,我们在第124行,在`.entry`之前添加上以下代码,尤其注意与左右的间距,因为它是一个树形结构,它与左侧的距离,影响着它的层级.我们这里应该和entry平级,下面代码应该与`.entry`对齐\n```\n  .busuanzi_container_page_pv\n      margin:20px 0\n      color: # 817C7C\n      font-size: 12px\n  # busuanzi_value_page_pv\n      padding-left:4px\n  .head-plus\n      padding-left:4px\n  .ds-thread-count\n      padding-left:4px\n\n```\n最终效果如图:\n![添加css,注意左对齐](http://ww4.sinaimg.cn/large/692869a3gw1esmajbsx38j20k30gwadu.jpg)<br>5.修改`themes\\light\\source\\css\\_partial\\footer.styl`,在最后添加上以下代码\n```\n# busuanzi_value_site_pv\n  color:black\n  padding:4px\n# busuanzi_container_site_pv\n  padding-left:2em\n```\n6.修改`themes\\light\\source\\css\\_partial\\variable.styl`,在最后添加以下代码\n```\n@import url(\"http://libs.useso.com/js/font-awesome/4.2.0/css/font-awesome.min.css\")\n```\n\nok  打完收工\n\n# 参考文献\n1 博客访问技术工具--不蒜子 <http://ibruce.info/2015/04/04/busuanzi/>\n2 [多说-代码显示【文章评论数】方法](http://dev.duoshuo.com/docs/5016427f77cf5fa30500000e)\n\n# 致谢\n这里，要感谢我最亲爱的笨笨<http://huirong.github.io>\n","source":"_posts/hexo-setting-with-comments-and-visitors.md","raw":"title: 给hexo配置上评论和访问量\ndate: 2015-05-30 14:08:49\ntags:\n- hexo\ncategories:\n- hexo\n---\n哈哈,我们家笨笨,绝对是我学习技术的很大很大很大大的动力.更开始用github pages的时候,就觉得没法看访问量和评论数量这事,很蛋疼,不过也没折腾.\n今天上午,我们家笨笨说没有评论和访问量不好,都不知道多少人看了.妹子都发话了,果断要搞定.\n<!-- more -->\ngoogle一番找到解决方法:\n#### 1 关于评论数量的显示,我们可以直接使用多说官网提供的方法,很简单\n#### 2 关于访问量统计这事儿,不太好搞,我找到了这个[不蒜子](http://ibruce.info/2015/04/04/busuanzi/),这位非著名码农自己做的访问统计,哈哈,点个赞\n#### 3 今天还看到了font-awesome,可以显示一些小图标,为了显示效果更好,一并加上去\n先展示一下最终的效果:<br>\n![页底关于整站访问量的显示](http://ww1.sinaimg.cn/large/692869a3gw1esm9snxfcuj20su0ad74x.jpg)\n![文章页面关于访问量和评论数量的显示](http://ww4.sinaimg.cn/large/692869a3gw1esm9tcczdij20r00doq4t.jpg)\n\n下面,开始动手\n# 1 配置评论数量的显示\n首先,确认你的评论系统用的是多说,如果不是,那就不用继续往下看了(参考[这里](http://localhost:4000/2014/11/28/custom-hexo/)配置多说).\n我使用的主题是`light`,其他主题原理类似.我们打开`themes/light/layout/_partial/article.ejs`,我们在`header`标签的尾部添加上下面的代码:\n```html\n    <% if (item.excerpt && index){ %>\n     <% } else { %>\n     <div class=\"busuanzi_container_page_pv\">\n       <span class=\"head-plus\">\n       <i class=\"fa fa-user\"></i><span id=\"busuanzi_value_page_pv\"><i class=\"fa fa-spinner fa-spin\"></i></span>次访问\n       </span>\n       <span class=\"head-plus\">\n       <i class=\"fa fa-comments\"></i><span class=\"ds-thread-count\" data-thread-key=\"<%= page.layout %>-<%= page.slug %>\"><i class=\"fa fa-spinner fa-spin\"></i></span>条评论\n       </span>\n     </div>\n     <% } %>\n```\n最终效果如图<br>\n![修改后的article.ejs](http://ww2.sinaimg.cn/large/692869a3gw1esmas5d58oj20x50jc46f.jpg)\n以上代码,是最终成型的代码,我加入了一些美化的东西,最核心的就是\n```html\n<span class=\"ds-thread-count\" data-thread-key=\"<%= page.layout %>-<%= page.slug %>\"></span>\n```\n尤其注意`data-thread-key`的设置,他和你之前配置多说的时候是一致的,每篇文章有一个独一无二的key,你可以去你的`themes/light/layout/_partial/comment.ejs`里找到关于data-thread-key的内容,直接复制过来即可.\n\nPs:这里我们可能还需要配置下数据显示的格式,在你的多说后台管理里面,进入设置界面如图\n![多说后台设置](http://ww3.sinaimg.cn/large/692869a3gw1esmayan2utj20w50mx0ya.jpg)\n我们找到`暂无评论`,`1条评论`,`{num}条评论`,这几个设置,修改成自己要的格式,也可以参照我的修改,`0`,`1`,`{num}`\n\n# 2 配置文章访问量的显示\n这个更简单了,按照作者的说法,只需要引入一个js,再添加一个span就完成了.由于js一般放置在页面的最底部,所以我们找到`themes/light/layout/_partial/after_footer.ejs`,我们在最后添加上下面的代码:\n```javascript\n<script async src=\"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\">\n</script>\n```\n上面就完成了js文件的引入,我们再在要显示访问量的地方添加一个span就行了.比如我想显示在标题的下面,那就打开`themes/light/layout/_partial/article.ejs`,添加的代码,就是`第一步`里面添加的那个.如果你想简洁一点,也可以只添加下面核心代码就行:\n```html\n本站总访问量<span id=\"busuanzi_value_site_pv\"></span>次\n本站访客数<span id=\"busuanzi_value_site_uv\"></span>人次\n本文总阅读量<span id=\"busuanzi_value_page_pv\"></span>次\n```\n# 3  经过美化后最终的代码\n如果只用官方提供的代码,没有优化,很丑,我优化了下,分享一下.\n\n1.修改`themes/light/layout/_partial/article.ejs`,在header标签的末尾添加以下代码\n```html\n    <% if (item.excerpt && index){ %>\n     <% } else { %>\n     <div class=\"busuanzi_container_page_pv\">\n       <span class=\"head-plus\">\n       <i class=\"fa fa-user\"></i><span id=\"busuanzi_value_page_pv\"><i class=\"fa fa-spinner fa-spin\"></i></span>次访问\n       </span>\n       <span class=\"head-plus\">\n       <i class=\"fa fa-comments\"></i><span class=\"ds-thread-count\" data-thread-key=\"<%= page.layout %>-<%= page.slug %>\"><i class=\"fa fa-spinner fa-spin\"></i></span>条评论\n       </span>\n     </div>\n     <% } %>\n```\n![修改后的article.ejs](http://ww2.sinaimg.cn/large/692869a3gw1esmas5d58oj20x50jc46f.jpg)<br>2.修改`themes/light/layout/_partial/footer.ejs`,下面是footer.ejs的**全部代码**:\n```html\n<div class=\"alignleft\">\n  <% if (config.author){ %>\n  &copy; <%= new Date().getFullYear() %> <%= config.author %>\n  <% } else { %>\n  &copy; <%= new Date().getFullYear() %> <%= config.title %>\n  <% } %>\n<span id=\"busuanzi_container_site_pv\">\n     <i class=\"fa fa-flag\"></i>    你是第<span id=\"busuanzi_value_site_pv\"><i class=\"fa fa-spinner fa-spin\"></i></span>个到访的小伙伴\n</span>\n</div>\n<div class=\"clearfix\"></div>\n```\n<br>3.修改`themes/light/layout/_partial/after_footer.ejs`,我们在**最后**添加上下面的代码:\n\n```javascript\n<script async src=\"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\">\n</script>\n```\n\n4.修改`themes\\light\\source\\css\\_partial\\article.styl`,我们在第124行,在`.entry`之前添加上以下代码,尤其注意与左右的间距,因为它是一个树形结构,它与左侧的距离,影响着它的层级.我们这里应该和entry平级,下面代码应该与`.entry`对齐\n```\n  .busuanzi_container_page_pv\n      margin:20px 0\n      color: # 817C7C\n      font-size: 12px\n  # busuanzi_value_page_pv\n      padding-left:4px\n  .head-plus\n      padding-left:4px\n  .ds-thread-count\n      padding-left:4px\n\n```\n最终效果如图:\n![添加css,注意左对齐](http://ww4.sinaimg.cn/large/692869a3gw1esmajbsx38j20k30gwadu.jpg)<br>5.修改`themes\\light\\source\\css\\_partial\\footer.styl`,在最后添加上以下代码\n```\n# busuanzi_value_site_pv\n  color:black\n  padding:4px\n# busuanzi_container_site_pv\n  padding-left:2em\n```\n6.修改`themes\\light\\source\\css\\_partial\\variable.styl`,在最后添加以下代码\n```\n@import url(\"http://libs.useso.com/js/font-awesome/4.2.0/css/font-awesome.min.css\")\n```\n\nok  打完收工\n\n# 参考文献\n1 博客访问技术工具--不蒜子 <http://ibruce.info/2015/04/04/busuanzi/>\n2 [多说-代码显示【文章评论数】方法](http://dev.duoshuo.com/docs/5016427f77cf5fa30500000e)\n\n# 致谢\n这里，要感谢我最亲爱的笨笨<http://huirong.github.io>\n","slug":"hexo-setting-with-comments-and-visitors","published":1,"updated":"2015-10-29T06:08:49.539Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hou00434si1zd85u68e"},{"title":"hexo发布失败","date":"2015-03-29T10:09:28.000Z","_content":"可能受到上次ddos的问题,这两天国内访问github,总是感觉不顺畅.\n<!-- more -->\n今天下午写了一篇博客,可是却发布不成功,一直卡在这一步:\n![hexo发布的时候卡住](http://ww3.sinaimg.cn/large/692869a3gw1eqmrrf20j1j20g006676y.jpg)\n\n然后我继续等,得到如下错误:\n```\nhexo Failed to receive SOCKS4 connect request ack.\n```\n我执行了`hexo clean`命令,手动删掉了`.deploy`文件夹,可是还是不行\n最后报错\n无法连接`https://github.com/Jackroyal/Jackroyal.github.io.git`\n\n*(ps:此处已经无法重现了,抽风啊)*\n\n最后我换了下这条链接\n我修改了博客目录下的`_config.yml`,改了deploy参数\n原参数设置\n```\ndeploy:\n  type: github\n  repo: https://github.com/Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n修改以后:\n```\ndeploy:\n  type: github\n  repo: git@github.com:Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n然后就deploy成功了.\n\n*PPPS:千万注意,上面的参数设置repo:后面有一个空格,没有空格会报错*\n\n\n# update:\nrepo的两种方式分别为ssh和https\n昨天没搞清楚,专门去查了一下,ssh和https两种提交的区别\n官方推荐用https,因为这回要求你输入用户名和密码,这样更安全\n用ssh的话,只要你的ssh-key(可以设置一道类似密码的东西,和你的key一起加密,这样使用的时候会要求输入这段密码)对,那么就都可以提交,没有了更多的验证过程(可以设置一个para加密,提交会要求输入这段para)\n\n2015-05-06\n最近又发现，使用ssh提交的话，github不会计算到你的conribute里面去，也就是你今天提交了，但是github的contribute不会变化，所以还是改成https吧，不然怎么装B呢？\n\n### 友情链接\n[ubuntu  shadowsocks 全局 代理](http://rolight.cn/blog/?p=34)\n","source":"_posts/hexo-deploy-error.md","raw":"title: hexo发布失败\ndate: 2015-03-29 18:09:28\ntags:\n- hexo\ncategories:\n- hexo\n---\n可能受到上次ddos的问题,这两天国内访问github,总是感觉不顺畅.\n<!-- more -->\n今天下午写了一篇博客,可是却发布不成功,一直卡在这一步:\n![hexo发布的时候卡住](http://ww3.sinaimg.cn/large/692869a3gw1eqmrrf20j1j20g006676y.jpg)\n\n然后我继续等,得到如下错误:\n```\nhexo Failed to receive SOCKS4 connect request ack.\n```\n我执行了`hexo clean`命令,手动删掉了`.deploy`文件夹,可是还是不行\n最后报错\n无法连接`https://github.com/Jackroyal/Jackroyal.github.io.git`\n\n*(ps:此处已经无法重现了,抽风啊)*\n\n最后我换了下这条链接\n我修改了博客目录下的`_config.yml`,改了deploy参数\n原参数设置\n```\ndeploy:\n  type: github\n  repo: https://github.com/Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n修改以后:\n```\ndeploy:\n  type: github\n  repo: git@github.com:Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n然后就deploy成功了.\n\n*PPPS:千万注意,上面的参数设置repo:后面有一个空格,没有空格会报错*\n\n\n# update:\nrepo的两种方式分别为ssh和https\n昨天没搞清楚,专门去查了一下,ssh和https两种提交的区别\n官方推荐用https,因为这回要求你输入用户名和密码,这样更安全\n用ssh的话,只要你的ssh-key(可以设置一道类似密码的东西,和你的key一起加密,这样使用的时候会要求输入这段密码)对,那么就都可以提交,没有了更多的验证过程(可以设置一个para加密,提交会要求输入这段para)\n\n2015-05-06\n最近又发现，使用ssh提交的话，github不会计算到你的conribute里面去，也就是你今天提交了，但是github的contribute不会变化，所以还是改成https吧，不然怎么装B呢？\n\n### 友情链接\n[ubuntu  shadowsocks 全局 代理](http://rolight.cn/blog/?p=34)\n","slug":"hexo-deploy-error","published":1,"updated":"2015-10-29T06:08:49.964Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hp000464si1ksmo7uz3"},{"title":"安装和配置hexo 3.0","date":"2015-06-16T14:22:43.000Z","_content":"update：2015-06-24 16:56\n额，谁会相信，其实这篇文章是拖了一周之后才写的。\n\n因为最近换回了win7，所以之前搭建的hexo环境都没了，需要重新搭建。在网上看到hexo 3.0 还可以，而且，我妹子也换3.0了，so  我也换成hexo 3.0的。\n<!-- more -->\n# 安装环境\n**操作系统**：win7\n**相关版本**：  \n            hexo-cli: 0.1.7\n            os: Windows_NT 6.1.7601 win32 x64\n            node: 0.12.4\n\n\n# 安装过程\n# # 1. 安装Github for windows\n因为我之前就在用Github,所以早就安装了这个.已经装过的同学请忽略这一段.\n下载 [Github for windows](https://windows.github.com/ \"Github for windows\") 并执行即可完成安装(*在线安装,会有点慢*)。这个软件的的好处是有一个带GUI的界面,还有一个终端界面.如图所示\n![Github for windows](http://ww2.sinaimg.cn/large/692869a3jw1emplp1lz31j204w033mx0.jpg)\n![GUI and Bash](http://ww2.sinaimg.cn/large/692869a3gw1empluh6hvej210b0j741r.jpg)\n\n# # 2. 安装Node.js\n在 Windows 环境下安装 [Node.js](http://nodejs.org/ \"Node.js 官网\") 非常简单，仅须下载安装文件并执行即可完成安装。（win下建议下载msi格式的，因为这样可以不用配置环境变量之类的）\n\n# # 3. 测试node.js是否安装\n在任何控制台输入(可以按windows键+R,输入cmd,然后输入npm,一般来说不会有问题)\n```\nnpm\n```\n返回值如下\n```\nUsage: npm <command>\n\nwhere <command> is one of:\n    add-user, adduser, apihelp, author, bin, bugs, c, cache,\n    completion, config, ddp, dedupe, deprecate, docs, edit,\n    explore, faq, find, find-dupes, get, help, help-search,\n    home, i, info, init, install, isntall, issues, la, link,\n    list, ll, ln, login, ls, outdated, owner, pack, prefix,\n    prune, publish, r, rb, rebuild, remove, repo, restart, rm,\n    root, run-script, s, se, search, set, show, shrinkwrap,\n    star, stars, start, stop, submodule, t, tag, test, tst, un,\n    uninstall, unlink, unpublish, unstar, up, update, v,\n    version, view, whoami\n\nnpm <cmd> -h     quick help on <cmd>\nnpm -l           display full usage info\nnpm faq          commonly asked questions\nnpm help <term>  search for help on <term>\nnpm help npm     involved overview\n\nSpecify configs in the ini-formatted file:\n    C:\\Users\\chenhao\\.npmrc\nor on the command line via: npm <command> --key value\nConfig info can be viewed via: npm help config\n\nnpm@1.4.28 D:\\Program Files (x86)\\nodejs\\node_modules\\npm\n```\n看到这个结果,就表示你的node.js已经安装上去了\n*感谢我们家笨笨的反馈：*此处如果npm无效，首先确定win下你采用的是msi格式的安装文件，然后**重启**下电脑，应该就正常了。\n# # 4. 安装hexo\n接下来的操作我都是用**Github for windows**自带的Bash来完成的,因为后面会涉及到SSH,用**Github for windows**,就可以避免这个问题.\n- 在Bash中输入以下命令\n```\nnpm install hexo-cli -g\n```\n- 创建hexo文件夹\n创建你hexo放置的文件夹,先用Bash进入到目标文件夹,比如我的是F:/blog/,接下来初始化hexo,自动生成相关的文件,在F:/blog/环境下,输入\n```\ncd /f/blog  # 这个命令表示当前进入目录为f：/blog/\nhexo init\n```\n- 安装依赖包\n```\nnpm install\n```\n- 本地预览,做完以上操作,可以本地预览一下\n```\nhexo g\nhexo s\n```\n以上两条命令的意思是:\n生成相关文件(就是生成目标html,静态博客嘛,就是很多html组成)\n打开本地服务器预览(node.js就是干这事的,点击访问<http://localhost:4000>,就可以看到了)\n**update-2015-09-29:**在3.0版本中将`hexo server`(简写命令就是`hexo s`),独立成模块,需要手动安装,不然你执行`hexo s`,就会出现无法识别这个命令\n安装方法和后面配置模块一样\n```bash\nnpm install hexo-server --save\n```\n**ok**,到这里,博客搭建基本完成,现在要做的就是把它发布到你的Github上去\n---\n接下来,教你怎么发布到Github上去\n# 注册Github\n这一步没什么说的,如果你连简单的注册都不会,我也不会教你╮(╯▽╰)╭\n# 创建公共库\n在自己Github主页右下角，创建一个新的repository([点这里](https://github.com/new '点我新建'))。比如我的Github账号是Jackroyal，那么我应该创建的repository名字应该是Jackroyal.github.io(注意你的repository名字就是Jackroyal.github.io,我之前用的是Jackroyal怎么尝试都不行)。\n> PS:有个大小写的问题其实我注册的是Jackroyal,大写的J,但是我访问的时候特别是带https的链接,他会自动转为小写访问.怎么说呢?简单点,你就按照你的用户名来,该大写大写,该小写小写\n\n# 部署\n现在万事俱备,只差部署了.\nhexo3.0,跟2.0不同,deploy插件我们需要手动去安装,执行如下命令:\n```\nnpm install hexo-deployer-git --save\n```\n接下来,我们来配置deploy的信息,修改`_config.yml`.\n这个文件在路径是F:/blog/_config.yml.\n用编辑器把它打开,修改最后一段\n```\ndeploy:\n  type: git\n  repo: https://github.com/Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n照着我的这个格式修改就好了,把我里面的用户名替换成你的.\n至此基本完成所有搭建步骤.\n# 上传\n我们开始上传项目的代码,再重复一次,我一直以来用的工具都是_Github for windows_自带的Bash,所以我没有配置SSH,如果你用的windows自带的终端或者其他比如msysgit,可能需要配置SSH,不然无法使用Github(点击[`这里`](https://help.github.com/articles/generating-ssh-keys/ \"https://help.github.com/articles/generating-ssh-keys/\")查看官方教程).\n我们输入以下命令\n```\nhexo g\nhexo d\n```\n或者偷个懒\n```\nhexo d -g\n```\nok,现在就可以去看看你的个人主页了,逼格满满有木有.\n如果发布不成功,继续往下面看.\n# 配置hexo\n上面的内容和之前一样,接下来写,配置hexo 3.0的步骤.\n\n## 1 安装rss支持\n执行如下命令:\n```\nnpm install hexo-generator-feed --save\n```\n我们接下来修改配置文件,编辑`_config.yml`\n```\nfeed:\n  type: atom\n  path: atom.xml\n  limit: 20\n```\n## 2 安装sitemap支持\n执行如下命令:\n```\nnpm install hexo-generator-sitemap --save\n```\n我们接下来修改配置文件,编辑`_config.yml`\n```\nsitemap:\n    path: sitemap.xml\n```\n\n**PS:类似的,还可以安装其他的插件,尤其注意`hexo-deployer-git`这个插件,如果你发布不成功,可能是这个插件没有装**\n```\nnpm install hexo-generator-index --save\nnpm install hexo-generator-archive --save\nnpm install hexo-generator-category --save\nnpm install hexo-generator-tag --save\nnpm install hexo-deployer-git --save\n```\n## 3 最终修改后的配置文件\n我把我的配置文件分享出来给大家参考下:\n```\n# Hexo Configuration\n# # Docs: http://hexo.io/docs/configuration.html\n# # Source: https://github.com/hexojs/hexo/\n\n# Site\ntitle: 搁浅St的blog\nsubtitle: 我最喜欢笨笨\ndescription: jackroyal 博客 搁浅St 笨笨\nauthor: 搁浅St\nauthor: John Doe\nlanguage: zh-CN\ntimezone:\n\n# URL\n# # If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'\nurl: http://jackroyal.github.io\nroot: /\npermalink: :year/:month/:day/:title/\npermalink_defaults:\n\n# Directory\nsource_dir: source\npublic_dir: public\ntag_dir: tags\narchive_dir: archives\ncategory_dir: categories\ncode_dir: downloads/code\ni18n_dir: :lang\nskip_render:\n\n# Writing\nnew_post_name: :title.md # File name of new posts\ndefault_layout: post\ntitlecase: false # Transform title into titlecase\nexternal_link: true # Open external links in new tab\nfilename_case: 0\nrender_drafts: false\npost_asset_folder: false\nrelative_link: false\nfuture: true\nhighlight:\n  enable: true\n  line_number: true\n  auto_detect: true\n  tab_replace:\n\n# Category & Tag\ndefault_category: uncategorized\ncategory_map:\ntag_map:\n\n# Date / Time format\n# # Hexo uses Moment.js to parse and display date\n# # You can customize the date format as defined in\n# # http://momentjs.com/docs/# /displaying/format/\ndate_format: YYYY-MM-DD\ntime_format: HH:mm:ss\n\n# Pagination\n# # Set per_page to 0 to disable pagination\nper_page: 10\npagination_dir: page\n\n\n# Extensions\n# # Plugins: http://hexo.io/plugins/\n\nindex_generator:\n  per_page: 10 ## 首页默认10篇文章标题 如果值为0不分页\n\narchive_generator:\n    per_page: 10 ## 归档页面默认10篇文章标题\n    yearly: true  ## 生成年视图\n    monthly: true ## 生成月视图\n\ntag_generator:\n    per_page: 10 ## 标签分类页面默认10篇文章\n\ncategory_generator:\n    per_page: 10 ### 分类页面默认10篇文章\n\nsitemap:\n    path: sitemap.xml\n\nfeed:\n  type: atom\n  path: atom.xml\n  limit: 20\n\nduoshuo_shortname: jackroyal  ## 这里填写你的多说的短网址\n# # Themes: http://hexo.io/themes/\ntheme: light   ## 主题的名称,我用的是light,默认的是landscape\n\n# Deployment\n# # Docs: http://hexo.io/docs/deployment.html\ndeploy:\n  type: git\n  repo: https://github.com/Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n\nhexo 3.0有一些新的特性,插件的封装更好了,插件安装和管理很方便.\nhexo还支持多发布,可以同时发布到github和gitcafe.\n\n# 参考文献\n1 [hexo 服务器](https://hexo.io/zh-cn/docs/server.html)\n","source":"_posts/hexo-3-0-update.md","raw":"title: 安装和配置hexo 3.0\ndate: 2015-06-16 22:22:43\ntags:\n- hexo\ncategories:\n- hexo\n---\nupdate：2015-06-24 16:56\n额，谁会相信，其实这篇文章是拖了一周之后才写的。\n\n因为最近换回了win7，所以之前搭建的hexo环境都没了，需要重新搭建。在网上看到hexo 3.0 还可以，而且，我妹子也换3.0了，so  我也换成hexo 3.0的。\n<!-- more -->\n# 安装环境\n**操作系统**：win7\n**相关版本**：  \n            hexo-cli: 0.1.7\n            os: Windows_NT 6.1.7601 win32 x64\n            node: 0.12.4\n\n\n# 安装过程\n# # 1. 安装Github for windows\n因为我之前就在用Github,所以早就安装了这个.已经装过的同学请忽略这一段.\n下载 [Github for windows](https://windows.github.com/ \"Github for windows\") 并执行即可完成安装(*在线安装,会有点慢*)。这个软件的的好处是有一个带GUI的界面,还有一个终端界面.如图所示\n![Github for windows](http://ww2.sinaimg.cn/large/692869a3jw1emplp1lz31j204w033mx0.jpg)\n![GUI and Bash](http://ww2.sinaimg.cn/large/692869a3gw1empluh6hvej210b0j741r.jpg)\n\n# # 2. 安装Node.js\n在 Windows 环境下安装 [Node.js](http://nodejs.org/ \"Node.js 官网\") 非常简单，仅须下载安装文件并执行即可完成安装。（win下建议下载msi格式的，因为这样可以不用配置环境变量之类的）\n\n# # 3. 测试node.js是否安装\n在任何控制台输入(可以按windows键+R,输入cmd,然后输入npm,一般来说不会有问题)\n```\nnpm\n```\n返回值如下\n```\nUsage: npm <command>\n\nwhere <command> is one of:\n    add-user, adduser, apihelp, author, bin, bugs, c, cache,\n    completion, config, ddp, dedupe, deprecate, docs, edit,\n    explore, faq, find, find-dupes, get, help, help-search,\n    home, i, info, init, install, isntall, issues, la, link,\n    list, ll, ln, login, ls, outdated, owner, pack, prefix,\n    prune, publish, r, rb, rebuild, remove, repo, restart, rm,\n    root, run-script, s, se, search, set, show, shrinkwrap,\n    star, stars, start, stop, submodule, t, tag, test, tst, un,\n    uninstall, unlink, unpublish, unstar, up, update, v,\n    version, view, whoami\n\nnpm <cmd> -h     quick help on <cmd>\nnpm -l           display full usage info\nnpm faq          commonly asked questions\nnpm help <term>  search for help on <term>\nnpm help npm     involved overview\n\nSpecify configs in the ini-formatted file:\n    C:\\Users\\chenhao\\.npmrc\nor on the command line via: npm <command> --key value\nConfig info can be viewed via: npm help config\n\nnpm@1.4.28 D:\\Program Files (x86)\\nodejs\\node_modules\\npm\n```\n看到这个结果,就表示你的node.js已经安装上去了\n*感谢我们家笨笨的反馈：*此处如果npm无效，首先确定win下你采用的是msi格式的安装文件，然后**重启**下电脑，应该就正常了。\n# # 4. 安装hexo\n接下来的操作我都是用**Github for windows**自带的Bash来完成的,因为后面会涉及到SSH,用**Github for windows**,就可以避免这个问题.\n- 在Bash中输入以下命令\n```\nnpm install hexo-cli -g\n```\n- 创建hexo文件夹\n创建你hexo放置的文件夹,先用Bash进入到目标文件夹,比如我的是F:/blog/,接下来初始化hexo,自动生成相关的文件,在F:/blog/环境下,输入\n```\ncd /f/blog  # 这个命令表示当前进入目录为f：/blog/\nhexo init\n```\n- 安装依赖包\n```\nnpm install\n```\n- 本地预览,做完以上操作,可以本地预览一下\n```\nhexo g\nhexo s\n```\n以上两条命令的意思是:\n生成相关文件(就是生成目标html,静态博客嘛,就是很多html组成)\n打开本地服务器预览(node.js就是干这事的,点击访问<http://localhost:4000>,就可以看到了)\n**update-2015-09-29:**在3.0版本中将`hexo server`(简写命令就是`hexo s`),独立成模块,需要手动安装,不然你执行`hexo s`,就会出现无法识别这个命令\n安装方法和后面配置模块一样\n```bash\nnpm install hexo-server --save\n```\n**ok**,到这里,博客搭建基本完成,现在要做的就是把它发布到你的Github上去\n---\n接下来,教你怎么发布到Github上去\n# 注册Github\n这一步没什么说的,如果你连简单的注册都不会,我也不会教你╮(╯▽╰)╭\n# 创建公共库\n在自己Github主页右下角，创建一个新的repository([点这里](https://github.com/new '点我新建'))。比如我的Github账号是Jackroyal，那么我应该创建的repository名字应该是Jackroyal.github.io(注意你的repository名字就是Jackroyal.github.io,我之前用的是Jackroyal怎么尝试都不行)。\n> PS:有个大小写的问题其实我注册的是Jackroyal,大写的J,但是我访问的时候特别是带https的链接,他会自动转为小写访问.怎么说呢?简单点,你就按照你的用户名来,该大写大写,该小写小写\n\n# 部署\n现在万事俱备,只差部署了.\nhexo3.0,跟2.0不同,deploy插件我们需要手动去安装,执行如下命令:\n```\nnpm install hexo-deployer-git --save\n```\n接下来,我们来配置deploy的信息,修改`_config.yml`.\n这个文件在路径是F:/blog/_config.yml.\n用编辑器把它打开,修改最后一段\n```\ndeploy:\n  type: git\n  repo: https://github.com/Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n照着我的这个格式修改就好了,把我里面的用户名替换成你的.\n至此基本完成所有搭建步骤.\n# 上传\n我们开始上传项目的代码,再重复一次,我一直以来用的工具都是_Github for windows_自带的Bash,所以我没有配置SSH,如果你用的windows自带的终端或者其他比如msysgit,可能需要配置SSH,不然无法使用Github(点击[`这里`](https://help.github.com/articles/generating-ssh-keys/ \"https://help.github.com/articles/generating-ssh-keys/\")查看官方教程).\n我们输入以下命令\n```\nhexo g\nhexo d\n```\n或者偷个懒\n```\nhexo d -g\n```\nok,现在就可以去看看你的个人主页了,逼格满满有木有.\n如果发布不成功,继续往下面看.\n# 配置hexo\n上面的内容和之前一样,接下来写,配置hexo 3.0的步骤.\n\n## 1 安装rss支持\n执行如下命令:\n```\nnpm install hexo-generator-feed --save\n```\n我们接下来修改配置文件,编辑`_config.yml`\n```\nfeed:\n  type: atom\n  path: atom.xml\n  limit: 20\n```\n## 2 安装sitemap支持\n执行如下命令:\n```\nnpm install hexo-generator-sitemap --save\n```\n我们接下来修改配置文件,编辑`_config.yml`\n```\nsitemap:\n    path: sitemap.xml\n```\n\n**PS:类似的,还可以安装其他的插件,尤其注意`hexo-deployer-git`这个插件,如果你发布不成功,可能是这个插件没有装**\n```\nnpm install hexo-generator-index --save\nnpm install hexo-generator-archive --save\nnpm install hexo-generator-category --save\nnpm install hexo-generator-tag --save\nnpm install hexo-deployer-git --save\n```\n## 3 最终修改后的配置文件\n我把我的配置文件分享出来给大家参考下:\n```\n# Hexo Configuration\n# # Docs: http://hexo.io/docs/configuration.html\n# # Source: https://github.com/hexojs/hexo/\n\n# Site\ntitle: 搁浅St的blog\nsubtitle: 我最喜欢笨笨\ndescription: jackroyal 博客 搁浅St 笨笨\nauthor: 搁浅St\nauthor: John Doe\nlanguage: zh-CN\ntimezone:\n\n# URL\n# # If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'\nurl: http://jackroyal.github.io\nroot: /\npermalink: :year/:month/:day/:title/\npermalink_defaults:\n\n# Directory\nsource_dir: source\npublic_dir: public\ntag_dir: tags\narchive_dir: archives\ncategory_dir: categories\ncode_dir: downloads/code\ni18n_dir: :lang\nskip_render:\n\n# Writing\nnew_post_name: :title.md # File name of new posts\ndefault_layout: post\ntitlecase: false # Transform title into titlecase\nexternal_link: true # Open external links in new tab\nfilename_case: 0\nrender_drafts: false\npost_asset_folder: false\nrelative_link: false\nfuture: true\nhighlight:\n  enable: true\n  line_number: true\n  auto_detect: true\n  tab_replace:\n\n# Category & Tag\ndefault_category: uncategorized\ncategory_map:\ntag_map:\n\n# Date / Time format\n# # Hexo uses Moment.js to parse and display date\n# # You can customize the date format as defined in\n# # http://momentjs.com/docs/# /displaying/format/\ndate_format: YYYY-MM-DD\ntime_format: HH:mm:ss\n\n# Pagination\n# # Set per_page to 0 to disable pagination\nper_page: 10\npagination_dir: page\n\n\n# Extensions\n# # Plugins: http://hexo.io/plugins/\n\nindex_generator:\n  per_page: 10 ## 首页默认10篇文章标题 如果值为0不分页\n\narchive_generator:\n    per_page: 10 ## 归档页面默认10篇文章标题\n    yearly: true  ## 生成年视图\n    monthly: true ## 生成月视图\n\ntag_generator:\n    per_page: 10 ## 标签分类页面默认10篇文章\n\ncategory_generator:\n    per_page: 10 ### 分类页面默认10篇文章\n\nsitemap:\n    path: sitemap.xml\n\nfeed:\n  type: atom\n  path: atom.xml\n  limit: 20\n\nduoshuo_shortname: jackroyal  ## 这里填写你的多说的短网址\n# # Themes: http://hexo.io/themes/\ntheme: light   ## 主题的名称,我用的是light,默认的是landscape\n\n# Deployment\n# # Docs: http://hexo.io/docs/deployment.html\ndeploy:\n  type: git\n  repo: https://github.com/Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n\nhexo 3.0有一些新的特性,插件的封装更好了,插件安装和管理很方便.\nhexo还支持多发布,可以同时发布到github和gitcafe.\n\n# 参考文献\n1 [hexo 服务器](https://hexo.io/zh-cn/docs/server.html)\n","slug":"hexo-3-0-update","published":1,"updated":"2015-10-29T06:08:50.371Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hp500494si1isedzxp3"},{"title":"使用opencv实现人脸识别","date":"2015-04-26T02:50:00.000Z","_content":"最近搞了两个星期的opencv，人脸识别方向，感觉没有什么前途，看不到论文在哪里啊。\n<!-- more -->\n```python\n# !/usr/bin/env python\n# -*- coding:utf-8-*-\nimport os\nimport sys\nimport cv2\nimport numpy as np\n\nz = {} # 存储关于每张图片对应的lable\nfor_pre = []  # 存储用来进行测试的图片，规则是每个人10张图，5张用来训练，5张用来测试\ndef normalize(X, low, high, dtype=None):\n    \"\"\"对数据进行正常化处理，让其处于最高和最低值之间.\"\"\"\n    X = np.asarray(X)\n    minX, maxX = np.min(X), np.max(X)\n    # normalize to [0...1].\n    X = X - float(minX)\n    X = X / float((maxX - minX))\n    # scale to [low...high].\n    X = X * (high-low)\n    X = X + low\n    if dtype is None:\n        return np.asarray(X)\n    return np.asarray(X, dtype=dtype)\n\n\ndef read_images(path, sz=None):\n    \"\"\"从文件夹中读取图像，并且将其大小限制在一定范围之内\n\n    参数:\n        path: 图片的路径\n        sz: 设定图像的大小以元组的形式，例如(92,112)\n\n    返回值:\n        返回一个list的数据[X,y]\n\n            X: 一个numpy的数组，里面存储的是所有的图片的矩阵.\n            y:一个list存储的，都是与X中图片对应的lable\n    \"\"\"\n    c = 0\n    X,y = [], []\n    for dirname, dirnames, filenames in os.walk(path):\n        for subdirname in dirnames:\n            subject_path = os.path.join(dirname, subdirname)\n            for filename in os.listdir(subject_path):\n                try:\n                    im = cv2.imread(os.path.join(subject_path, filename), cv2.IMREAD_GRAYSCALE)\n                    # resize to given size (if given)\n                    if (sz is not None):\n                        im = cv2.resize(im, sz)\n                    if y.count(c) > 4:\n                        for_pre.append({'no':c,'src':np.asarray(im, dtype=np.uint8)})\n                    else:\n                        X.append(np.asarray(im, dtype=np.uint8))\n                        y.append(c)\n                    global z\n                    z[os.path.join(subject_path, filename)] = c\n                except IOError, (errno, strerror):\n                    print \"I/O error({0}): {1}\".format(errno, strerror)\n                except:\n                    print \"Unexpected error:\", sys.exc_info()[0]\n                    raise\n            c = c+1\n    return [X,y]\n\ndef prediction(model):\n    \"\"\"图像预测\n\n    参数:\n        model: 就是图片训练的那个model\n\n    数据集中每个人存储了10张图片，我把其中的5张存储到for_pre，作为训练数据。用已知的lable和预测的lable作比较，得出图片识别正确的概率\n    \"\"\"\n    tn = 0 # 识别正确的图片数\n    for item in for_pre:\n        [p_label, p_confidence] = model.predict(cv2.resize(item['src'],(92,112)))\n        if p_label == item['no']:\n            tn = tn+1\n        else:\n            print 'the answer is %d,' % item['no'],\n            print \"Predicted label = %d (confidence=%.2f)\" % (p_label, p_confidence)\n\n    print \"总共有%d次预测，其中正确次数为%d\" %(len(for_pre),tn)\n\nif __name__ == \"__main__\":\n    # This is where we write the images, if an output_dir is given\n    # in command line:\n    out_dir = None\n    # You'll need at least a path to your image data, please see\n    # the tutorial coming with this source code on how to prepare\n    # your image data:\n    if len(sys.argv) < 2:\n        print \"USAGE: face_rec.py </path/to/images> [</path/to/store/images/at>]\"\n        sys.exit()\n    # Now read in the image data. This must be a valid path!\n    [X,y] = read_images(sys.argv[1], (92, 112))\n \n    # Convert labels to 32bit integers. This is a workaround for 64bit machines,\n    # because the labels will truncated else. This will be fixed in code as\n    # soon as possible, so Python users don't need to know about this.\n    # Thanks to Leo Dirac for reporting:\n    y = np.asarray(y, dtype=np.int32)\n    # If a out_dir is given, set it:\n    if len(sys.argv) == 3:\n        out_dir = sys.argv[2]\n    # Create the Eigenfaces model. We are going to use the default\n    # parameters for this simple example, please read the documentation\n    # for thresholding:\n    model = cv2.createEigenFaceRecognizer()\n    # Read\n    # Learn the model. Remember our function returns Python lists,\n    # so we use np.asarray to turn them into NumPy lists to make\n    # the OpenCV wrapper happy:\n    model.train(np.asarray(X), np.asarray(y))\n    prediction(model) # 图片预测\n    #\n    #\n    # You can see the available parameters with getParams():\n    print model.getParams()\n    # Now let's get some data:\n    mean = model.getMat(\"mean\")\n    print out_dir + '/out.xml'\n    f = open(out_dir + '/out.xml','w')\n    model.save(out_dir + '/out.xml')\n    eigenvectors = model.getMat(\"eigenvectors\")\n    # We'll save the mean, by first normalizing it:\n    mean_norm = normalize(mean, 0, 255, dtype=np.uint8)\n    mean_resized = mean_norm.reshape(X[0].shape)\n    if out_dir is None:\n        cv2.imshow(\"mean\", mean_resized)\n    else:\n        cv2.imwrite(\"%s/mean.png\" % (out_dir), mean_resized)\n    # Turn the first (at most) 16 eigenvectors into grayscale\n    # images. You could also use cv::normalize here, but sticking\n    # to NumPy is much easier for now.\n    # Note: eigenvectors are stored by column:\n    # for i in xrange(min(len(X), 16)):\n    #     eigenvector_i = eigenvectors[:,i].reshape(X[0].shape)\n    #     eigenvector_i_norm = normalize(eigenvector_i, 0, 255, dtype=np.uint8)\n    #     # Show or save the images:\n    #     if out_dir is None:\n    #         cv2.imshow(\"%s/eigenface_%d\" % (out_dir,i), eigenvector_i_norm)\n    #     else:\n    #         cv2.imwrite(\"%s/eigenface_%d.png\" % (out_dir,i), eigenvector_i_norm)\n    # Show the images:\n    print z\n    if out_dir is None:\n        cv2.waitKey(0)\n```\n\n代码执行效果如下\n![人脸识别执行效果](http://ww1.sinaimg.cn/large/692869a3gw1eriuc3wsckj20nr08qn2q.jpg)\n我在这里输出的是那些预测错误的。`总共有200次预测，其中正确次数为186。`这预测率有点低啊，我用的数据都是来自于[ AT&T Facedatabase](http://www.cl.cam.ac.uk/research/dtg/attarchive/facedatabase.html)。一共40个人，每个人10张图，图片宽高是92*112像素，全部是灰度图像。\n至于如何提高图片识别的效率，我也不知道。\n\n# 参考文献\n1 <http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html>\n2 [python调用opencv实现人脸识别](https://code.google.com/p/pythonxy/source/browse/src/python/OpenCV/DOC/samples/python2/facerec_demo.py?repo=xy-27&r=a2e41c7a3cb6db536b948747872cab71c696b44e)\n","source":"_posts/face-recognizer.md","raw":"title: 使用opencv实现人脸识别\ndate: 2015-04-26 10:50:00\ntags:\n- opencv\n- 图像处理\n- python\ncategories:\n- 图像处理\n---\n最近搞了两个星期的opencv，人脸识别方向，感觉没有什么前途，看不到论文在哪里啊。\n<!-- more -->\n```python\n# !/usr/bin/env python\n# -*- coding:utf-8-*-\nimport os\nimport sys\nimport cv2\nimport numpy as np\n\nz = {} # 存储关于每张图片对应的lable\nfor_pre = []  # 存储用来进行测试的图片，规则是每个人10张图，5张用来训练，5张用来测试\ndef normalize(X, low, high, dtype=None):\n    \"\"\"对数据进行正常化处理，让其处于最高和最低值之间.\"\"\"\n    X = np.asarray(X)\n    minX, maxX = np.min(X), np.max(X)\n    # normalize to [0...1].\n    X = X - float(minX)\n    X = X / float((maxX - minX))\n    # scale to [low...high].\n    X = X * (high-low)\n    X = X + low\n    if dtype is None:\n        return np.asarray(X)\n    return np.asarray(X, dtype=dtype)\n\n\ndef read_images(path, sz=None):\n    \"\"\"从文件夹中读取图像，并且将其大小限制在一定范围之内\n\n    参数:\n        path: 图片的路径\n        sz: 设定图像的大小以元组的形式，例如(92,112)\n\n    返回值:\n        返回一个list的数据[X,y]\n\n            X: 一个numpy的数组，里面存储的是所有的图片的矩阵.\n            y:一个list存储的，都是与X中图片对应的lable\n    \"\"\"\n    c = 0\n    X,y = [], []\n    for dirname, dirnames, filenames in os.walk(path):\n        for subdirname in dirnames:\n            subject_path = os.path.join(dirname, subdirname)\n            for filename in os.listdir(subject_path):\n                try:\n                    im = cv2.imread(os.path.join(subject_path, filename), cv2.IMREAD_GRAYSCALE)\n                    # resize to given size (if given)\n                    if (sz is not None):\n                        im = cv2.resize(im, sz)\n                    if y.count(c) > 4:\n                        for_pre.append({'no':c,'src':np.asarray(im, dtype=np.uint8)})\n                    else:\n                        X.append(np.asarray(im, dtype=np.uint8))\n                        y.append(c)\n                    global z\n                    z[os.path.join(subject_path, filename)] = c\n                except IOError, (errno, strerror):\n                    print \"I/O error({0}): {1}\".format(errno, strerror)\n                except:\n                    print \"Unexpected error:\", sys.exc_info()[0]\n                    raise\n            c = c+1\n    return [X,y]\n\ndef prediction(model):\n    \"\"\"图像预测\n\n    参数:\n        model: 就是图片训练的那个model\n\n    数据集中每个人存储了10张图片，我把其中的5张存储到for_pre，作为训练数据。用已知的lable和预测的lable作比较，得出图片识别正确的概率\n    \"\"\"\n    tn = 0 # 识别正确的图片数\n    for item in for_pre:\n        [p_label, p_confidence] = model.predict(cv2.resize(item['src'],(92,112)))\n        if p_label == item['no']:\n            tn = tn+1\n        else:\n            print 'the answer is %d,' % item['no'],\n            print \"Predicted label = %d (confidence=%.2f)\" % (p_label, p_confidence)\n\n    print \"总共有%d次预测，其中正确次数为%d\" %(len(for_pre),tn)\n\nif __name__ == \"__main__\":\n    # This is where we write the images, if an output_dir is given\n    # in command line:\n    out_dir = None\n    # You'll need at least a path to your image data, please see\n    # the tutorial coming with this source code on how to prepare\n    # your image data:\n    if len(sys.argv) < 2:\n        print \"USAGE: face_rec.py </path/to/images> [</path/to/store/images/at>]\"\n        sys.exit()\n    # Now read in the image data. This must be a valid path!\n    [X,y] = read_images(sys.argv[1], (92, 112))\n \n    # Convert labels to 32bit integers. This is a workaround for 64bit machines,\n    # because the labels will truncated else. This will be fixed in code as\n    # soon as possible, so Python users don't need to know about this.\n    # Thanks to Leo Dirac for reporting:\n    y = np.asarray(y, dtype=np.int32)\n    # If a out_dir is given, set it:\n    if len(sys.argv) == 3:\n        out_dir = sys.argv[2]\n    # Create the Eigenfaces model. We are going to use the default\n    # parameters for this simple example, please read the documentation\n    # for thresholding:\n    model = cv2.createEigenFaceRecognizer()\n    # Read\n    # Learn the model. Remember our function returns Python lists,\n    # so we use np.asarray to turn them into NumPy lists to make\n    # the OpenCV wrapper happy:\n    model.train(np.asarray(X), np.asarray(y))\n    prediction(model) # 图片预测\n    #\n    #\n    # You can see the available parameters with getParams():\n    print model.getParams()\n    # Now let's get some data:\n    mean = model.getMat(\"mean\")\n    print out_dir + '/out.xml'\n    f = open(out_dir + '/out.xml','w')\n    model.save(out_dir + '/out.xml')\n    eigenvectors = model.getMat(\"eigenvectors\")\n    # We'll save the mean, by first normalizing it:\n    mean_norm = normalize(mean, 0, 255, dtype=np.uint8)\n    mean_resized = mean_norm.reshape(X[0].shape)\n    if out_dir is None:\n        cv2.imshow(\"mean\", mean_resized)\n    else:\n        cv2.imwrite(\"%s/mean.png\" % (out_dir), mean_resized)\n    # Turn the first (at most) 16 eigenvectors into grayscale\n    # images. You could also use cv::normalize here, but sticking\n    # to NumPy is much easier for now.\n    # Note: eigenvectors are stored by column:\n    # for i in xrange(min(len(X), 16)):\n    #     eigenvector_i = eigenvectors[:,i].reshape(X[0].shape)\n    #     eigenvector_i_norm = normalize(eigenvector_i, 0, 255, dtype=np.uint8)\n    #     # Show or save the images:\n    #     if out_dir is None:\n    #         cv2.imshow(\"%s/eigenface_%d\" % (out_dir,i), eigenvector_i_norm)\n    #     else:\n    #         cv2.imwrite(\"%s/eigenface_%d.png\" % (out_dir,i), eigenvector_i_norm)\n    # Show the images:\n    print z\n    if out_dir is None:\n        cv2.waitKey(0)\n```\n\n代码执行效果如下\n![人脸识别执行效果](http://ww1.sinaimg.cn/large/692869a3gw1eriuc3wsckj20nr08qn2q.jpg)\n我在这里输出的是那些预测错误的。`总共有200次预测，其中正确次数为186。`这预测率有点低啊，我用的数据都是来自于[ AT&T Facedatabase](http://www.cl.cam.ac.uk/research/dtg/attarchive/facedatabase.html)。一共40个人，每个人10张图，图片宽高是92*112像素，全部是灰度图像。\n至于如何提高图片识别的效率，我也不知道。\n\n# 参考文献\n1 <http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html>\n2 [python调用opencv实现人脸识别](https://code.google.com/p/pythonxy/source/browse/src/python/OpenCV/DOC/samples/python2/facerec_demo.py?repo=xy-27&r=a2e41c7a3cb6db536b948747872cab71c696b44e)\n","slug":"face-recognizer","published":1,"updated":"2015-10-29T06:08:51.233Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hpa004c4si1xurcydka"},{"title":"使用opencv实现人脸检测","date":"2015-04-26T04:54:24.000Z","_content":"这两个星期，都在搞这个，就把代码都分享一下，太烂，就不分享到github了。\n<!-- more -->\n```python\n# !/usr/bin/env python\n# -*- coding:utf-8-*-\n__author__ = 'chen'\nimport cv2\nimport Image\nimport ImageDraw\nimport sys,os\ndef detectFaces(image_name):\n    img = cv2.imread(image_name)\n    face_cascade = cv2.CascadeClassifier('../data2/haarcascades/haarcascade_frontalface_alt.xml')# 加载级联分类器，这里使用的是intel训练出来的人脸识别分类器\n    if img.ndim == 3:# 判断图片是否是灰度图像，如果img.ndim==3那就表示不是灰度图像\n        gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)# 将图片转化为灰度图像\n    else:\n        gray = img\n\n    faces = face_cascade.detectMultiScale(gray, scaleFactor=1.2, minNeighbors=4, minSize=(30, 30), flags = cv2.CASCADE_SCALE_IMAGE)# 核心操作，返回图片中所有的人脸的坐标和宽高度\n    result = []\n    for (x, y, width, height) in faces:\n        print (x, y, width, height)\n        result.append((x, y, x+width, y+height))# 将原始数据，转化为人脸的四个点的坐标\n    return result\n\ndef drawFaces(image_name):\n    faces = detectFaces(image_name)# 此处的返回值是一个元组，(x, y, width, height)，每一个元组都包括人脸的（x,y）坐标，还有人脸的宽度和高度，有这些数据，我们就可以把人脸标记出来，比如画一个矩形框出来\n    print faces\n    if faces:\n        imga = cv2.imread(image_name)# 读取图片\n        draw_rects(imga, faces, (0,255,0))# 画矩形标记\n        cv2.imshow('img', imga)# 显示修改后的矩形\n        cv2.waitKey(0)\n\ndef draw_rects(img, rects, color):\n    for x1, y1, x2, y2 in rects:\n        cv2.rectangle(img, (x1, y1), (x2, y2), color, 2)# 调用cv2的矩形函数，画矩形\n\ndef saveFaces(image_name):# 将人脸截取并保存成图片\n    faces = detectFaces(image_name)\n    if faces:\n        save_dir = image_name.split('.')[0] + \"_faces_\"\n        if not os.path.isdir(save_dir):# 检测目录是否存在，如果不存在那就创建目录\n            os.mkdir(save_dir)\n        count = 0\n        for (x1, y1, x2, y2) in faces:\n            imga = cv2.imread(image_name)\n            file_name = os.path.join(save_dir,str(count)+\".jpg\")\n            roi = imga[y1:y2,x1:x2]# 这一步是重点，他就像取一个数组一样，把人脸的部分保存出来\n            cv2.imwrite(file_name,cv2.cvtColor(cv2.resize(roi,(92,112)), cv2.COLOR_BGR2GRAY))# 把图片的size重新设定维（92,112），并将图片转换为灰度图像\n            # cv2.imshow('aaa',imga)\n\n\ndrawFaces('../at/chen.jpg')\nsaveFaces('../at/chen.jpg')\n```\n这里面的截取人脸并保存的saveFaces函数，我觉得还不错。网上找到的代码，调用了Image库，我的代码全部都是用cv2搞定的，没有用Image库。画矩形也是，我也都是用cv2自带的东西完成的。\n我用以上代码生成的数据，去进行人脸识别，惨不忍睹。\n\n\n# 参考文献\n1 [Python-OpenCV人脸检测(代码)](http://blog.csdn.net/u012162613/article/details/43523507)\n2 [python os.path模块常用方法详解](http://wangwei007.blog.51cto.com/68019/1104940)\n","source":"_posts/face-detection.md","raw":"title: 使用opencv实现人脸检测\ndate: 2015-04-26 12:54:24\ntags:\n- opencv\n- 图像处理\n- python\ncategories:\n- 图像处理\n---\n这两个星期，都在搞这个，就把代码都分享一下，太烂，就不分享到github了。\n<!-- more -->\n```python\n# !/usr/bin/env python\n# -*- coding:utf-8-*-\n__author__ = 'chen'\nimport cv2\nimport Image\nimport ImageDraw\nimport sys,os\ndef detectFaces(image_name):\n    img = cv2.imread(image_name)\n    face_cascade = cv2.CascadeClassifier('../data2/haarcascades/haarcascade_frontalface_alt.xml')# 加载级联分类器，这里使用的是intel训练出来的人脸识别分类器\n    if img.ndim == 3:# 判断图片是否是灰度图像，如果img.ndim==3那就表示不是灰度图像\n        gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)# 将图片转化为灰度图像\n    else:\n        gray = img\n\n    faces = face_cascade.detectMultiScale(gray, scaleFactor=1.2, minNeighbors=4, minSize=(30, 30), flags = cv2.CASCADE_SCALE_IMAGE)# 核心操作，返回图片中所有的人脸的坐标和宽高度\n    result = []\n    for (x, y, width, height) in faces:\n        print (x, y, width, height)\n        result.append((x, y, x+width, y+height))# 将原始数据，转化为人脸的四个点的坐标\n    return result\n\ndef drawFaces(image_name):\n    faces = detectFaces(image_name)# 此处的返回值是一个元组，(x, y, width, height)，每一个元组都包括人脸的（x,y）坐标，还有人脸的宽度和高度，有这些数据，我们就可以把人脸标记出来，比如画一个矩形框出来\n    print faces\n    if faces:\n        imga = cv2.imread(image_name)# 读取图片\n        draw_rects(imga, faces, (0,255,0))# 画矩形标记\n        cv2.imshow('img', imga)# 显示修改后的矩形\n        cv2.waitKey(0)\n\ndef draw_rects(img, rects, color):\n    for x1, y1, x2, y2 in rects:\n        cv2.rectangle(img, (x1, y1), (x2, y2), color, 2)# 调用cv2的矩形函数，画矩形\n\ndef saveFaces(image_name):# 将人脸截取并保存成图片\n    faces = detectFaces(image_name)\n    if faces:\n        save_dir = image_name.split('.')[0] + \"_faces_\"\n        if not os.path.isdir(save_dir):# 检测目录是否存在，如果不存在那就创建目录\n            os.mkdir(save_dir)\n        count = 0\n        for (x1, y1, x2, y2) in faces:\n            imga = cv2.imread(image_name)\n            file_name = os.path.join(save_dir,str(count)+\".jpg\")\n            roi = imga[y1:y2,x1:x2]# 这一步是重点，他就像取一个数组一样，把人脸的部分保存出来\n            cv2.imwrite(file_name,cv2.cvtColor(cv2.resize(roi,(92,112)), cv2.COLOR_BGR2GRAY))# 把图片的size重新设定维（92,112），并将图片转换为灰度图像\n            # cv2.imshow('aaa',imga)\n\n\ndrawFaces('../at/chen.jpg')\nsaveFaces('../at/chen.jpg')\n```\n这里面的截取人脸并保存的saveFaces函数，我觉得还不错。网上找到的代码，调用了Image库，我的代码全部都是用cv2搞定的，没有用Image库。画矩形也是，我也都是用cv2自带的东西完成的。\n我用以上代码生成的数据，去进行人脸识别，惨不忍睹。\n\n\n# 参考文献\n1 [Python-OpenCV人脸检测(代码)](http://blog.csdn.net/u012162613/article/details/43523507)\n2 [python os.path模块常用方法详解](http://wangwei007.blog.51cto.com/68019/1104940)\n","slug":"face-detection","published":1,"updated":"2015-10-29T06:08:51.597Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hph004h4si1gyb669vy"},{"title":"digitalocean配置ipv6","date":"2015-06-16T14:24:18.000Z","_content":"之前配置了ubuntu的shadowsocks,用来做代理翻墙.不过,google scholar一直无解,因为digitalocean的ipv4的地址都被google scholar墙掉了.今天(其实离现在已经好多天了),看到一篇文章,很受启发,决定使用ipv6来试试.\n<!-- more -->\n# 前提条件\n首先你得有一台digitalocean的vps,建议选择洛杉矶的服务器,\n选个5美元的就够了.\n\n# 1 新建droplet\n如果你以前没有搭建droplet,今天新建的话,比较简单,我们直接启用ipv6支持.\n![新建droplet,尤其注意勾选ipv6](http://ww3.sinaimg.cn/large/692869a3gw1etfo3h9svlj211h1tidny.jpg)\n注意勾选ipv6,后面的步骤,请参考第3步\n# 2 修改droplet\n我的droplet已经搭建好了,所以只能修改,添加ipv6的支持.\n你打开droplet的`setting`,在`network`中应该可以看到`enable ipv6`\n![带有启用ipv6选项的页面](http://ww1.sinaimg.cn/large/692869a3gw1etfosgf63kj207w05ujrn.jpg)\n启用后,稍后片刻,页面如下.\n![在droplet的setting中启用ipv6后的页面](http://ww4.sinaimg.cn/large/692869a3gw1etfohrljtmj20se0i2tb7.jpg)\n# 3 设置ipv6\n当我们启用ipv6支持以后,还需要对服务器进行设置.\n## 第一步  我们把ipv6的地址添加到网卡中\n我们编辑`/etc/network/interfaces`这个文件,使用命令`sudo vi /etc/network/interfaces`\n修改后内容如下\n```\n# This file describes the network interfaces available on your\n# system and how to activate them. For more information, see\n# interfaces(5).\n\n# The loopback network interface\nauto lo\niface lo inet loopback\n\n# The primary network interface\nauto eth0\niface eth0 inet static\n        address 你的ipv4\n        netmask 255.255.192.0\n        gateway 你的ipv4网关\n        dns-nameservers 8.8.8.8 8.8.4.4\n# 以上内容不需要修改,只需要添加下面的部分\niface eth0 inet6 static\n    address 上图中的ipv6地址\n    netmask 64\n    gateway 网关地址\n    autoconf 0\n    dns-nameservers 2001:4860:4860::8844 2001:4860:4860::8888 209.244.0.3\n\n```\n修改完成后,我们重启下服务器(因为我的重启网络服务没有效果,所以我重启了),<br>如果你看到如下图片,就表示你的ipv6配置好了,我们后面来测试一下\n![ipv6成功启用后](http://ww2.sinaimg.cn/large/692869a3gw1etfp7pj65dj20hs04fzlv.jpg)\n## 第二步 测试ipv6 是否配置成功\n我们使用ping命令来测试,ping是测试ipv4的,测试ipv6是用ping6,命令如下:\n```bash\nping6 ipv6.google.com\n\nPING ipv6.google.com(nuq04s29-in-x0e.1e100.net) 56 data bytes\n64 bytes from nuq04s29-in-x0e.1e100.net: icmp_seq=1 ttl=57 time=2.23 ms\n64 bytes from nuq04s29-in-x0e.1e100.net: icmp_seq=2 ttl=57 time=1.97 ms\n64 bytes from nuq04s29-in-x0e.1e100.net: icmp_seq=3 ttl=57 time=1.95 ms\n64 bytes from nuq04s29-in-x0e.1e100.net: icmp_seq=4 ttl=57 time=2.14 ms\n64 bytes from nuq04s29-in-x0e.1e100.net: icmp_seq=5 ttl=57 time=1.93 ms\n\n```\n如果发包成功,那就可以进行下一步了\n# 4 修改hosts\n因为ipv4无法访问google scholar,所以我们配置下hosts,让所有对访问google学术的,都使用ipv6去访问.执行命令如下:\n```bash\nsudo vi /etc/hosts\n```\n我们在hosts文件的后面,添加如下内容:\n```\n2607:f8b0:4007:805::100f scholar.google.cn\n2607:f8b0:4007:805::100f scholar.google.com\n2607:f8b0:4007:805::100f scholar.google.com.hk\n2607:f8b0:4007:805::100f scholar.l.google.com\n```\nok,打完收工,睡觉\n\n\n# 参考文献\n1 [一个解决 Google Scholar block DigitalOcean SFO IP 的方法](https://www.v2ex.com/t/163133)\n2 [How To Enable IPv6 for DigitalOcean Droplets](https://www.digitalocean.com/community/tutorials/how-to-enable-ipv6-for-digitalocean-droplets)\n","source":"_posts/digitalocean-support-google-scholar-by-ipv6.md","raw":"title: digitalocean配置ipv6\ndate: 2015-06-16 22:24:18\ntags:\n- ubuntu\n- ipv6\n- digitalocean\n- shadowsocks\ncategories:\n- Linux\n---\n之前配置了ubuntu的shadowsocks,用来做代理翻墙.不过,google scholar一直无解,因为digitalocean的ipv4的地址都被google scholar墙掉了.今天(其实离现在已经好多天了),看到一篇文章,很受启发,决定使用ipv6来试试.\n<!-- more -->\n# 前提条件\n首先你得有一台digitalocean的vps,建议选择洛杉矶的服务器,\n选个5美元的就够了.\n\n# 1 新建droplet\n如果你以前没有搭建droplet,今天新建的话,比较简单,我们直接启用ipv6支持.\n![新建droplet,尤其注意勾选ipv6](http://ww3.sinaimg.cn/large/692869a3gw1etfo3h9svlj211h1tidny.jpg)\n注意勾选ipv6,后面的步骤,请参考第3步\n# 2 修改droplet\n我的droplet已经搭建好了,所以只能修改,添加ipv6的支持.\n你打开droplet的`setting`,在`network`中应该可以看到`enable ipv6`\n![带有启用ipv6选项的页面](http://ww1.sinaimg.cn/large/692869a3gw1etfosgf63kj207w05ujrn.jpg)\n启用后,稍后片刻,页面如下.\n![在droplet的setting中启用ipv6后的页面](http://ww4.sinaimg.cn/large/692869a3gw1etfohrljtmj20se0i2tb7.jpg)\n# 3 设置ipv6\n当我们启用ipv6支持以后,还需要对服务器进行设置.\n## 第一步  我们把ipv6的地址添加到网卡中\n我们编辑`/etc/network/interfaces`这个文件,使用命令`sudo vi /etc/network/interfaces`\n修改后内容如下\n```\n# This file describes the network interfaces available on your\n# system and how to activate them. For more information, see\n# interfaces(5).\n\n# The loopback network interface\nauto lo\niface lo inet loopback\n\n# The primary network interface\nauto eth0\niface eth0 inet static\n        address 你的ipv4\n        netmask 255.255.192.0\n        gateway 你的ipv4网关\n        dns-nameservers 8.8.8.8 8.8.4.4\n# 以上内容不需要修改,只需要添加下面的部分\niface eth0 inet6 static\n    address 上图中的ipv6地址\n    netmask 64\n    gateway 网关地址\n    autoconf 0\n    dns-nameservers 2001:4860:4860::8844 2001:4860:4860::8888 209.244.0.3\n\n```\n修改完成后,我们重启下服务器(因为我的重启网络服务没有效果,所以我重启了),<br>如果你看到如下图片,就表示你的ipv6配置好了,我们后面来测试一下\n![ipv6成功启用后](http://ww2.sinaimg.cn/large/692869a3gw1etfp7pj65dj20hs04fzlv.jpg)\n## 第二步 测试ipv6 是否配置成功\n我们使用ping命令来测试,ping是测试ipv4的,测试ipv6是用ping6,命令如下:\n```bash\nping6 ipv6.google.com\n\nPING ipv6.google.com(nuq04s29-in-x0e.1e100.net) 56 data bytes\n64 bytes from nuq04s29-in-x0e.1e100.net: icmp_seq=1 ttl=57 time=2.23 ms\n64 bytes from nuq04s29-in-x0e.1e100.net: icmp_seq=2 ttl=57 time=1.97 ms\n64 bytes from nuq04s29-in-x0e.1e100.net: icmp_seq=3 ttl=57 time=1.95 ms\n64 bytes from nuq04s29-in-x0e.1e100.net: icmp_seq=4 ttl=57 time=2.14 ms\n64 bytes from nuq04s29-in-x0e.1e100.net: icmp_seq=5 ttl=57 time=1.93 ms\n\n```\n如果发包成功,那就可以进行下一步了\n# 4 修改hosts\n因为ipv4无法访问google scholar,所以我们配置下hosts,让所有对访问google学术的,都使用ipv6去访问.执行命令如下:\n```bash\nsudo vi /etc/hosts\n```\n我们在hosts文件的后面,添加如下内容:\n```\n2607:f8b0:4007:805::100f scholar.google.cn\n2607:f8b0:4007:805::100f scholar.google.com\n2607:f8b0:4007:805::100f scholar.google.com.hk\n2607:f8b0:4007:805::100f scholar.l.google.com\n```\nok,打完收工,睡觉\n\n\n# 参考文献\n1 [一个解决 Google Scholar block DigitalOcean SFO IP 的方法](https://www.v2ex.com/t/163133)\n2 [How To Enable IPv6 for DigitalOcean Droplets](https://www.digitalocean.com/community/tutorials/how-to-enable-ipv6-for-digitalocean-droplets)\n","slug":"digitalocean-support-google-scholar-by-ipv6","published":1,"updated":"2015-10-29T06:08:52.009Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hpm004m4si1t90l1qr4"},{"title":"配置hexo","date":"2014-11-28T13:07:27.000Z","_content":"经过[上篇博客](/how-to-build-a-blog-with-hexo.html),我们搭建起了自己的博客,接下来我们对它做些个性化的定制.\n在hexo中,配置文件一共两个(我的hexo安装在F:/blog/),分别是`F:/blog/_config.yml`和`F:/blog/themes/light/_config.yml`.第一个是全局的配置文件,第二个是主题的配置文件,在继续说之前,我们先来说一下主题安装.<!-- more -->\n# 主题安装\n这个很简单,在hexo的Github的主页上有个主题栏目,<https://github.com/hexojs/hexo/wiki/Themes>,里面列出了很多主题.\n安装方法很简单\n```\n$ git clone <repository> themes/<theme-name>\n```\n举个简单例子,我安装的主题名为`light`,请在`F:/blog/`目录下执行以下代码\n```\n$ git clone https://github.com/hexojs/hexo-theme-light themes/light\n```\n如果你不是在`F:/blog/`中执行,请修改后面的路径themes/light为你的路径.基本原理就是把主题下下来,放在themes目录下就OK了,主题安装完毕.\n# 修改全局配置文件 `F:/blog/_config.yml`\n```\n# Hexo Configuration\n# # Docs: http://hexo.io/docs/configuration.html\n# # Source: https://github.com/hexojs/hexo/\n\n# Site\ntitle: 搁浅St的blog  # 站点的名称\nsubtitle: 我最喜欢笨笨   # 站点的副标题\ndescription:             # 站点的描述,有利于搜索引擎的抓取\nauthor: 搁浅St       # 作者\nemail: geqianst@qq.com          # 你的邮箱\nlanguage: zh-CN           # 语言,一般应该都是这个吧\n\n# URL\n# # If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'\nurl: http://jackroyal.github.io       # 网站的url,在页面上,可以调用配置中的url参数,就是这个,比如google自定义搜索,需要制定搜索范围,就是通过这个设置的\nroot: /\npermalink: :year/:month/:day/:title/\ntag_dir: tags\narchive_dir: archives\ncategory_dir: categories\ncode_dir: downloads/code\npermalink_defaults:\n\n# Directory\nsource_dir: source\npublic_dir: public\n\n# Writing\nnew_post_name: :title.md # File name of new posts\ndefault_layout: post  \ntitlecase: false # Transform title into titlecase\nexternal_link: true # Open external links in new tab\nfilename_case: 0\nrender_drafts: false\npost_asset_folder: false\nrelative_link: false\nhighlight:\n  enable: true\n  line_number: true\n  tab_replace:\n\n# Category & Tag\ndefault_category: uncategorized  \ncategory_map:\ntag_map:\n\n# Archives 默认值为2，这里都修改为1，相应页面就只会列出标题，而非全文\n# # 2: Enable pagination\n# # 1: Disable pagination\n# # 0: Fully Disable\narchive: 1\ncategory: 1\ntag: 1\n\n# Server\n# # Hexo uses Connect as a server\n# # You can customize the logger format as defined in\n# # http://www.senchalabs.org/connect/logger.html\nport: 4000\nserver_ip: localhost\nlogger: false\nlogger_format: dev\n\n# Date / Time format\n# # Hexo uses Moment.js to parse and display date\n# # You can customize the date format as defined in\n# # http://momentjs.com/docs/# /displaying/format/\ndate_format: MMM D YYYY\ntime_format: H:mm:ss\n\n# Pagination\n# # Set per_page to 0 to disable pagination\nper_page: 5\npagination_dir: page\n\n# Disqus\ndisqus_shortname:\n# 这一行是我添加的duoshuo_shortname,因为天朝disqus不好用,用多说\nduoshuo_shortname: jackroyal\n# Extensions\n# # Plugins: https://github.com/hexojs/hexo/wiki/Plugins\n# # Themes: https://github.com/hexojs/hexo/wiki/Themes\ntheme: light\nexclude_generator:\n\n# Deployment  发布相关设置\n# # Docs: http://hexo.io/docs/deployment.html\ndeploy:\n  type: github\n  repo: https://github.com/Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n至此,全局配置文件修改完毕,你可以`hexo g`和`hexo s`进行查看.\n```\nmenu:# 导航栏的设置默认只有这两个,还可以添加更多的导航\n  Home: /\n  Archives: /archives\n# 它就是你页面右边的侧边项目,比如搜索之类,你可以根据自己的需求进行修改,你能用几个widgets可以在F:\\blog\\themes\\light\\layout\\_widget中进行查看\nwidgets:# 我这里使用了所有的widgets\n- search\n- category\n- tag\n- recent_posts\n- tagcloud\n\nexcerpt_link: Read More  # 可以换成中文的  阅读全文\n\ntwitter:\n  username:\n  show_replies: false\n  tweet_count: 5\n//默认的一个分享组件,因为主要针对国外,不适合国内我们不使用它\naddthis:\n  enable: false  # 把true改为false\n  pubid:\n  facebook: true\n  twitter: true\n  google: true\n  pinterest: true\n\nfancybox: true\n\ngoogle_analytics:\nrss:\nduoshuo_shortname: jackroyal  # 多说的用户名\n\ncomment_provider:\n# Facebook comment\nfacebook:\n  appid: 123456789012345\n  comment_count: 5\n  comment_width: 840\n  comment_colorscheme: light\n```\n至此,配置文件修改完毕,上面提到了我们不适用disqus的评论组件,使用多说,下面教大家来配置多说\n\n# 创建多说\n首先我们去多说注册一个账号,[点击这里](http://duoshuo.com/ \"多说官网\")\n我们点击[我要安装](http://duoshuo.com/create-site/ \"我要安装\"),界面如下\n![duoshuo 创建界面](http://ww4.sinaimg.cn/large/692869a3gw1emtdlnpsqaj20wo0lp783.jpg \"创建多说账号\")\nshortname就是jackroyal,创建完成后,跳转到如下界面\n![获取多说代码](http://ww1.sinaimg.cn/large/692869a3gw1emtdp96x54j20us0jxn18.jpg \"获取多说代码\")\n我们选择`通用代码`,点击复制,就行了\n# 配置多说\n这里说一个前提,我使用的是light主题,如果你用的是其他主题,接下来的设置可能给我有点区别,但是原理差不多,参考看看\n1. 我们打开`F:\\blog\\themes\\light\\layout\\_partial\\comment.ejs`这个文件,然后修改后代码如下(如果你不是light主题,可能跟这个不一样,你去找下包含comment的section在哪里,改法还是这样.例如系统默认的landscape主题,下面这段代码就是在article.ejs,它没有comment.ejs)\n```\n<% if (page.comments){ %>\n<!-- 这里添加了一个导航,页面的下面会有一个上一篇,下一篇 -->\n <nav id=\"pagination\" >\n    <% if (page.prev) { %>\n    <a href=\"<%- config.root %><%- page.prev.path %>\" class=\"alignleft prev\" > <%=page.prev.title %> </a>\n    <% } %>\n    <% if (page.next) { %>\n    <a href=\"<%- config.root %><%- page.next.path %>\" class=\"alignright next\" > <%=page.next.title %> </a>\n    <% } %>\n    <div class=\"clearfix\"></div>\n</nav>\n<!-- 导航结束 -->\n<section id=\"comments\">\n<!-- 这里是多说的代码,直接把你的代码粘贴到这里就行 -->\n    <!-- 多说评论框 start -->\n    <div class=\"ds-thread\" data-thread-key=\"<%= page.layout %>-<%= page.slug %>\" data-title=\"<%= page.title %>\" data-url=\"<%= page.permalink %>\"></div>\n    <!-- 多说评论框 end -->\n    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->\n    <script type=\"text/javascript\">\n    var duoshuoQuery = {short_name:'<%= config.duoshuo_shortname %>'};\n      (function() {\n        var ds = document.createElement('script');\n        ds.type = 'text/javascript';ds.async = true;\n        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';\n        ds.charset = 'UTF-8';\n        (document.getElementsByTagName('head')[0]\n         || document.getElementsByTagName('body')[0]).appendChild(ds);\n      })();\n      </script>\n    <!-- 多说公共JS代码 end -->\n  <!-- 多说结束 -->\n  </section>\n<% } %>\n```\n眼尖的同学可能已经看到我的上面第16行代码与你们的不同,这行代码包括了页面的标题和url,它会根据hexo的配置,由hexo动态生成,所以你把你的代码替换成我的这行代码.\n```\n<div class=\"ds-thread\" data-thread-key=\"<%= page.layout %>-<%= page.slug %>\" data-title=\"<%= page.title %>\" data-url=\"<%= page.permalink %>\"></div>\n```\n至此,多说添加完毕\n# 修复bug\n我发现light的主题貌似有个小bug,在`F:\\blog\\themes\\light\\layout\\_partial\\article.ejs`中间第27行有这样一行代码\n```\n        <% if (item.comment && config.disqus_shortname){ %>\n```\n首先我们,替换config.disqus_shortname为config.duoshuo_shortname.\n然后修改`item.comment`为`item.comments`,因为系统中没有comment这个变量,只有comments这个变量,如果不修改comments,那么`item.comment`一直为假,所以一直不成立,就不会显示comments字段了.修改后代码如下\n```\n <% if (item.comments && config.duoshuo_shortname){ %>\n```\n\n产生的效果如图![开启和关闭comment的区别](http://ww3.sinaimg.cn/large/692869a3gw1emteitia5uj20tl0fn412.jpg \"开启和关闭comment的区别\").\n至此,配置hexo,打完收工\nenjoy it\n\n---\n# 参考文献\n1 <http://zipperary.com/2013/05/29/hexo-guide-3/>\n2 [duoshuo官方Hexo使用教程](http://dev.duoshuo.com/threads/541d3b2b40b5abcd2e4df0e9)\n\n","source":"_posts/custom-hexo.md","raw":"title: 配置hexo\ndate: 2014-11-28 21:07:27\ntags:\n- hexo\ncategories: hexo\n---\n经过[上篇博客](/how-to-build-a-blog-with-hexo.html),我们搭建起了自己的博客,接下来我们对它做些个性化的定制.\n在hexo中,配置文件一共两个(我的hexo安装在F:/blog/),分别是`F:/blog/_config.yml`和`F:/blog/themes/light/_config.yml`.第一个是全局的配置文件,第二个是主题的配置文件,在继续说之前,我们先来说一下主题安装.<!-- more -->\n# 主题安装\n这个很简单,在hexo的Github的主页上有个主题栏目,<https://github.com/hexojs/hexo/wiki/Themes>,里面列出了很多主题.\n安装方法很简单\n```\n$ git clone <repository> themes/<theme-name>\n```\n举个简单例子,我安装的主题名为`light`,请在`F:/blog/`目录下执行以下代码\n```\n$ git clone https://github.com/hexojs/hexo-theme-light themes/light\n```\n如果你不是在`F:/blog/`中执行,请修改后面的路径themes/light为你的路径.基本原理就是把主题下下来,放在themes目录下就OK了,主题安装完毕.\n# 修改全局配置文件 `F:/blog/_config.yml`\n```\n# Hexo Configuration\n# # Docs: http://hexo.io/docs/configuration.html\n# # Source: https://github.com/hexojs/hexo/\n\n# Site\ntitle: 搁浅St的blog  # 站点的名称\nsubtitle: 我最喜欢笨笨   # 站点的副标题\ndescription:             # 站点的描述,有利于搜索引擎的抓取\nauthor: 搁浅St       # 作者\nemail: geqianst@qq.com          # 你的邮箱\nlanguage: zh-CN           # 语言,一般应该都是这个吧\n\n# URL\n# # If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'\nurl: http://jackroyal.github.io       # 网站的url,在页面上,可以调用配置中的url参数,就是这个,比如google自定义搜索,需要制定搜索范围,就是通过这个设置的\nroot: /\npermalink: :year/:month/:day/:title/\ntag_dir: tags\narchive_dir: archives\ncategory_dir: categories\ncode_dir: downloads/code\npermalink_defaults:\n\n# Directory\nsource_dir: source\npublic_dir: public\n\n# Writing\nnew_post_name: :title.md # File name of new posts\ndefault_layout: post  \ntitlecase: false # Transform title into titlecase\nexternal_link: true # Open external links in new tab\nfilename_case: 0\nrender_drafts: false\npost_asset_folder: false\nrelative_link: false\nhighlight:\n  enable: true\n  line_number: true\n  tab_replace:\n\n# Category & Tag\ndefault_category: uncategorized  \ncategory_map:\ntag_map:\n\n# Archives 默认值为2，这里都修改为1，相应页面就只会列出标题，而非全文\n# # 2: Enable pagination\n# # 1: Disable pagination\n# # 0: Fully Disable\narchive: 1\ncategory: 1\ntag: 1\n\n# Server\n# # Hexo uses Connect as a server\n# # You can customize the logger format as defined in\n# # http://www.senchalabs.org/connect/logger.html\nport: 4000\nserver_ip: localhost\nlogger: false\nlogger_format: dev\n\n# Date / Time format\n# # Hexo uses Moment.js to parse and display date\n# # You can customize the date format as defined in\n# # http://momentjs.com/docs/# /displaying/format/\ndate_format: MMM D YYYY\ntime_format: H:mm:ss\n\n# Pagination\n# # Set per_page to 0 to disable pagination\nper_page: 5\npagination_dir: page\n\n# Disqus\ndisqus_shortname:\n# 这一行是我添加的duoshuo_shortname,因为天朝disqus不好用,用多说\nduoshuo_shortname: jackroyal\n# Extensions\n# # Plugins: https://github.com/hexojs/hexo/wiki/Plugins\n# # Themes: https://github.com/hexojs/hexo/wiki/Themes\ntheme: light\nexclude_generator:\n\n# Deployment  发布相关设置\n# # Docs: http://hexo.io/docs/deployment.html\ndeploy:\n  type: github\n  repo: https://github.com/Jackroyal/Jackroyal.github.io.git\n  branch: master\n```\n至此,全局配置文件修改完毕,你可以`hexo g`和`hexo s`进行查看.\n```\nmenu:# 导航栏的设置默认只有这两个,还可以添加更多的导航\n  Home: /\n  Archives: /archives\n# 它就是你页面右边的侧边项目,比如搜索之类,你可以根据自己的需求进行修改,你能用几个widgets可以在F:\\blog\\themes\\light\\layout\\_widget中进行查看\nwidgets:# 我这里使用了所有的widgets\n- search\n- category\n- tag\n- recent_posts\n- tagcloud\n\nexcerpt_link: Read More  # 可以换成中文的  阅读全文\n\ntwitter:\n  username:\n  show_replies: false\n  tweet_count: 5\n//默认的一个分享组件,因为主要针对国外,不适合国内我们不使用它\naddthis:\n  enable: false  # 把true改为false\n  pubid:\n  facebook: true\n  twitter: true\n  google: true\n  pinterest: true\n\nfancybox: true\n\ngoogle_analytics:\nrss:\nduoshuo_shortname: jackroyal  # 多说的用户名\n\ncomment_provider:\n# Facebook comment\nfacebook:\n  appid: 123456789012345\n  comment_count: 5\n  comment_width: 840\n  comment_colorscheme: light\n```\n至此,配置文件修改完毕,上面提到了我们不适用disqus的评论组件,使用多说,下面教大家来配置多说\n\n# 创建多说\n首先我们去多说注册一个账号,[点击这里](http://duoshuo.com/ \"多说官网\")\n我们点击[我要安装](http://duoshuo.com/create-site/ \"我要安装\"),界面如下\n![duoshuo 创建界面](http://ww4.sinaimg.cn/large/692869a3gw1emtdlnpsqaj20wo0lp783.jpg \"创建多说账号\")\nshortname就是jackroyal,创建完成后,跳转到如下界面\n![获取多说代码](http://ww1.sinaimg.cn/large/692869a3gw1emtdp96x54j20us0jxn18.jpg \"获取多说代码\")\n我们选择`通用代码`,点击复制,就行了\n# 配置多说\n这里说一个前提,我使用的是light主题,如果你用的是其他主题,接下来的设置可能给我有点区别,但是原理差不多,参考看看\n1. 我们打开`F:\\blog\\themes\\light\\layout\\_partial\\comment.ejs`这个文件,然后修改后代码如下(如果你不是light主题,可能跟这个不一样,你去找下包含comment的section在哪里,改法还是这样.例如系统默认的landscape主题,下面这段代码就是在article.ejs,它没有comment.ejs)\n```\n<% if (page.comments){ %>\n<!-- 这里添加了一个导航,页面的下面会有一个上一篇,下一篇 -->\n <nav id=\"pagination\" >\n    <% if (page.prev) { %>\n    <a href=\"<%- config.root %><%- page.prev.path %>\" class=\"alignleft prev\" > <%=page.prev.title %> </a>\n    <% } %>\n    <% if (page.next) { %>\n    <a href=\"<%- config.root %><%- page.next.path %>\" class=\"alignright next\" > <%=page.next.title %> </a>\n    <% } %>\n    <div class=\"clearfix\"></div>\n</nav>\n<!-- 导航结束 -->\n<section id=\"comments\">\n<!-- 这里是多说的代码,直接把你的代码粘贴到这里就行 -->\n    <!-- 多说评论框 start -->\n    <div class=\"ds-thread\" data-thread-key=\"<%= page.layout %>-<%= page.slug %>\" data-title=\"<%= page.title %>\" data-url=\"<%= page.permalink %>\"></div>\n    <!-- 多说评论框 end -->\n    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->\n    <script type=\"text/javascript\">\n    var duoshuoQuery = {short_name:'<%= config.duoshuo_shortname %>'};\n      (function() {\n        var ds = document.createElement('script');\n        ds.type = 'text/javascript';ds.async = true;\n        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';\n        ds.charset = 'UTF-8';\n        (document.getElementsByTagName('head')[0]\n         || document.getElementsByTagName('body')[0]).appendChild(ds);\n      })();\n      </script>\n    <!-- 多说公共JS代码 end -->\n  <!-- 多说结束 -->\n  </section>\n<% } %>\n```\n眼尖的同学可能已经看到我的上面第16行代码与你们的不同,这行代码包括了页面的标题和url,它会根据hexo的配置,由hexo动态生成,所以你把你的代码替换成我的这行代码.\n```\n<div class=\"ds-thread\" data-thread-key=\"<%= page.layout %>-<%= page.slug %>\" data-title=\"<%= page.title %>\" data-url=\"<%= page.permalink %>\"></div>\n```\n至此,多说添加完毕\n# 修复bug\n我发现light的主题貌似有个小bug,在`F:\\blog\\themes\\light\\layout\\_partial\\article.ejs`中间第27行有这样一行代码\n```\n        <% if (item.comment && config.disqus_shortname){ %>\n```\n首先我们,替换config.disqus_shortname为config.duoshuo_shortname.\n然后修改`item.comment`为`item.comments`,因为系统中没有comment这个变量,只有comments这个变量,如果不修改comments,那么`item.comment`一直为假,所以一直不成立,就不会显示comments字段了.修改后代码如下\n```\n <% if (item.comments && config.duoshuo_shortname){ %>\n```\n\n产生的效果如图![开启和关闭comment的区别](http://ww3.sinaimg.cn/large/692869a3gw1emteitia5uj20tl0fn412.jpg \"开启和关闭comment的区别\").\n至此,配置hexo,打完收工\nenjoy it\n\n---\n# 参考文献\n1 <http://zipperary.com/2013/05/29/hexo-guide-3/>\n2 [duoshuo官方Hexo使用教程](http://dev.duoshuo.com/threads/541d3b2b40b5abcd2e4df0e9)\n\n","slug":"custom-hexo","published":1,"updated":"2015-10-29T06:08:53.291Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hpy004u4si1mnxzj9d3"},{"title":"cmcc520扩展使用说明","date":"2014-11-24T13:56:00.000Z","_content":"\n我的cmcc520 2.0版本终于完成了,写个使用说明\n\n\n\n\n学校部分范围有CMCC-EDU可用,通过手动修改ssid,可以免费使用.\n\n写了个扩展来简化这个过程.\n\n1 安装扩展\n将保存下来的 \\*.crx 文件或\\*.js 文件直接拖拽到浏览器的“扩展程序”（[chrome://chrome/extensions](\"Chrome 扩展程序页面\")/）页面。\n![](http://img.blog.csdn.net/20141124215558921?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n\n( 注：只有拖动到此页面才能安装，其它页面无效)\n\n　　2. 按照提示安装\n![](http://img.blog.csdn.net/20141124215611765?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n\n\n \n详细安装过程见[http://www.williamlong.info/archives/3160.html](http://www.williamlong.info/archives/3160.html)\n\n \n\n \n\n3,配置软件功能\n\n左键点击图标,可以选择开关扩展功能(默认为开启)\n ![](http://img.blog.csdn.net/20141124215702865?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n \n\n4.使用软件\n\n如果软件的功能打开,那么如果当你使用cmcc-edu的时候会自动跳转完成登录,不再需要手动操作,登录成功页面如下,你可以关闭这个页面了\n![](http://img.blog.csdn.net/20141124215651437?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n\n\n5.下线\n\n在任何页面按ALT+X   可以下线\n\nPs,如果按Alt+x无任何提示,可能是快捷键设置有问题\n ![](http://img.blog.csdn.net/20141124215717575?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n![](http://img.blog.csdn.net/20141124215740968?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n\n那就需要你按照上图手动设置快捷键\n\n \n\n \n\n6 反馈\n如果发现任何bug,可以和我联系\n\n\n\n新浪微博[http://weibo.com/517123263](http://weibo.com/517123263)\nGithub项目地址 [https://github.com/Jackroyal/cmcc520](https://github.com/Jackroyal/cmcc520)\n我的csdn博客[ http://blog.csdn.net/jackroyal](file:///C:/Users/chenhao/Desktop/%20http:/blog.csdn.net/jackroyal)\n\n \n\n \n\n \n\n2014/11/24\n","source":"_posts/cmcc520扩展使用说明.md","raw":"title: 'cmcc520扩展使用说明'\ndate: 2014-11-24 21:56\ntags:\n- chrome\n- cmcc-edu\n- 中国移动\n- 扩展\n- 脚本\ncategories:\n- chrome扩展\n---\n\n我的cmcc520 2.0版本终于完成了,写个使用说明\n\n\n\n\n学校部分范围有CMCC-EDU可用,通过手动修改ssid,可以免费使用.\n\n写了个扩展来简化这个过程.\n\n1 安装扩展\n将保存下来的 \\*.crx 文件或\\*.js 文件直接拖拽到浏览器的“扩展程序”（[chrome://chrome/extensions](\"Chrome 扩展程序页面\")/）页面。\n![](http://img.blog.csdn.net/20141124215558921?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n\n( 注：只有拖动到此页面才能安装，其它页面无效)\n\n　　2. 按照提示安装\n![](http://img.blog.csdn.net/20141124215611765?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n\n\n \n详细安装过程见[http://www.williamlong.info/archives/3160.html](http://www.williamlong.info/archives/3160.html)\n\n \n\n \n\n3,配置软件功能\n\n左键点击图标,可以选择开关扩展功能(默认为开启)\n ![](http://img.blog.csdn.net/20141124215702865?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n \n\n4.使用软件\n\n如果软件的功能打开,那么如果当你使用cmcc-edu的时候会自动跳转完成登录,不再需要手动操作,登录成功页面如下,你可以关闭这个页面了\n![](http://img.blog.csdn.net/20141124215651437?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n\n\n5.下线\n\n在任何页面按ALT+X   可以下线\n\nPs,如果按Alt+x无任何提示,可能是快捷键设置有问题\n ![](http://img.blog.csdn.net/20141124215717575?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n![](http://img.blog.csdn.net/20141124215740968?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n\n那就需要你按照上图手动设置快捷键\n\n \n\n \n\n6 反馈\n如果发现任何bug,可以和我联系\n\n\n\n新浪微博[http://weibo.com/517123263](http://weibo.com/517123263)\nGithub项目地址 [https://github.com/Jackroyal/cmcc520](https://github.com/Jackroyal/cmcc520)\n我的csdn博客[ http://blog.csdn.net/jackroyal](file:///C:/Users/chenhao/Desktop/%20http:/blog.csdn.net/jackroyal)\n\n \n\n \n\n \n\n2014/11/24\n","slug":"cmcc520扩展使用说明","published":1,"updated":"2015-09-29T11:41:23.727Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hq1004x4si1xecbfhck"},{"title":"chrome扩展开发手记<2>-登录原理分析","date":"2014-11-24T03:18:00.000Z","_content":"\n上一篇,我们 介绍了一下登录的流程,但是用程序进行登录的话,我们肯定不能那样一步一步,太过复杂,所以我们接下来分下一下登录的具体过程,看看能不能作一些简化\n\n我们接下来,给几个页面编个号,下面好分析一点\nA   最原始的跳转 [http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU](http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU)\nB  第一次改ssid  [http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free](http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU)\n\nC 第一次点击 请点击登录  以后的地址\n[http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free](http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free)\n\nD 第二次改ssid  \n[http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC520](http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free)\n\n\n\n\n\n1. 从www.baidu.com跳转到A地址,这个步骤没什么特别的,服务器那边做了一个302跳转,然后我们这边就自动跳转到A地址了\n1. 第一次改ssid,也就是从A到B,这个过程也没什么,只是一个单纯的地址跳转,B地址中有一个表单<br/>\n![](http://img.blog.csdn.net/20141124134725891?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)<br/>\n这个表单里面 主要包含四个字段,\n<br/>wlanacname:1022.0027.270.00\n<br/>wlanuserip:10.80.97.209\nssid:iWuhan-Free\n<br/>userAgent_1:Mozilla/5.0 (Windows NT 6.2)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.111 Safari/537.36\n\n1. 我们第一次点击 请提交登录,所做的操作就是把上面的表单提交到  [http://120.202.164.10:8080/portal/servlets/SingleLoginServlet](http://120.202.164.10:8080/portal/servlets/SingleLoginServlet)<br/>\n服务器返回的地址是C,这一步的表单提交主要是为了获取C的地址,就是因为多了的那个loginFree.jsp,这样下一步才能改ssid为CMCC520,否则,如果你越过这一步直接改ssid为CMCC520,就会跳转到其他的页面,比如下面这个![](http://img.blog.csdn.net/20141124133708801?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)<br/>\n这个地址如果点击提交,是没有办法正常登陆的,我们必须要到武汉的那个页面才行.\n1. 在我们到达C那个页面以后,我们再次修改ssid,就到了D页面,然后在D页面点击  请点击登录,流程和上面的一样,页面效果也是一样,不过表单的值变了一个,具体表单post内容如下\n<br/>wlanacname:1022.0027.270.00\n<br/>wlanuserip:10.80.97.209\nssid:CMCC520\nuserAgent_1:Mozilla/5.0 (Windows NT 6.2)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.111 Safari/537.36<br/>\n提交以后,我们就可以登录成功了,成功以后服务器会做一个302跳转,页面跳转到一个登录计时的页面.\n\n\n\n\n\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\n_<br/>\n_\n从整体来看,最核心的一个操作就是向[http://120.202.164.10:8080/portal/servlets/SingleLoginServlet](http://120.202.164.10:8080/portal/servlets/SingleLoginServlet)提交一个表单,表单内容是\nwlanacname:1022.0027.270.00\nwlanuserip:10.80.97.209\nssid:CMCC520\nuserAgent_1:Mozilla/5.0 (Windows NT 6.2)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.111 Safari/537.36\n然后,然后就没有然后了,那个最后计时页面的跳转没有多大的实际作用,我们只需要post这一个请求就好了\n下一步我们开始制作chrome扩展,核心也是要实现这个post的请求\n_\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*_\n_退出登录也是如此,发一个get请求过去,然后从获得的内容中进行判断,判断成功与否_\n__\n\n下线请求\n[http://120.202.164.10:8080/portal/servlets/LogoutServlet?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC520&ATTRIBUTE_USERNAME=iWuhanFree4300&ATTRIBUTE_UUID=26FBE9A694B6221958CF6DE2704F0ECA&ATTRIBUTE_IPADDRESS=10.80.97.209&cancelAutomatismLogin=false](http://120.202.164.10:8080/portal/servlets/LogoutServlet?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC520&ATTRIBUTE_USERNAME=iWuhanFree4300&ATTRIBUTE_UUID=26FBE9A694B6221958CF6DE2704F0ECA&ATTRIBUTE_IPADDRESS=10.80.97.209&cancelAutomatismLogin=false)\n\n表单实际内容\n\nwlanacname:1022.0027.270.00\n\nwlanuserip:10.80.97.209\n\nssid:CMCC520\n\nATTRIBUTE_USERNAME:iWuhanFree4300\n\nATTRIBUTE_UUID:26FBE9A694B6221958CF6DE2704F0ECA\n\nATTRIBUTE_IPADDRESS:10.80.97.209\n\ncancelAutomatismLogin:false\n\n\n\n\n\n\n\n\n","source":"_posts/chrome扩展开发手记2-登录原理分析.md","raw":"title: 'chrome扩展开发手记<2>-登录原理分析'\ndate: 2014-11-24 11:18\ntags:\n- chrome\n- cmcc-edu\n- 表单\ncategories:\n- chrome扩展\n---\n\n上一篇,我们 介绍了一下登录的流程,但是用程序进行登录的话,我们肯定不能那样一步一步,太过复杂,所以我们接下来分下一下登录的具体过程,看看能不能作一些简化\n\n我们接下来,给几个页面编个号,下面好分析一点\nA   最原始的跳转 [http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU](http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU)\nB  第一次改ssid  [http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free](http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU)\n\nC 第一次点击 请点击登录  以后的地址\n[http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free](http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free)\n\nD 第二次改ssid  \n[http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC520](http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free)\n\n\n\n\n\n1. 从www.baidu.com跳转到A地址,这个步骤没什么特别的,服务器那边做了一个302跳转,然后我们这边就自动跳转到A地址了\n1. 第一次改ssid,也就是从A到B,这个过程也没什么,只是一个单纯的地址跳转,B地址中有一个表单<br/>\n![](http://img.blog.csdn.net/20141124134725891?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)<br/>\n这个表单里面 主要包含四个字段,\n<br/>wlanacname:1022.0027.270.00\n<br/>wlanuserip:10.80.97.209\nssid:iWuhan-Free\n<br/>userAgent_1:Mozilla/5.0 (Windows NT 6.2)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.111 Safari/537.36\n\n1. 我们第一次点击 请提交登录,所做的操作就是把上面的表单提交到  [http://120.202.164.10:8080/portal/servlets/SingleLoginServlet](http://120.202.164.10:8080/portal/servlets/SingleLoginServlet)<br/>\n服务器返回的地址是C,这一步的表单提交主要是为了获取C的地址,就是因为多了的那个loginFree.jsp,这样下一步才能改ssid为CMCC520,否则,如果你越过这一步直接改ssid为CMCC520,就会跳转到其他的页面,比如下面这个![](http://img.blog.csdn.net/20141124133708801?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)<br/>\n这个地址如果点击提交,是没有办法正常登陆的,我们必须要到武汉的那个页面才行.\n1. 在我们到达C那个页面以后,我们再次修改ssid,就到了D页面,然后在D页面点击  请点击登录,流程和上面的一样,页面效果也是一样,不过表单的值变了一个,具体表单post内容如下\n<br/>wlanacname:1022.0027.270.00\n<br/>wlanuserip:10.80.97.209\nssid:CMCC520\nuserAgent_1:Mozilla/5.0 (Windows NT 6.2)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.111 Safari/537.36<br/>\n提交以后,我们就可以登录成功了,成功以后服务器会做一个302跳转,页面跳转到一个登录计时的页面.\n\n\n\n\n\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\n_<br/>\n_\n从整体来看,最核心的一个操作就是向[http://120.202.164.10:8080/portal/servlets/SingleLoginServlet](http://120.202.164.10:8080/portal/servlets/SingleLoginServlet)提交一个表单,表单内容是\nwlanacname:1022.0027.270.00\nwlanuserip:10.80.97.209\nssid:CMCC520\nuserAgent_1:Mozilla/5.0 (Windows NT 6.2)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.111 Safari/537.36\n然后,然后就没有然后了,那个最后计时页面的跳转没有多大的实际作用,我们只需要post这一个请求就好了\n下一步我们开始制作chrome扩展,核心也是要实现这个post的请求\n_\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*_\n_退出登录也是如此,发一个get请求过去,然后从获得的内容中进行判断,判断成功与否_\n__\n\n下线请求\n[http://120.202.164.10:8080/portal/servlets/LogoutServlet?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC520&ATTRIBUTE_USERNAME=iWuhanFree4300&ATTRIBUTE_UUID=26FBE9A694B6221958CF6DE2704F0ECA&ATTRIBUTE_IPADDRESS=10.80.97.209&cancelAutomatismLogin=false](http://120.202.164.10:8080/portal/servlets/LogoutServlet?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC520&ATTRIBUTE_USERNAME=iWuhanFree4300&ATTRIBUTE_UUID=26FBE9A694B6221958CF6DE2704F0ECA&ATTRIBUTE_IPADDRESS=10.80.97.209&cancelAutomatismLogin=false)\n\n表单实际内容\n\nwlanacname:1022.0027.270.00\n\nwlanuserip:10.80.97.209\n\nssid:CMCC520\n\nATTRIBUTE_USERNAME:iWuhanFree4300\n\nATTRIBUTE_UUID:26FBE9A694B6221958CF6DE2704F0ECA\n\nATTRIBUTE_IPADDRESS:10.80.97.209\n\ncancelAutomatismLogin:false\n\n\n\n\n\n\n\n\n","slug":"chrome扩展开发手记2-登录原理分析","published":1,"updated":"2015-09-29T11:41:23.726Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hq6005a4si13rr3vscq"},{"title":"chrome扩展开发手记<1>-需求分析","date":"2014-11-21T10:17:00.000Z","_content":"\n本人的学校在武汉,有CMCC-EDU的网络覆盖,中国移动和武汉市政府搞了一个活动,可以免费公益上网,说白了,就是可以免费使用EDU的网络,如图.\n![](http://img.blog.csdn.net/20141121181910580?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n\n以上是前提.\n\n这个网络的使用流程是这样子的.\n\n\n\n\n\n\n1. 你打开任何一个网址,比如http://www.baidu.com  <br/>\n都会跳转到 [](http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU)[http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU](http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU)  界面如图所示<br/>\n![](http://img.blog.csdn.net/20141124103645611?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n1. 接下来我们手动更改最上面的网址栏,把ssid改为iWuhan-Free,(注意大小写)<br/>\n修改后的网址如下[http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free](http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU)界面如下<br/>\n![](http://img.blog.csdn.net/20141124104120281?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n1. 接下来我们点击,请点击登录按钮,系统反馈如下<br/>\n![](http://img.blog.csdn.net/20141124104623968?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)<br/>\n我们忽略这个警告,可以注意到,上面的地址栏已经变掉了,多了个loginFree.jsp完整的地址[http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free](http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free)\n1. 接下来,我们再改一次ssid,改为CMCC520,完整地址如下[http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC520](http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free) 界面还是和上图一样,就不贴图了,我们再点击一次,请点击登录,然后就会跳到一个计时页面,这样就表示你登录成功,可以上网了\n\n\n\n\n\n\n登录的流程走完了,下一篇,接下来我们分析一下登录的原理,简化一下登录的流程\n\n","source":"_posts/chrome扩展开发手记1-需求分析.md","raw":"title: 'chrome扩展开发手记<1>-需求分析'\ndate: 2014-11-21 18:17\ntags:\n- chrome\n- cmcc-edu\n- 中国移动\ncategories:\n- chrome扩展\n---\n\n本人的学校在武汉,有CMCC-EDU的网络覆盖,中国移动和武汉市政府搞了一个活动,可以免费公益上网,说白了,就是可以免费使用EDU的网络,如图.\n![](http://img.blog.csdn.net/20141121181910580?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n\n以上是前提.\n\n这个网络的使用流程是这样子的.\n\n\n\n\n\n\n1. 你打开任何一个网址,比如http://www.baidu.com  <br/>\n都会跳转到 [](http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU)[http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU](http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU)  界面如图所示<br/>\n![](http://img.blog.csdn.net/20141124103645611?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n1. 接下来我们手动更改最上面的网址栏,把ssid改为iWuhan-Free,(注意大小写)<br/>\n修改后的网址如下[http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free](http://120.202.164.10:8080/portal/?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC-EDU)界面如下<br/>\n![](http://img.blog.csdn.net/20141124104120281?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n1. 接下来我们点击,请点击登录按钮,系统反馈如下<br/>\n![](http://img.blog.csdn.net/20141124104623968?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)<br/>\n我们忽略这个警告,可以注意到,上面的地址栏已经变掉了,多了个loginFree.jsp完整的地址[http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free](http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free)\n1. 接下来,我们再改一次ssid,改为CMCC520,完整地址如下[http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=CMCC520](http://120.202.164.10:8080/portal/loginFree.jsp?wlanacname=1022.0027.270.00&wlanuserip=10.80.97.209&ssid=iWuhan-Free) 界面还是和上图一样,就不贴图了,我们再点击一次,请点击登录,然后就会跳到一个计时页面,这样就表示你登录成功,可以上网了\n\n\n\n\n\n\n登录的流程走完了,下一篇,接下来我们分析一下登录的原理,简化一下登录的流程\n\n","slug":"chrome扩展开发手记1-需求分析","published":1,"updated":"2015-09-29T11:41:23.726Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hqb005g4si1hgdin3xe"},{"title":"chrome扩展开发手记-chrome扩展开始第一步manfest.json","date":"2014-11-24T07:16:00.000Z","_content":"参考文档   [https://lmk123.duapp.com/](https://lmk123.duapp.com/)\n\n下面开始写chrome扩展了,第一步就是看文档,官方文档有入门指导,先要过一遍\n\n我们首先来编写第一个文件manfest.json,这是一个清单文件,告诉系统,我有哪些文件,需要申请哪些权限都在里面,下卖弄给出我的manfest.json\n\n\n\n\n\n```javascript\n{\n    \"name\":\"cmcc520\",//扩展的名称\n    \"version\":\"2.0\",//扩展的版本号,随便写\n    \"description\":\"powered by 搁浅St\",//扩展的描述,就是在chrome://extension页面中,扩展名称下面的几个字\n    \"background\": {//background.js,整个扩展的运行,有个页面在后台运行\n        \"scripts\": [\"js/function.js\",\"bg.js\"],\n        \"persistent\": false\n    },\n    \"page_action\":{//比较常见有page_action和browser_action有,page会出现在地址栏末端,browser会在浏览器上显示一个图标\n        \"default_icon\":\"icon-48.png\",\n        \"default_popup\": \"popup.html\",//popup.html点击弹出的页面\n        \"default_title\":\"cmcc520\"\n    },\n    \"permissions\" : [//申请内容脚本的权限,在插入内容到页面时,需要用哪些权限,此处必须声明\n        \"tabs\", \"http://\\*/\\*\"\n    ],\n    \"icons\" : {//图标设置\n        \"48\" : \"icon-48.png\",\n        \"128\" : \"icon-128.png\"\n    },\n    \"commands\": {//快捷键设置\n        \"logout_cmcc\": {\n            \"description\": \"退出CMCC登录\",\n            \"suggested_key\": {\n                \"default\": \"Alt+X\"\n            }\n        }\n    },\n    \"manifest_version\":2//manifest_version,现在版本1已经不支持,统一都写成2\n\n}\n\n```\n\n\n简单的属性,这里不再赘述,我重点说一下background,page_action,permissions和commands.\n\nbackground  它是一个包含扩展程序主要逻辑的不可见页面。扩展程序也可以包含其他页面，展现扩展程序的用户界面。如果扩展程序需要与用户加载的网页交互（相对于包含在扩展程序中的页面），扩展程序必须使用内容脚本。后台网页分两种：持续运行的后台网页与事件页面(设置persistent属性)。正如它们的名称所述，持续运行的后台网页保持打开状态，事件页面根据需要打开与关闭。除非您绝对需要您的后台网页一直运行，请首选事件页面。\n\n\n```javascript\n    \"background\": {//background.js,整个扩展的运行,有个页面在后台运行\n        \"scripts\": [\"js/function.js\",\"bg.js\"],\n        \"persistent\": false\n    },\n```\n比如我的这个 后台执行就是这样的\n\n![](http://img.blog.csdn.net/20141124194616706?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n采用pageaction还是browseraction取决于你是否想让图标一直可见.`![](http://img.blog.csdn.net/20141124193151343?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n如图,绿色的是广告终结者,他的图标是pageAction,后面的印象笔记还有switchproxy是browserAction.一般来说,适用于少数页面的扩展建议使用pageaction,适用于大多数页面的建议使用browseraction\n\n\n\n\n\n\npermissions属性,用来设置和conten_script相关的选项,举个例子,如果你想插入一段代码到页面中去执行,操作页面上的dom,那就写个content_script就行了,使用 content_scripts 字段，扩展程序可以向一个页面中插入多个内容脚本，每个内容脚本可以有多个\n JavaScript 和 CSS 文件,详细情况请看这里[https://lmk123.duapp.com/extensions/content_scripts](https://lmk123.duapp.com/extensions/content_scripts)\n\n我现在在做的一个扩展就是做这样的事,百度的搜索结果会先跳到一个百度的网址,然后才是目标网址,我可以使用cotent_scripts来插入脚本,修改百度搜索结果的链接,让他直接跳转到目标页面,而不是百度的搜索结果页面.\n\n\n\n\n\n\n\ncommands选项是设置快捷键,然后给快捷键设置事件 监听,这样我们按快捷键就会执行相应操作.\n\n\n```javascript\n        \"logout_cmcc\": {//某个快捷操作的名称\n            \"description\": \"退出CMCC登录\",//快捷操作的描述\n            \"suggested_key\": {//默认推荐的快捷键,不能与系统默认的快捷键冲突,否则就会失灵,需要用户手动去设置\n                \"default\": \"Alt+X\"\n            }\n        }\n```\n\n\n\n","source":"_posts/chrome扩展开发手记-chrome扩展开始第一步manfest.json.md","raw":"title: 'chrome扩展开发手记-chrome扩展开始第一步manfest.json'\ndate: 2014-11-24 15:16\ntags:\n- chrome\n- cmcc-edu\n- 扩展\n- 脚本\n- 中国移动\ncategories:\n- chrome扩展\n---\n参考文档   [https://lmk123.duapp.com/](https://lmk123.duapp.com/)\n\n下面开始写chrome扩展了,第一步就是看文档,官方文档有入门指导,先要过一遍\n\n我们首先来编写第一个文件manfest.json,这是一个清单文件,告诉系统,我有哪些文件,需要申请哪些权限都在里面,下卖弄给出我的manfest.json\n\n\n\n\n\n```javascript\n{\n    \"name\":\"cmcc520\",//扩展的名称\n    \"version\":\"2.0\",//扩展的版本号,随便写\n    \"description\":\"powered by 搁浅St\",//扩展的描述,就是在chrome://extension页面中,扩展名称下面的几个字\n    \"background\": {//background.js,整个扩展的运行,有个页面在后台运行\n        \"scripts\": [\"js/function.js\",\"bg.js\"],\n        \"persistent\": false\n    },\n    \"page_action\":{//比较常见有page_action和browser_action有,page会出现在地址栏末端,browser会在浏览器上显示一个图标\n        \"default_icon\":\"icon-48.png\",\n        \"default_popup\": \"popup.html\",//popup.html点击弹出的页面\n        \"default_title\":\"cmcc520\"\n    },\n    \"permissions\" : [//申请内容脚本的权限,在插入内容到页面时,需要用哪些权限,此处必须声明\n        \"tabs\", \"http://\\*/\\*\"\n    ],\n    \"icons\" : {//图标设置\n        \"48\" : \"icon-48.png\",\n        \"128\" : \"icon-128.png\"\n    },\n    \"commands\": {//快捷键设置\n        \"logout_cmcc\": {\n            \"description\": \"退出CMCC登录\",\n            \"suggested_key\": {\n                \"default\": \"Alt+X\"\n            }\n        }\n    },\n    \"manifest_version\":2//manifest_version,现在版本1已经不支持,统一都写成2\n\n}\n\n```\n\n\n简单的属性,这里不再赘述,我重点说一下background,page_action,permissions和commands.\n\nbackground  它是一个包含扩展程序主要逻辑的不可见页面。扩展程序也可以包含其他页面，展现扩展程序的用户界面。如果扩展程序需要与用户加载的网页交互（相对于包含在扩展程序中的页面），扩展程序必须使用内容脚本。后台网页分两种：持续运行的后台网页与事件页面(设置persistent属性)。正如它们的名称所述，持续运行的后台网页保持打开状态，事件页面根据需要打开与关闭。除非您绝对需要您的后台网页一直运行，请首选事件页面。\n\n\n```javascript\n    \"background\": {//background.js,整个扩展的运行,有个页面在后台运行\n        \"scripts\": [\"js/function.js\",\"bg.js\"],\n        \"persistent\": false\n    },\n```\n比如我的这个 后台执行就是这样的\n\n![](http://img.blog.csdn.net/20141124194616706?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\n采用pageaction还是browseraction取决于你是否想让图标一直可见.`![](http://img.blog.csdn.net/20141124193151343?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja3JveWFs/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n如图,绿色的是广告终结者,他的图标是pageAction,后面的印象笔记还有switchproxy是browserAction.一般来说,适用于少数页面的扩展建议使用pageaction,适用于大多数页面的建议使用browseraction\n\n\n\n\n\n\npermissions属性,用来设置和conten_script相关的选项,举个例子,如果你想插入一段代码到页面中去执行,操作页面上的dom,那就写个content_script就行了,使用 content_scripts 字段，扩展程序可以向一个页面中插入多个内容脚本，每个内容脚本可以有多个\n JavaScript 和 CSS 文件,详细情况请看这里[https://lmk123.duapp.com/extensions/content_scripts](https://lmk123.duapp.com/extensions/content_scripts)\n\n我现在在做的一个扩展就是做这样的事,百度的搜索结果会先跳到一个百度的网址,然后才是目标网址,我可以使用cotent_scripts来插入脚本,修改百度搜索结果的链接,让他直接跳转到目标页面,而不是百度的搜索结果页面.\n\n\n\n\n\n\n\ncommands选项是设置快捷键,然后给快捷键设置事件 监听,这样我们按快捷键就会执行相应操作.\n\n\n```javascript\n        \"logout_cmcc\": {//某个快捷操作的名称\n            \"description\": \"退出CMCC登录\",//快捷操作的描述\n            \"suggested_key\": {//默认推荐的快捷键,不能与系统默认的快捷键冲突,否则就会失灵,需要用户手动去设置\n                \"default\": \"Alt+X\"\n            }\n        }\n```\n\n\n\n","slug":"chrome扩展开发手记-chrome扩展开始第一步manfest.json","published":1,"updated":"2015-09-29T11:41:23.726Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hqg005l4si1n9srl9qe"},{"title":"blog2markdown程序打包,csdn爬虫","date":"2015-03-29T14:08:22.000Z","_content":">项目地址<https://github.com/Jackroyal/blog2markdown.git>\n\n用来实现普通blog到markdown的搬家，自动将blog的html转换成HEXO可用的Markdown格式\n暂时只做了CSDN\n\n### UPDATE:\n2015-03-29 添加了打包成exe的程序,修复cmd下乱码,win和ubuntu完美运行\n2015-03-29 连夜修复了在win下乱码的问题,删除了冗余代码\n2015-03-28 将某些参数改为从配置文件中读取,加入更多异常判断\n2014-12-15 优化标签解析功能,添加了标题,tag和category\n2014-12-13 实现解析功能,基本完成解析功能\n2014-12-10 实现CSDN的抓取，正在实现parse解析过程\n<!-- more -->\n### BUG\n如果代码中有# 和\\*会被转义成`\\#`和`\\*`\n对table的支持不好\n\n### 依赖库\n爬虫使用了`beautifulsoup  4.3.2`\n[点我点我](http://www.crummy.com/software/BeautifulSoup/)\n你必须安装这个才可以正常使用\nPS:我打包了exe[点此下载](http://pan.baidu.com/s/1dDERlOP),可以什么不装,改完配置文件,直接运行\n\n# 使用:\n\n# # 首先,编辑配置文件`spider.conf`\n格式如下:\n```\n[blog]\n# 此处url不需要单引号或者双引号,不然类型识别错误,网址最后不要/\nurl=http://blog.csdn.net/jackroyal\n[setting]\nwait_time=5\n```\n这里的`url`地址注意不要加引号,下面的`wait_time`是指两次抓取的间隔时间,这是为了安全起见,如果高频访问,可能会被封,我设置的`5`秒,你可以根据自己需要去设置\n\n## 打包\n我打包了一个[exe程序](http://pan.baidu.com/s/1dDERlOP),放在github项目的dist目录下,在windows系统中,`直接下载`,`运行`\n\nPS:由于pyInstaller的问题,导致无法在中文路径下正常运行\n\n比如你放在C:/users/张三/spider.exe\n这样是无法正常运行的\n所以应该放在全英文的目录下\nC:/software/spider.exe\n运行结果如图\n![spider运行截图](http://ww2.sinaimg.cn/large/692869a3gw1eqmymt6bhrj20ip0cata6.jpg)\n![运行结果截图](http://ww1.sinaimg.cn/large/692869a3gw1eqmyur9uihj20mb0gqmzf.jpg)\n\n# 源码执行\n如果你对我的exe不放心,可以自己执行python源码\n\n\n## #  执行\n在linux下,首先要给予执行权限\n```\nchmod a+x spider.py ParseBlog.py\npython spider.py\n```\n然后就可以了,输出文件在output文件夹\n\n在win下,经过修复也可以正常运行了,在idle(在win中你安装了python2.7的话就会有这个编辑器)中是可以完全正常的显示中文~~~~,在系统自带的cmd里中文显示会有问题,因为cmd中的编码默认是GBK,我程序基本都是utf-8,如果要在cmd显示正常,显示的代码都要加个str.encode('utf-8')才行.\n不过抓取是没有问题的,此处就不纠结了哈,能用就好~~~~\n```\n# 在win下,没有权限的问题,直接执行就好了\npython spider.py\n```\n\n\n\n","source":"_posts/blog2markdown-csdn-windows.md","raw":"title: blog2markdown程序打包,csdn爬虫\ndate: 2015-03-29 22:08:22\ntags:\n- github\n- hexo\n- windows\n- python\ncategories:\n- python学习笔记\n---\n>项目地址<https://github.com/Jackroyal/blog2markdown.git>\n\n用来实现普通blog到markdown的搬家，自动将blog的html转换成HEXO可用的Markdown格式\n暂时只做了CSDN\n\n### UPDATE:\n2015-03-29 添加了打包成exe的程序,修复cmd下乱码,win和ubuntu完美运行\n2015-03-29 连夜修复了在win下乱码的问题,删除了冗余代码\n2015-03-28 将某些参数改为从配置文件中读取,加入更多异常判断\n2014-12-15 优化标签解析功能,添加了标题,tag和category\n2014-12-13 实现解析功能,基本完成解析功能\n2014-12-10 实现CSDN的抓取，正在实现parse解析过程\n<!-- more -->\n### BUG\n如果代码中有# 和\\*会被转义成`\\#`和`\\*`\n对table的支持不好\n\n### 依赖库\n爬虫使用了`beautifulsoup  4.3.2`\n[点我点我](http://www.crummy.com/software/BeautifulSoup/)\n你必须安装这个才可以正常使用\nPS:我打包了exe[点此下载](http://pan.baidu.com/s/1dDERlOP),可以什么不装,改完配置文件,直接运行\n\n# 使用:\n\n# # 首先,编辑配置文件`spider.conf`\n格式如下:\n```\n[blog]\n# 此处url不需要单引号或者双引号,不然类型识别错误,网址最后不要/\nurl=http://blog.csdn.net/jackroyal\n[setting]\nwait_time=5\n```\n这里的`url`地址注意不要加引号,下面的`wait_time`是指两次抓取的间隔时间,这是为了安全起见,如果高频访问,可能会被封,我设置的`5`秒,你可以根据自己需要去设置\n\n## 打包\n我打包了一个[exe程序](http://pan.baidu.com/s/1dDERlOP),放在github项目的dist目录下,在windows系统中,`直接下载`,`运行`\n\nPS:由于pyInstaller的问题,导致无法在中文路径下正常运行\n\n比如你放在C:/users/张三/spider.exe\n这样是无法正常运行的\n所以应该放在全英文的目录下\nC:/software/spider.exe\n运行结果如图\n![spider运行截图](http://ww2.sinaimg.cn/large/692869a3gw1eqmymt6bhrj20ip0cata6.jpg)\n![运行结果截图](http://ww1.sinaimg.cn/large/692869a3gw1eqmyur9uihj20mb0gqmzf.jpg)\n\n# 源码执行\n如果你对我的exe不放心,可以自己执行python源码\n\n\n## #  执行\n在linux下,首先要给予执行权限\n```\nchmod a+x spider.py ParseBlog.py\npython spider.py\n```\n然后就可以了,输出文件在output文件夹\n\n在win下,经过修复也可以正常运行了,在idle(在win中你安装了python2.7的话就会有这个编辑器)中是可以完全正常的显示中文~~~~,在系统自带的cmd里中文显示会有问题,因为cmd中的编码默认是GBK,我程序基本都是utf-8,如果要在cmd显示正常,显示的代码都要加个str.encode('utf-8')才行.\n不过抓取是没有问题的,此处就不纠结了哈,能用就好~~~~\n```\n# 在win下,没有权限的问题,直接执行就好了\npython spider.py\n```\n\n\n\n","slug":"blog2markdown-csdn-windows","published":1,"updated":"2015-10-29T06:08:55.503Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hqm005s4si1ixi9y0lf"},{"title":"kali安装后设置","date":"2015-03-04T06:14:57.000Z","_content":"kali安装好了，还有几件事要做\n我们用root的身份登进去系统\n<!-- more -->\n# 1 更新软件源\n官方自带的软件源速度相对比较慢，资源也少一些，我们添加一些国内的源进去\nvi /etc/apt/sources.list\n（可自由选择，不一定要全部）： \n```\n# 官方源\ndeb http://http.kali.org/kali kali main non-free contrib\ndeb-src http://http.kali.org/kali kali main non-free contrib\ndeb http://security.kali.org/kali-security kali/updates main contrib non-free\n\n# 激进源，新手不推荐使用这个软件源\ndeb http://repo.kali.org/kali kali-bleeding-edge main\ndeb-src http://repo.kali.org/kali kali-bleeding-edge main\n\n# 中科大kali源\ndeb http://mirrors.ustc.edu.cn/kali kali main non-free contrib\ndeb-src http://mirrors.ustc.edu.cn/kali kali main non-free contrib\ndeb http://mirrors.ustc.edu.cn/kali-security kali/updates main contrib non-free\n\n# 阿里云kali源\ndeb http://mirrors.aliyun.com/kali kali main non-free contrib\ndeb-src http://mirrors.aliyun.com/kali kali main non-free contrib\ndeb http://mirrors.aliyun.com/kali-security kali/updates main contrib non-free\n```\n保存之后运行：\n`apt-get update `     # 刷新系统\n`apt-get dist-upgrade `        # 安装更新\n\n# 2 安装中文输入法和字体\n安装字体\n`apt-get install ttf-wqy-microhei ttf-wqy-zenhei`\n 执行以下命令\n `apt-get install fcitx fcitx-googlepinyin`\n\n# 3 安装vpn\nkali默认情况下vpn是无法使用的，需要安装相关组件\n```\napt-get install network-manager-openvpn\napt-get install network-manager-openvpn-gnome\napt-get install network-manager-pptp\napt-get install network-manager-pptp-gnome\napt-get install network-manager-strongswan\napt-get install network-manager-vpnc\napt-get install network-manager-vpnc-gnome\n/etc/init.d/network-manager restart\n```\n\n# 4 网卡管理显示“device not managed”\n`vi  /etc/NetworkManager/NetworkManager.conf`\n修改`managed=false`为`managed=true`\n然后重启网络管理\n`service network-manager restart`\n# 5 安装chrome浏览器\n`apt-get install google-chrome-unstable`\n","source":"_posts/after-kali.md","raw":"title: kali安装后设置\ndate: 2015-03-04 14:14:57\ntags:\n- kali\n- Linux\ncategories: Linux\n---\nkali安装好了，还有几件事要做\n我们用root的身份登进去系统\n<!-- more -->\n# 1 更新软件源\n官方自带的软件源速度相对比较慢，资源也少一些，我们添加一些国内的源进去\nvi /etc/apt/sources.list\n（可自由选择，不一定要全部）： \n```\n# 官方源\ndeb http://http.kali.org/kali kali main non-free contrib\ndeb-src http://http.kali.org/kali kali main non-free contrib\ndeb http://security.kali.org/kali-security kali/updates main contrib non-free\n\n# 激进源，新手不推荐使用这个软件源\ndeb http://repo.kali.org/kali kali-bleeding-edge main\ndeb-src http://repo.kali.org/kali kali-bleeding-edge main\n\n# 中科大kali源\ndeb http://mirrors.ustc.edu.cn/kali kali main non-free contrib\ndeb-src http://mirrors.ustc.edu.cn/kali kali main non-free contrib\ndeb http://mirrors.ustc.edu.cn/kali-security kali/updates main contrib non-free\n\n# 阿里云kali源\ndeb http://mirrors.aliyun.com/kali kali main non-free contrib\ndeb-src http://mirrors.aliyun.com/kali kali main non-free contrib\ndeb http://mirrors.aliyun.com/kali-security kali/updates main contrib non-free\n```\n保存之后运行：\n`apt-get update `     # 刷新系统\n`apt-get dist-upgrade `        # 安装更新\n\n# 2 安装中文输入法和字体\n安装字体\n`apt-get install ttf-wqy-microhei ttf-wqy-zenhei`\n 执行以下命令\n `apt-get install fcitx fcitx-googlepinyin`\n\n# 3 安装vpn\nkali默认情况下vpn是无法使用的，需要安装相关组件\n```\napt-get install network-manager-openvpn\napt-get install network-manager-openvpn-gnome\napt-get install network-manager-pptp\napt-get install network-manager-pptp-gnome\napt-get install network-manager-strongswan\napt-get install network-manager-vpnc\napt-get install network-manager-vpnc-gnome\n/etc/init.d/network-manager restart\n```\n\n# 4 网卡管理显示“device not managed”\n`vi  /etc/NetworkManager/NetworkManager.conf`\n修改`managed=false`为`managed=true`\n然后重启网络管理\n`service network-manager restart`\n# 5 安装chrome浏览器\n`apt-get install google-chrome-unstable`\n","slug":"after-kali","published":1,"updated":"2015-10-29T06:08:20.487Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hqr005z4si1clps4ua2"},{"title":"[js]前端试题","date":"2014-11-25T14:26:00.000Z","_content":"\n```javascript\n// 1、获取页面id为 hello 的节点\nvar he=document.getElementById('hello');\n// 2、获取页面所有 div 标签\nvar di=document.getElementsByTagName('div');\n// 3、给 id 为hello的节点绑定click 事件，点击的时候弹出 \"hello\"\ndocument.getElementById('hello').onclick=function(){alert('helo')};\n// 4、将页面上 id为hello的节点隐藏\ndocument.getElementById('hello').style.visibility=none;\n// 5、将 \"hello world\" 用正则替换成 \"hello javascript”\nvar str='hello world';\nstr.replace(/hello[\\s]+world/g,'hello javascript');\n// 6、给节点（假设为element）绑定click事件，当被点击时候，alert 弹出事件的类型（通过jquery）\n$(element).click(function(event) {\n    alert(event.type);\n});\n// 7、给一个节点添加一个类 \"hello\"\ndocument.getElementById('kw').className=document.getElementById('kw').className+\" hello\";\n// 8、给节点（假设为element）绑定click事件，当被点击时候，alert 弹出事件的类型（要求兼容IE、标准浏览器）\nelement.onclick=function(event){var e=event||window.event};\n// 9、假设页面有这么两个节点将 id为world的节点的 内容设置成 跟 id 为 hello 的节点一样。\ndocument.getElementById('world').innerHTML=document.getElementById('hello').innerHTML;\n// 10、通过 js 将element的margin-left 设置为 20px\nelement.style.marginLeft=\"20px\";\n\n\n\n// 1.[{a:3},{a:4},{a:1},{a:2}] sort排序\nfunction sortnum(a,b){\n    return a.a-b.a;\n}\n//   [{a:3,b:5},{a:4,b:6},{a:1},{a:2,b:8}]按a的正向排序\nfunction sortab(a,b){\n    return a.a-b.a!=0?a.a-b.a:a.b-b.b;\n}\n//   sort 排序原理  使用的算法\n// 2.my name is imweba ... => my6 name7 is8 imweba9 ...\n//   用正则实现\n'my name is imweba '.replace(/([\\w]+)\\b/g,'$1')\nvar attr='my name is imweba '.match(/([\\w]+)\\b/g);\nfor (var i = 0;i < attr.length; i++) {\n    attr[i]=attr[i]+(6+i);\n};\nattr.join(' ');//感觉不对,只能做到这个程度\n\n// 3.实现function test(str)(){},将str的每个单词的首字母大写（str为英文字符串）\nfunction test(str){\n    return str.replace(/((\\w)(\\w+?))\\b/g,function(m,a,b,c,d,e){return b.toUpperCase()+c;});\n}\n\n// 4.写一个二分查找的算法   （假设这个数组不是有序的呢）\n\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\n// 5.123+”+34  直接说结果   12334\n12334\n// 加法会将数字转化为字符串，减法和乘法等会将字符串转化为数字\n// \"4\"\\*\"5\"=20\n// 6.实现function find(attr,val){},找到当前页面里具备属性为attr且值为val的节点，输出其父元素名称\nfunction find(attr,val){\n    var dom=document.getElementsByTagName('\\*');\n    for (var i = 0; i<dom.length; i++) {\n        if(dom[i].getAttribute(attr)==val){\n            return dom[i].parentNode.tagName;\n        }\n   }\n}\n\n```\n\n\n","source":"_posts/[js]前端试题.md","raw":"title: '[js]前端试题'\ndate: 2014-11-25 22:26\ntags:\n- javascript\n- 前端\n- 正则\ncategories:\n- javascript\n---\n\n```javascript\n// 1、获取页面id为 hello 的节点\nvar he=document.getElementById('hello');\n// 2、获取页面所有 div 标签\nvar di=document.getElementsByTagName('div');\n// 3、给 id 为hello的节点绑定click 事件，点击的时候弹出 \"hello\"\ndocument.getElementById('hello').onclick=function(){alert('helo')};\n// 4、将页面上 id为hello的节点隐藏\ndocument.getElementById('hello').style.visibility=none;\n// 5、将 \"hello world\" 用正则替换成 \"hello javascript”\nvar str='hello world';\nstr.replace(/hello[\\s]+world/g,'hello javascript');\n// 6、给节点（假设为element）绑定click事件，当被点击时候，alert 弹出事件的类型（通过jquery）\n$(element).click(function(event) {\n    alert(event.type);\n});\n// 7、给一个节点添加一个类 \"hello\"\ndocument.getElementById('kw').className=document.getElementById('kw').className+\" hello\";\n// 8、给节点（假设为element）绑定click事件，当被点击时候，alert 弹出事件的类型（要求兼容IE、标准浏览器）\nelement.onclick=function(event){var e=event||window.event};\n// 9、假设页面有这么两个节点将 id为world的节点的 内容设置成 跟 id 为 hello 的节点一样。\ndocument.getElementById('world').innerHTML=document.getElementById('hello').innerHTML;\n// 10、通过 js 将element的margin-left 设置为 20px\nelement.style.marginLeft=\"20px\";\n\n\n\n// 1.[{a:3},{a:4},{a:1},{a:2}] sort排序\nfunction sortnum(a,b){\n    return a.a-b.a;\n}\n//   [{a:3,b:5},{a:4,b:6},{a:1},{a:2,b:8}]按a的正向排序\nfunction sortab(a,b){\n    return a.a-b.a!=0?a.a-b.a:a.b-b.b;\n}\n//   sort 排序原理  使用的算法\n// 2.my name is imweba ... => my6 name7 is8 imweba9 ...\n//   用正则实现\n'my name is imweba '.replace(/([\\w]+)\\b/g,'$1')\nvar attr='my name is imweba '.match(/([\\w]+)\\b/g);\nfor (var i = 0;i < attr.length; i++) {\n    attr[i]=attr[i]+(6+i);\n};\nattr.join(' ');//感觉不对,只能做到这个程度\n\n// 3.实现function test(str)(){},将str的每个单词的首字母大写（str为英文字符串）\nfunction test(str){\n    return str.replace(/((\\w)(\\w+?))\\b/g,function(m,a,b,c,d,e){return b.toUpperCase()+c;});\n}\n\n// 4.写一个二分查找的算法   （假设这个数组不是有序的呢）\n\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\n// 5.123+”+34  直接说结果   12334\n12334\n// 加法会将数字转化为字符串，减法和乘法等会将字符串转化为数字\n// \"4\"\\*\"5\"=20\n// 6.实现function find(attr,val){},找到当前页面里具备属性为attr且值为val的节点，输出其父元素名称\nfunction find(attr,val){\n    var dom=document.getElementsByTagName('\\*');\n    for (var i = 0; i<dom.length; i++) {\n        if(dom[i].getAttribute(attr)==val){\n            return dom[i].parentNode.tagName;\n        }\n   }\n}\n\n```\n\n\n","slug":"[js]前端试题","published":1,"updated":"2015-09-29T11:41:23.725Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cigbu5hqu00634si1sewjktkd"}],"PostAsset":[],"PostCategory":[{"post_id":"cigbu5hkn00004si17q2tpas3","category_id":"cigbu5hkt00014si1kk8t4oze","_id":"cigbu5hkw00044si16xulwx90"},{"post_id":"cigbu5hlu000b4si1emc6438v","category_id":"cigbu5hlw000c4si1yg1fykd8","_id":"cigbu5hlw000d4si199z21m8r"},{"post_id":"cigbu5hlz000e4si17hpqm1gd","category_id":"cigbu5hm1000f4si1b2gr6xi7","_id":"cigbu5hm2000i4si13mp8yxzi"},{"post_id":"cigbu5hm4000l4si16myuk8gy","category_id":"cigbu5hm5000m4si1330zh237","_id":"cigbu5hm6000p4si1dm7aiojh"},{"post_id":"cigbu5hm9000s4si1z421go6p","category_id":"cigbu5hma000t4si1kqc6xvyc","_id":"cigbu5hmb000w4si1lcueb85x"},{"post_id":"cigbu5hme00114si1o8v79lh1","category_id":"cigbu5hmg00124si1ymcbo2rg","_id":"cigbu5hmi00154si1q4o423g8"},{"post_id":"cigbu5hmk001a4si1khha54ft","category_id":"cigbu5hlw000c4si1yg1fykd8","_id":"cigbu5hml001b4si1gx05p5y9"},{"post_id":"cigbu5hmn001f4si1czszqvfj","category_id":"cigbu5hma000t4si1kqc6xvyc","_id":"cigbu5hmp001g4si15vwit07q"},{"post_id":"cigbu5hms001j4si1byhnn0gz","category_id":"cigbu5hma000t4si1kqc6xvyc","_id":"cigbu5hmt001k4si1509inobl"},{"post_id":"cigbu5hmx001o4si1zu1byjux","category_id":"cigbu5hmy001p4si10oo3yleq","_id":"cigbu5hmz001s4si10naccj3t"},{"post_id":"cigbu5hn2001v4si156mngrwx","category_id":"cigbu5hn4001w4si1rgsplndu","_id":"cigbu5hn5001x4si1xtox0wos"},{"post_id":"cigbu5hn7001y4si1vn66nkxt","category_id":"cigbu5hmg00124si1ymcbo2rg","_id":"cigbu5hn8001z4si1vh0v46wo"},{"post_id":"cigbu5hnc00244si1ao0h86f6","category_id":"cigbu5hmg00124si1ymcbo2rg","_id":"cigbu5hng00254si17mx49t7s"},{"post_id":"cigbu5hnk002d4si19ji8779t","category_id":"cigbu5hmg00124si1ymcbo2rg","_id":"cigbu5hnm002e4si1gd6r1z1b"},{"post_id":"cigbu5hnp002h4si17p1n705l","category_id":"cigbu5hmg00124si1ymcbo2rg","_id":"cigbu5hnq002i4si12al3f7ry"},{"post_id":"cigbu5hnt002l4si1a2qaabwr","category_id":"cigbu5hm1000f4si1b2gr6xi7","_id":"cigbu5hnu002m4si1n0opwxht"},{"post_id":"cigbu5hnx002r4si12mxqcxdr","category_id":"cigbu5hny002s4si1kygaibjr","_id":"cigbu5ho0002v4si1h3lhokyh"},{"post_id":"cigbu5ho200304si1yxan6fgg","category_id":"cigbu5hm5000m4si1330zh237","_id":"cigbu5ho300314si1mhu85ybq"},{"post_id":"cigbu5hob003c4si1sqau6dfr","category_id":"cigbu5hma000t4si1kqc6xvyc","_id":"cigbu5hoc003d4si14xd7tjd3"},{"post_id":"cigbu5hoe003h4si16kxbh57w","category_id":"cigbu5hma000t4si1kqc6xvyc","_id":"cigbu5hof003i4si1f77hgu0q"},{"post_id":"cigbu5hoi003m4si1ro5ud349","category_id":"cigbu5hoj003n4si1muw6ipa8","_id":"cigbu5hol003q4si1z1l9nscu"},{"post_id":"cigbu5hon003r4si1gjjhyq2o","category_id":"cigbu5hoo003s4si1f4qagzo1","_id":"cigbu5hop003v4si1m63mwg55"},{"post_id":"cigbu5hou00434si1zd85u68e","category_id":"cigbu5hoj003n4si1muw6ipa8","_id":"cigbu5hoy00444si1idlgaa8w"},{"post_id":"cigbu5hp000464si1ksmo7uz3","category_id":"cigbu5hoj003n4si1muw6ipa8","_id":"cigbu5hp200474si1unmunuiz"},{"post_id":"cigbu5hp500494si1isedzxp3","category_id":"cigbu5hoj003n4si1muw6ipa8","_id":"cigbu5hp7004a4si1itz772m4"},{"post_id":"cigbu5hpa004c4si1xurcydka","category_id":"cigbu5hny002s4si1kygaibjr","_id":"cigbu5hpe004d4si124bv8wrc"},{"post_id":"cigbu5hph004h4si1gyb669vy","category_id":"cigbu5hny002s4si1kygaibjr","_id":"cigbu5hpi004i4si1uv4kboeu"},{"post_id":"cigbu5hpm004m4si1t90l1qr4","category_id":"cigbu5hma000t4si1kqc6xvyc","_id":"cigbu5hpn004n4si1xnarj5m1"},{"post_id":"cigbu5hpy004u4si1mnxzj9d3","category_id":"cigbu5hoj003n4si1muw6ipa8","_id":"cigbu5hpz004v4si10o5elcnf"},{"post_id":"cigbu5hq1004x4si1xecbfhck","category_id":"cigbu5hq2004y4si1cnazhbzc","_id":"cigbu5hq300514si1ax6rtrge"},{"post_id":"cigbu5hq6005a4si13rr3vscq","category_id":"cigbu5hq2004y4si1cnazhbzc","_id":"cigbu5hq7005b4si1q8vtg70y"},{"post_id":"cigbu5hqb005g4si1hgdin3xe","category_id":"cigbu5hq2004y4si1cnazhbzc","_id":"cigbu5hqd005h4si1p3c6knki"},{"post_id":"cigbu5hqg005l4si1n9srl9qe","category_id":"cigbu5hq2004y4si1cnazhbzc","_id":"cigbu5hqh005m4si1io5c3wu8"},{"post_id":"cigbu5hqm005s4si1ixi9y0lf","category_id":"cigbu5hmg00124si1ymcbo2rg","_id":"cigbu5hqn005t4si1bajc1mu8"},{"post_id":"cigbu5hqr005z4si1clps4ua2","category_id":"cigbu5hma000t4si1kqc6xvyc","_id":"cigbu5hqs00604si13d1tpux1"},{"post_id":"cigbu5hqu00634si1sewjktkd","category_id":"cigbu5hkt00014si1kk8t4oze","_id":"cigbu5hqv00644si1hasw5sgn"}],"PostTag":[{"post_id":"cigbu5hkn00004si17q2tpas3","tag_id":"cigbu5hku00024si1piz6zb35","_id":"cigbu5hky00074si1gsemxl5i"},{"post_id":"cigbu5hkn00004si17q2tpas3","tag_id":"cigbu5hkw00034si1vo0rwsj8","_id":"cigbu5hky00084si1ja8eddfp"},{"post_id":"cigbu5hkn00004si17q2tpas3","tag_id":"cigbu5hkx00054si1d0bd2z49","_id":"cigbu5hky00094si146eik4fz"},{"post_id":"cigbu5hkn00004si17q2tpas3","tag_id":"cigbu5hkx00064si17l4muxmi","_id":"cigbu5hkz000a4si16pr7rzl4"},{"post_id":"cigbu5hlz000e4si17hpqm1gd","tag_id":"cigbu5hm1000g4si1q6rvp9tc","_id":"cigbu5hm3000j4si1uleid56h"},{"post_id":"cigbu5hlz000e4si17hpqm1gd","tag_id":"cigbu5hm2000h4si11v4zswc5","_id":"cigbu5hm3000k4si1nl8xwvnu"},{"post_id":"cigbu5hm4000l4si16myuk8gy","tag_id":"cigbu5hm6000n4si1c9wiq9zc","_id":"cigbu5hm7000q4si1chr8fohz"},{"post_id":"cigbu5hm4000l4si16myuk8gy","tag_id":"cigbu5hm6000o4si1wv3k4amg","_id":"cigbu5hm7000r4si14g895he8"},{"post_id":"cigbu5hm9000s4si1z421go6p","tag_id":"cigbu5hma000u4si1sy081rdd","_id":"cigbu5hmd000y4si1fufqp0mg"},{"post_id":"cigbu5hm9000s4si1z421go6p","tag_id":"cigbu5hmb000v4si1kq9epkur","_id":"cigbu5hmd000z4si1bgxg1aeh"},{"post_id":"cigbu5hm9000s4si1z421go6p","tag_id":"cigbu5hmc000x4si1hl2z2p4q","_id":"cigbu5hmd00104si17jn5xn0a"},{"post_id":"cigbu5hme00114si1o8v79lh1","tag_id":"cigbu5hmh00134si148easwsw","_id":"cigbu5hmi00174si1lxi8o2be"},{"post_id":"cigbu5hme00114si1o8v79lh1","tag_id":"cigbu5hmh00144si1t70fvi9s","_id":"cigbu5hmi00184si1ltud36us"},{"post_id":"cigbu5hme00114si1o8v79lh1","tag_id":"cigbu5hmi00164si1wycfnq8s","_id":"cigbu5hmj00194si1kt3hvefr"},{"post_id":"cigbu5hmk001a4si1khha54ft","tag_id":"cigbu5hmb000v4si1kq9epkur","_id":"cigbu5hmm001d4si1askwtg7g"},{"post_id":"cigbu5hmk001a4si1khha54ft","tag_id":"cigbu5hmm001c4si1lxpwqvn1","_id":"cigbu5hmm001e4si1dytjlpyz"},{"post_id":"cigbu5hmn001f4si1czszqvfj","tag_id":"cigbu5hma000u4si1sy081rdd","_id":"cigbu5hmp001h4si1s4sfwqme"},{"post_id":"cigbu5hmn001f4si1czszqvfj","tag_id":"cigbu5hmb000v4si1kq9epkur","_id":"cigbu5hmp001i4si14av5q17y"},{"post_id":"cigbu5hms001j4si1byhnn0gz","tag_id":"cigbu5hmb000v4si1kq9epkur","_id":"cigbu5hmv001m4si1nzp0sgzw"},{"post_id":"cigbu5hms001j4si1byhnn0gz","tag_id":"cigbu5hmu001l4si1chhdkjn8","_id":"cigbu5hmv001n4si1wkrnl8z7"},{"post_id":"cigbu5hmx001o4si1zu1byjux","tag_id":"cigbu5hmy001q4si1htlqfg00","_id":"cigbu5hmz001t4si197nl92g1"},{"post_id":"cigbu5hmx001o4si1zu1byjux","tag_id":"cigbu5hmz001r4si19qrkm9av","_id":"cigbu5hn0001u4si1m78gqi5s"},{"post_id":"cigbu5hn7001y4si1vn66nkxt","tag_id":"cigbu5hmh00134si148easwsw","_id":"cigbu5hn900214si1p10wvs3t"},{"post_id":"cigbu5hn7001y4si1vn66nkxt","tag_id":"cigbu5hn800204si1y5dee9bj","_id":"cigbu5hn900224si1jpzqkvt9"},{"post_id":"cigbu5hn7001y4si1vn66nkxt","tag_id":"cigbu5hma000u4si1sy081rdd","_id":"cigbu5hna00234si176383b1i"},{"post_id":"cigbu5hnc00244si1ao0h86f6","tag_id":"cigbu5hmh00134si148easwsw","_id":"cigbu5hni00294si1sgns8qoo"},{"post_id":"cigbu5hnc00244si1ao0h86f6","tag_id":"cigbu5hng00264si14r1vmg27","_id":"cigbu5hnj002a4si1575puu81"},{"post_id":"cigbu5hnc00244si1ao0h86f6","tag_id":"cigbu5hni00274si123gu5yp9","_id":"cigbu5hnj002b4si1hn8twb4h"},{"post_id":"cigbu5hnc00244si1ao0h86f6","tag_id":"cigbu5hni00284si17g0vy1u8","_id":"cigbu5hnj002c4si1fupz3u6r"},{"post_id":"cigbu5hnk002d4si19ji8779t","tag_id":"cigbu5hmh00134si148easwsw","_id":"cigbu5hnn002f4si1nu01cg4l"},{"post_id":"cigbu5hnk002d4si19ji8779t","tag_id":"cigbu5hn800204si1y5dee9bj","_id":"cigbu5hnn002g4si1bzp1jit1"},{"post_id":"cigbu5hnp002h4si17p1n705l","tag_id":"cigbu5hmh00134si148easwsw","_id":"cigbu5hnq002j4si15qwwg9k8"},{"post_id":"cigbu5hnp002h4si17p1n705l","tag_id":"cigbu5hmi00164si1wycfnq8s","_id":"cigbu5hnq002k4si10ococw5k"},{"post_id":"cigbu5hnt002l4si1a2qaabwr","tag_id":"cigbu5hnv002n4si1txyhxyfx","_id":"cigbu5hnw002p4si1ho8nopfv"},{"post_id":"cigbu5hnt002l4si1a2qaabwr","tag_id":"cigbu5hnv002o4si109bbb61m","_id":"cigbu5hnw002q4si1spat0lcp"},{"post_id":"cigbu5hnx002r4si12mxqcxdr","tag_id":"cigbu5hnz002t4si1hu3r9ujw","_id":"cigbu5ho1002x4si13dhrzldx"},{"post_id":"cigbu5hnx002r4si12mxqcxdr","tag_id":"cigbu5ho0002u4si1w498mm0v","_id":"cigbu5ho1002y4si1z401uyd6"},{"post_id":"cigbu5hnx002r4si12mxqcxdr","tag_id":"cigbu5ho0002w4si1hzsdmfu6","_id":"cigbu5ho1002z4si19w7eexto"},{"post_id":"cigbu5ho200304si1yxan6fgg","tag_id":"cigbu5ho400324si12f0zvcwu","_id":"cigbu5ho500354si1zs4p9brs"},{"post_id":"cigbu5ho200304si1yxan6fgg","tag_id":"cigbu5ho400334si1ygh8azx4","_id":"cigbu5ho500364si1fdtoj8de"},{"post_id":"cigbu5ho200304si1yxan6fgg","tag_id":"cigbu5ho0002u4si1w498mm0v","_id":"cigbu5ho600374si10r9unala"},{"post_id":"cigbu5ho200304si1yxan6fgg","tag_id":"cigbu5ho500344si1bj8rttnj","_id":"cigbu5ho600384si1j4ly3t30"},{"post_id":"cigbu5ho700394si1ydtjg8d0","tag_id":"cigbu5ho9003a4si18d307voc","_id":"cigbu5ho9003b4si1iianh14p"},{"post_id":"cigbu5hob003c4si1sqau6dfr","tag_id":"cigbu5hma000u4si1sy081rdd","_id":"cigbu5hoc003f4si17ga0sska"},{"post_id":"cigbu5hob003c4si1sqau6dfr","tag_id":"cigbu5hoc003e4si1ycu6zk6w","_id":"cigbu5hoc003g4si1vzuqlhun"},{"post_id":"cigbu5hoe003h4si16kxbh57w","tag_id":"cigbu5hog003j4si1oaeklt64","_id":"cigbu5hog003k4si1lz0z4ffh"},{"post_id":"cigbu5hoe003h4si16kxbh57w","tag_id":"cigbu5hma000u4si1sy081rdd","_id":"cigbu5hog003l4si11qbwlwbk"},{"post_id":"cigbu5hoi003m4si1ro5ud349","tag_id":"cigbu5ho9003a4si18d307voc","_id":"cigbu5hok003o4si10i1qfk58"},{"post_id":"cigbu5hoi003m4si1ro5ud349","tag_id":"cigbu5hoc003e4si1ycu6zk6w","_id":"cigbu5hol003p4si1otlyc0rm"},{"post_id":"cigbu5hon003r4si1gjjhyq2o","tag_id":"cigbu5hkx00054si1d0bd2z49","_id":"cigbu5hor003y4si1d3nhyesp"},{"post_id":"cigbu5hon003r4si1gjjhyq2o","tag_id":"cigbu5hop003t4si150313nog","_id":"cigbu5hor003z4si1gpf7uvcg"},{"post_id":"cigbu5hon003r4si1gjjhyq2o","tag_id":"cigbu5hop003u4si1g4jugkdv","_id":"cigbu5hor00404si1h01gk3tv"},{"post_id":"cigbu5hon003r4si1gjjhyq2o","tag_id":"cigbu5hoq003w4si1aoh957h3","_id":"cigbu5hor00414si1n4g28ujx"},{"post_id":"cigbu5hon003r4si1gjjhyq2o","tag_id":"cigbu5hor003x4si1bzd80wg0","_id":"cigbu5hos00424si1h1xv5kx6"},{"post_id":"cigbu5hou00434si1zd85u68e","tag_id":"cigbu5ho9003a4si18d307voc","_id":"cigbu5hoy00454si1a64t82wg"},{"post_id":"cigbu5hp000464si1ksmo7uz3","tag_id":"cigbu5ho9003a4si18d307voc","_id":"cigbu5hp200484si1tf9wdu4w"},{"post_id":"cigbu5hp500494si1isedzxp3","tag_id":"cigbu5ho9003a4si18d307voc","_id":"cigbu5hp8004b4si103uj5a0b"},{"post_id":"cigbu5hpa004c4si1xurcydka","tag_id":"cigbu5ho0002u4si1w498mm0v","_id":"cigbu5hpe004e4si1jeyfthqp"},{"post_id":"cigbu5hpa004c4si1xurcydka","tag_id":"cigbu5hnz002t4si1hu3r9ujw","_id":"cigbu5hpf004f4si17b3gp8gc"},{"post_id":"cigbu5hpa004c4si1xurcydka","tag_id":"cigbu5hmh00134si148easwsw","_id":"cigbu5hpf004g4si1o035ej5r"},{"post_id":"cigbu5hph004h4si1gyb669vy","tag_id":"cigbu5ho0002u4si1w498mm0v","_id":"cigbu5hpj004j4si1r6wj5ed8"},{"post_id":"cigbu5hph004h4si1gyb669vy","tag_id":"cigbu5hnz002t4si1hu3r9ujw","_id":"cigbu5hpj004k4si1howkuca8"},{"post_id":"cigbu5hph004h4si1gyb669vy","tag_id":"cigbu5hmh00134si148easwsw","_id":"cigbu5hpk004l4si1oz0cuglu"},{"post_id":"cigbu5hpm004m4si1t90l1qr4","tag_id":"cigbu5hmb000v4si1kq9epkur","_id":"cigbu5hpp004q4si1hji4uv2n"},{"post_id":"cigbu5hpm004m4si1t90l1qr4","tag_id":"cigbu5hpn004o4si1em5fjadw","_id":"cigbu5hpp004r4si1kpfzi5du"},{"post_id":"cigbu5hpm004m4si1t90l1qr4","tag_id":"cigbu5hpo004p4si1gdummmg8","_id":"cigbu5hpp004s4si1i0lj06up"},{"post_id":"cigbu5hpm004m4si1t90l1qr4","tag_id":"cigbu5hmc000x4si1hl2z2p4q","_id":"cigbu5hpp004t4si1m1xgxxpy"},{"post_id":"cigbu5hpy004u4si1mnxzj9d3","tag_id":"cigbu5ho9003a4si18d307voc","_id":"cigbu5hq0004w4si1lxxes89p"},{"post_id":"cigbu5hq1004x4si1xecbfhck","tag_id":"cigbu5hq2004z4si1trri9s73","_id":"cigbu5hq400554si19cuoabml"},{"post_id":"cigbu5hq1004x4si1xecbfhck","tag_id":"cigbu5hq300504si1syqdwe8c","_id":"cigbu5hq400564si1qahjv9du"},{"post_id":"cigbu5hq1004x4si1xecbfhck","tag_id":"cigbu5hq300524si11fiiad14","_id":"cigbu5hq500574si1iet4avuz"},{"post_id":"cigbu5hq1004x4si1xecbfhck","tag_id":"cigbu5hq400534si1gr6phim6","_id":"cigbu5hq500584si11c97ex7l"},{"post_id":"cigbu5hq1004x4si1xecbfhck","tag_id":"cigbu5hq400544si19j5kac5s","_id":"cigbu5hq500594si19den4nm3"},{"post_id":"cigbu5hq6005a4si13rr3vscq","tag_id":"cigbu5hq2004z4si1trri9s73","_id":"cigbu5hq8005d4si1xdv5k51v"},{"post_id":"cigbu5hq6005a4si13rr3vscq","tag_id":"cigbu5hq300504si1syqdwe8c","_id":"cigbu5hq8005e4si120ylqjej"},{"post_id":"cigbu5hq6005a4si13rr3vscq","tag_id":"cigbu5hq8005c4si1hklb553w","_id":"cigbu5hq8005f4si1jxja1t2t"},{"post_id":"cigbu5hqb005g4si1hgdin3xe","tag_id":"cigbu5hq2004z4si1trri9s73","_id":"cigbu5hqd005i4si1yyodqnqg"},{"post_id":"cigbu5hqb005g4si1hgdin3xe","tag_id":"cigbu5hq300504si1syqdwe8c","_id":"cigbu5hqe005j4si1vd1h3hb0"},{"post_id":"cigbu5hqb005g4si1hgdin3xe","tag_id":"cigbu5hq300524si11fiiad14","_id":"cigbu5hqe005k4si1vcm5s6tb"},{"post_id":"cigbu5hqg005l4si1n9srl9qe","tag_id":"cigbu5hq2004z4si1trri9s73","_id":"cigbu5hqh005n4si1ndgizgup"},{"post_id":"cigbu5hqg005l4si1n9srl9qe","tag_id":"cigbu5hq300504si1syqdwe8c","_id":"cigbu5hqi005o4si100wr3me9"},{"post_id":"cigbu5hqg005l4si1n9srl9qe","tag_id":"cigbu5hq400534si1gr6phim6","_id":"cigbu5hqi005p4si1aahhiia4"},{"post_id":"cigbu5hqg005l4si1n9srl9qe","tag_id":"cigbu5hq400544si19j5kac5s","_id":"cigbu5hqj005q4si17nze4or5"},{"post_id":"cigbu5hqg005l4si1n9srl9qe","tag_id":"cigbu5hq300524si11fiiad14","_id":"cigbu5hqj005r4si19h90f58e"},{"post_id":"cigbu5hqm005s4si1ixi9y0lf","tag_id":"cigbu5hoc003e4si1ycu6zk6w","_id":"cigbu5hqo005v4si1yldlakng"},{"post_id":"cigbu5hqm005s4si1ixi9y0lf","tag_id":"cigbu5ho9003a4si18d307voc","_id":"cigbu5hqo005w4si12i030bzz"},{"post_id":"cigbu5hqm005s4si1ixi9y0lf","tag_id":"cigbu5hqo005u4si1l6m1aor4","_id":"cigbu5hqp005x4si1zioah2dq"},{"post_id":"cigbu5hqm005s4si1ixi9y0lf","tag_id":"cigbu5hmh00134si148easwsw","_id":"cigbu5hqp005y4si1hug9a6cb"},{"post_id":"cigbu5hqr005z4si1clps4ua2","tag_id":"cigbu5hog003j4si1oaeklt64","_id":"cigbu5hqs00614si1dokv57nq"},{"post_id":"cigbu5hqr005z4si1clps4ua2","tag_id":"cigbu5hma000u4si1sy081rdd","_id":"cigbu5hqs00624si1v5pnhj2e"},{"post_id":"cigbu5hqu00634si1sewjktkd","tag_id":"cigbu5hku00024si1piz6zb35","_id":"cigbu5hqv00664si1bxqre6p7"},{"post_id":"cigbu5hqu00634si1sewjktkd","tag_id":"cigbu5hkx00054si1d0bd2z49","_id":"cigbu5hqw00674si1pv4492s1"},{"post_id":"cigbu5hqu00634si1sewjktkd","tag_id":"cigbu5hqv00654si17s89z8l9","_id":"cigbu5hqw00684si1hhf7h4qj"}],"Tag":[{"name":"javascript","_id":"cigbu5hku00024si1piz6zb35"},{"name":"正则表达式","_id":"cigbu5hkw00034si1vo0rwsj8"},{"name":"前端","_id":"cigbu5hkx00054si1d0bd2z49"},{"name":"js","_id":"cigbu5hkx00064si17l4muxmi"},{"name":"微信支付","_id":"cigbu5hm1000g4si1q6rvp9tc"},{"name":"api","_id":"cigbu5hm2000h4si11v4zswc5"},{"name":"sql server","_id":"cigbu5hm6000n4si1c9wiq9zc"},{"name":"wamp","_id":"cigbu5hm6000o4si1wv3k4amg"},{"name":"Linux","_id":"cigbu5hma000u4si1sy081rdd"},{"name":"ubuntu","_id":"cigbu5hmb000v4si1kq9epkur"},{"name":"shadowsocks","_id":"cigbu5hmc000x4si1hl2z2p4q"},{"name":"python","_id":"cigbu5hmh00134si148easwsw"},{"name":"scrapy","_id":"cigbu5hmh00144si1t70fvi9s"},{"name":"爬虫","_id":"cigbu5hmi00164si1wycfnq8s"},{"name":"apache","_id":"cigbu5hmm001c4si1lxpwqvn1"},{"name":"thinkphp","_id":"cigbu5hmu001l4si1chhdkjn8"},{"name":"sql","_id":"cigbu5hmy001q4si1htlqfg00"},{"name":"select","_id":"cigbu5hmz001r4si19qrkm9av"},{"name":"socket","_id":"cigbu5hn800204si1y5dee9bj"},{"name":"csdn","_id":"cigbu5hng00264si14r1vmg27"},{"name":"模拟登录","_id":"cigbu5hni00274si123gu5yp9"},{"name":"requests","_id":"cigbu5hni00284si17g0vy1u8"},{"name":"php","_id":"cigbu5hnv002n4si1txyhxyfx"},{"name":"bool","_id":"cigbu5hnv002o4si109bbb61m"},{"name":"图像处理","_id":"cigbu5hnz002t4si1hu3r9ujw"},{"name":"opencv","_id":"cigbu5ho0002u4si1w498mm0v"},{"name":"lbph","_id":"cigbu5ho0002w4si1hzsdmfu6"},{"name":"软件安装与技巧","_id":"cigbu5ho400324si12f0zvcwu"},{"name":"vs2010","_id":"cigbu5ho400334si1ygh8azx4"},{"name":"win8","_id":"cigbu5ho500344si1bj8rttnj"},{"name":"hexo","_id":"cigbu5ho9003a4si18d307voc"},{"name":"github","_id":"cigbu5hoc003e4si1ycu6zk6w"},{"name":"kali","_id":"cigbu5hog003j4si1oaeklt64"},{"name":"css","_id":"cigbu5hop003t4si150313nog"},{"name":"html5","_id":"cigbu5hop003u4si1g4jugkdv"},{"name":"ie","_id":"cigbu5hoq003w4si1aoh957h3"},{"name":"兼容性","_id":"cigbu5hor003x4si1bzd80wg0"},{"name":"ipv6","_id":"cigbu5hpn004o4si1em5fjadw"},{"name":"digitalocean","_id":"cigbu5hpo004p4si1gdummmg8"},{"name":"chrome","_id":"cigbu5hq2004z4si1trri9s73"},{"name":"cmcc-edu","_id":"cigbu5hq300504si1syqdwe8c"},{"name":"中国移动","_id":"cigbu5hq300524si11fiiad14"},{"name":"扩展","_id":"cigbu5hq400534si1gr6phim6"},{"name":"脚本","_id":"cigbu5hq400544si19j5kac5s"},{"name":"表单","_id":"cigbu5hq8005c4si1hklb553w"},{"name":"windows","_id":"cigbu5hqo005u4si1l6m1aor4"},{"name":"正则","_id":"cigbu5hqv00654si17s89z8l9"}]}}